/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],[,,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function r(t,e,n,r,o,c,l){try{var h=t[c](l),f=h.value}catch(t){return void n(t)}h.done?e(f):Promise.resolve(f).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var l=t.apply(e,n);function h(t){r(l,o,c,h,f,"next",t)}function f(t){r(l,o,c,h,f,"throw",t)}h(void 0)}))}}n.d(e,"a",(function(){return o}))},,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74);e.extractVuexModule=r.extractVuexModule,e.createModule=r.createModule;var o=n(99);e.createSubModule=o.createSubModule;var c=n(100);e.createProxy=c.createProxy,e.clearProxyCache=c.clearProxyCache;var l=n(134);e.action=l.action,e.getRawActionContext=l.getRawActionContext;var h=n(136);e.mutation=h.mutation;var f=n(135);e.Module=f.Module,e.VuexModule=f.LegacyVuexModule;var d=n(246);e.getter=d.getter},function(t,e,n){"use strict";var r=TypeError,o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(t){o=null}var c=function(){throw new r},l=o?function(){try{return arguments.callee,c}catch(t){try{return o(arguments,"callee").get}catch(t){return c}}}():c,h=n(222)(),f=Object.getPrototypeOf||function(t){return t.__proto__},d=void 0,m="undefined"==typeof Uint8Array?void 0:f(Uint8Array),y={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":d&&h&&Symbol.asyncIterator?d[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":h?Symbol:void 0,"%SymbolPrototype%":h?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":l,"%TypedArray%":m,"%TypedArrayPrototype%":m?m.prototype:void 0,"%TypeError%":r,"%TypeErrorPrototype%":r.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},v=n(98).call(Function.call,String.prototype.replace),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,x=function(t){var e=[];return v(t,w,(function(t,n,r,o){e[e.length]=r?v(o,S,"$1"):n||t})),e},_=function(t,e){if(!(t in y))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===y[t]&&!e)throw new r("intrinsic "+t+" exists, but is not available. Please file an issue!");return y[t]};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=x(t),c=_("%"+(n.length>0?n[0]:"")+"%",e),i=1;i<n.length;i+=1)if(null!=c)if(o&&i+1>=n.length){var desc=o(c,n[i]);if(!e&&!(n[i]in c))throw new r("base intrinsic for "+t+" exists, but the property is not available.");c=desc?desc.get||desc.value:c[n[i]]}else c=c[n[i]];return c}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},,,,,,function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},,,,,,,,,,,function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);r&&o[h[0]]||(n&&(h[2]?h[2]="".concat(n," and ").concat(h[2]):h[2]=n),e.push(h))}},e}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],l={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return v}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,f=!1,d=function(){},m=null,y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t,e,n,o){f=n,m=o||{};var l=r(t,e);return w(l),function(e){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}e?w(l=r(t,e)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var f=0;f<h.parts.length;f++)h.parts[f]();delete c[h.id]}}}}function w(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(x(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(x(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function S(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function x(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return d;r.parentNode.removeChild(r)}if(y){var o=h++;r=l||(l=S()),e=E.bind(null,r,o,!1),n=E.bind(null,r,o,!0)}else r=S(),e=I.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var _,T=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function E(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=T(e,o);else{var c=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(c,l[e]):t.appendChild(c)}}function I(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),m.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},,function(t,e,n){"use strict";function r(t,p){return(r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(14);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}},,,,,,,,,function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"e",(function(){return r.a})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return k})),n.d(e,"f",(function(){return N})),n.d(e,"b",(function(){return M}));var r=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(){return"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function f(t,e){d(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){d(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){d(t,e,n)}))}function d(t,e,n){(n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,o,t,n):Reflect.defineMetadata(r,o,t)}))}var m={__proto__:[]}instanceof Array;function y(t){return function(e,n,r){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push((function(e){return t(e,n,r)}))}}function v(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var data=new e;e.prototype._init=n;var r={};return Object.keys(data).forEach((function(t){void 0!==data[t]&&(r[t]=data[t])})),r}var w=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(w.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"==typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){return c({},t,r.value)}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return v(this,t)}});var o=t.__decorators__;o&&(o.forEach((function(t){return t(e)})),delete t.__decorators__);var l=Object.getPrototypeOf(t.prototype),d=l instanceof r.a?l.constructor:r.a,m=d.extend(e);return _(m,t,d),h()&&f(m,t),m}var x={prototype:!0,arguments:!0,callee:!0,caller:!0};function _(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!x[r]){var c=Object.getOwnPropertyDescriptor(t,r);if(!c||c.configurable){var l,h,f=Object.getOwnPropertyDescriptor(e,r);if(!m){if("cid"===r)return;var d=Object.getOwnPropertyDescriptor(n,r);if(l=f.value,h=o(l),null!=l&&("object"===h||"function"===h)&&d&&d.value===f.value)return}0,Object.defineProperty(t,r,f)}}}))}function T(t){return"function"==typeof t?S(t):function(e){return S(e,t)}}T.registerHooks=function(t){w.push.apply(w,l(t))};var E=T;var I="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function A(t,e,n){if(I&&!Array.isArray(t)&&"function"!=typeof t&&void 0===t.type){var r=Reflect.getMetadata("design:type",e,n);r!==Object&&(t.type=r)}}function C(t){return void 0===t&&(t={}),function(e,n){A(t,e,n),y((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function k(t,e){return void 0===e&&(e={}),function(n,r){A(e,n,r),y((function(n,r){(n.props||(n.props={}))[t]=e,(n.computed||(n.computed={}))[r]={get:function(){return this[t]},set:function(e){this.$emit("update:"+t,e)}}}))(n,r)}}function N(path,t){void 0===t&&(t={});var e=t.deep,n=void 0!==e&&e,r=t.immediate,o=void 0!==r&&r;return y((function(t,e){"object"!=typeof t.watch&&(t.watch=Object.create(null));var r=t.watch;"object"!=typeof r[path]||Array.isArray(r[path])?void 0===r[path]&&(r[path]=[]):r[path]=[r[path]],r[path].push({handler:e,deep:n,immediate:o})}))}var D=/\B([A-Z])/g;function M(t){return function(e,n,r){var o=n.replace(D,"-$1").toLowerCase(),c=r.value;r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var l=function(r){var c=t||o;void 0===r?0===n.length?e.$emit(c):1===n.length?e.$emit(c,n[0]):e.$emit.apply(e,[c].concat(n)):0===n.length?e.$emit(c,r):1===n.length?e.$emit(c,r,n[0]):e.$emit.apply(e,[c,r].concat(n))},h=c.apply(this,n);return O(h)?h.then(l):l(h),h}}}function O(t){return t instanceof Promise||t&&"function"==typeof t.then}},,,,,,,,,,,function(t,e,n){"use strict";var r=n(98);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=n(228);t.exports=function(t){return"symbol"==typeof t?"Symbol":r(t)}},,function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}}(t,i)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return o}))},,,,,,,,,,,,,function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=o(n(218)),l=n(99),h=n(100),f=n(76),d=n(134),m=n(136),y=n(245);function v(t){var e=this.prototype.__options__={},n=function(){};if(n.prototype.__options__={},Object.assign(n.prototype.__options__,e),void 0===t)return n;var r=n.prototype.__options__||{};return t.namespaced&&(r.namespaced=t.namespaced),t.strict&&(r.strict=t.strict),t.target&&(r.target=t.target),t.enableLocalWatchers&&(r.enableLocalWatchers=t.enableLocalWatchers),n}function w(t){var e=t.prototype.__options__&&t.prototype.__options__.namespaced;if(e){var n=e.split("/");t.prototype.__namespacedPath__=n[n.length-1]||n[n.length-2]}return t.prototype.__namespacedPath__}function S(t){void 0===t&&(t=[]);for(var e={},n=0,r=t;n<r.length;n++){var o=r[n];e[o]=new Function("state","return state."+o)}return e}e.createModule=function(t){var e=function(){};return e.prototype.__options__=t,e.With=v,e},e.extractVuexModule=function(t){var e,n,o,v,x=t;if(x.prototype.__vuex_module_cache__)return x.prototype.__vuex_module_cache__;!function(t){t.prototype.__namespacedPath__="",t.prototype.__vuex_module_cache__=void 0,t.prototype.__vuex_proxy_cache__=void 0,t.prototype.__vuex_local_proxy_cache__=void 0,t.prototype.__submodules_cache__={},t.prototype.__context_store__={},t.prototype.__watch__={},t.prototype.__explicit_getter_names__=[]}(x);var _=function(t){for(var e=new t,n=Object.getOwnPropertyNames(e),r={},o={},c=t.prototype.__submodules_cache__,h=t.prototype.__options__||{},f=0,d=n;f<d.length;f++){var m=d[f];if(l.isFieldASubModule(e,m)){c[m]=e[m].__submodule_class__;var y=l.extractVuexSubModule(e,m);o[m]=y}else r[m]=e[m]}return{submodules:o,mutations:{},getters:S(t.prototype.__decorator_getter_names__),state:"nuxt"===h.target?function(){return r}:r}}(x),T=function(t){var e={},n={},r={},o={},l=c.default(t.prototype),f=Object.keys(l).filter((function(t){return l[t].get})),d=t.prototype.__explicit_mutations_names__||[],m=t.prototype.__actions__||[],y=function(c){if("constructor"===c||"__options__"===c||"__vuex_module_cache__"===c||"__vuex_proxy_cache__"===c||"__mutations_cache__"===c||"__explicit_mutations__"===c||"__getter_mutations__"===c)return"continue";var y=l[c],v="function"==typeof y.value&&m.find((function(t){return t.__name__===c}));if(v&&"mutate"===v.__type__){var w=y.value,S=function(e,n){t.prototype.__context_store__=e;var r=h.createLocalProxy(t,e);return void 0===r.$store&&Object.defineProperty(r,"$store",{value:e}),w.call(r,n)};return r[c]=S,"continue"}if(v&&"raw"===v.__type__){var x=y.value;S=function(t,e){return x.call(t,e)};return r[c]=S,"continue"}if("function"==typeof y.value&&d.indexOf(c)>-1){var _=function(t,e){return y.value.call(t,e)};return n[c]=_,"continue"}if(y.get){o[c]=function(e,n){var r=h.createLocalProxy(t,n);return y.get.call(r)}}if(y.set){_=function(t,e){return y.set.call(t,e)};if(!1===f.indexOf(c)>-1)throw new Error("\nImproper Use of Setter Mutations:\nat >>\nset "+c+"( payload ) {\n\t...\n}\n\nSetter mutations should only be used if there is a corresponding getter defined.\n\nEither define a corresponding getter for this setter mutation or,\nDefine them as an explicit mutation using function assignment.\nExample:\n--------------------\n"+c+" = ( payload ) => {\n ...\n}");e[c]=_}t.prototype.__explicit_getter_names__=f};for(var v in l)y(v);return{actions:r,mutations:{explicitMutations:n,setterMutations:e},getters:o}}(x);x.prototype.__mutations_cache__={__explicit_mutations__:T.mutations.explicitMutations,__setter_mutations__:T.mutations.setterMutations};var E=x.name.toLowerCase(),I={namespaced:!(!x.prototype.__options__||!x.prototype.__options__.namespaced),state:_.state,mutations:r({},T.mutations.explicitMutations,T.mutations.setterMutations,(e={},e["__"+E+"_internal_mutator__"]=m.internalMutator,e)),getters:r({},T.getters,_.getters,(n={},n["__"+E+"_internal_getter__"]=y.internalGetter,n)),actions:r({},T.actions,(o={},o["__"+E+"_internal_action__"]=d.internalAction,o)),modules:_.submodules},A=((v={})[w(x)||f.toCamelCase(x.name)]=I,v);return x.prototype.__vuex_module_cache__=A,A},e.getNamespacedPath=w},function(t,e,n){"use strict";var r=n(13),o=n(226),c=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&c(t,".prototype.")?o(n):n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toCamelCase=function(t){return t[0].toLocaleLowerCase()+t.substring(1)},e.getClassPath=function(path){if(!path)return"";var t=path.split("/");return t[t.length-1]},e.refineNamespacedPath=function(path){var t=path.split("/").filter((function(t){return t.trim().length>0})).join("/").trim();return t.length>0?t+"/":t}},,,,,,function(t,e,n){"use strict";var r,o=(r=n(137))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=o},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(224);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),o=n(76);e.isFieldASubModule=function(t,e){return null!=t[e]&&"object"==typeof t[e]&&"submodule"===t[e].__submodule_type__},e.extractVuexSubModule=function(t,e){var n=t[e].__submodule_class__;return r.extractVuexModule(n)[o.getClassPath(n.prototype.__namespacedPath__)||o.toCamelCase(n.name)]},e.createSubModule=function(t){return{__submodule_type__:"submodule",__submodule_class__:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),o=n(76);function c(t,e){var n=e;if(n.prototype.__vuex_proxy_cache__)return n.prototype.__vuex_proxy_cache__;var r=n.prototype.__namespacedPath__?n.prototype.__namespacedPath__+"/":"",o=l(e,t,r);return function(t,e,n){if(!t.prototype.__options__||!t.prototype.__options__.enableLocalWatchers)return;var r=t.$watch;if(void 0===r)return;var o=t.prototype.__explicit_getter_names__,c=t.name.toLowerCase(),l=function(l){var h=o.indexOf(l)>-1,f=r[l],d=function(e,n){return f.call(t.prototype.__vuex_proxy_cache__,e,n)};h?e.watch((function(){return(n?e.rootGetters:e.getters)[n+l]}),d):e.watch((function(){return(n?e.rootGetters:e.getters)[n+"__"+c+"_internal_getter__"](l)}),d)};for(var h in r)l(h)}(n,t,r||""),function(t,e,n){if(!t.prototype.__options__||!t.prototype.__options__.enableLocalWatchers)return;var r=t.$subscribe;if(void 0===r)return;e.subscribe((function(e,o){var c=function(o){var c,l=r[o];e.type===n+o&&(c=e.payload,l.call(t.prototype.__vuex_proxy_cache__,c))};for(var l in r)c(l)}))}(n,t,r||""),function(t,e,n){if(!t.prototype.__options__||!t.prototype.__options__.enableLocalWatchers)return;var r=t.$subscribeAction;if(void 0===r)return;var o=function(o){var c=r[o];if("function"==typeof c)return e.subscribeAction((function(e){if(e.type===n+o){r=e.payload,c.call(t.prototype.__vuex_proxy_cache__,r)}var r})),"continue";"object"==typeof c&&e.subscribeAction({before:function(e){if(e.type===n+o&&c.before){r=e.payload,c.before.call(t.prototype.__vuex_proxy_cache__,r)}var r},after:function(e){if(e.type===n+o&&c.after){r=e.payload,c.after.call(t.prototype.__vuex_proxy_cache__,r)}var r}})};for(var c in r)o(c)}(n,t,r||""),o.$watch=function(o,c,l){var h=n.prototype.__explicit_getter_names__;if("string"==typeof o&&h.indexOf(o)>-1)return t.watch((function(){return(r?t.rootGetters:t.getters)[r+o]}),c,l);var f=e.name.toLowerCase();return t.watch((function(){return(r?t.rootGetters:t.getters)[r+"__"+f+"_internal_getter__"](o)}),c,l)},o.$subscribe=function(e,n){return t.subscribe((function(t){t.type===r+e&&n(t.payload)}))},o.$subscribeAction=function(e,n){return"function"==typeof n?t.subscribeAction((function(t){t.type===r+e&&n(t.payload)})):"object"==typeof n?t.subscribeAction({before:function(t){t.type===r+e&&n.before(t.payload)},after:function(t){t.type===r+e&&n.after(t.payload)}}):void 0},void 0===n.prototype.__store_cache__&&(n.prototype.__store_cache__=t),n.prototype.__vuex_proxy_cache__=o,o}function l(t,e,n){void 0===n&&(n="");var l=t,h={},f=o.getClassPath(l.prototype.__namespacedPath__)||o.toCamelCase(l.name),d=r.extractVuexModule(l)[f],m=d.state,y=d.mutations,v=d.actions,w=d.getters,S=d.modules;return"function"==typeof m&&(m=m()),function t(e){var n=e.cls,r=e.proxy,c=e.state,l=e.$store,h=e.namespacedPath,f=void 0===h?"":h,d=e.currentField,m=void 0===d?"":d,y=e.maxDepth,v=void 0===y?1:y,w=n.name.toLowerCase();f=o.refineNamespacedPath(f);var S=n.prototype.__options__&&n.prototype.__options__.strict,x=Object.keys(n.prototype.__submodules_cache__),_=function(e){var h=x.indexOf(e)>-1,d=c[e];m.length&&!m.endsWith(".")&&(m+=".");var path=m+e;if(0===v||"object"!=typeof d||"object"==typeof d&&!h)return!S||h?Object.defineProperty(r,e,{get:function(){var t=n.prototype.__namespacedPath__?l.rootGetters:l.getters;return t?t[o.refineNamespacedPath(n.prototype.__namespacedPath__)+"__"+w+"_internal_getter__"](path):l["__"+w+"_internal_getter__"](path)},set:function(t){var e=l.commit||n.prototype.__store_cache__.commit;e?e(o.refineNamespacedPath(n.prototype.__namespacedPath__)+"__"+w+"_internal_mutator__",{field:path,payload:t},{root:!0}):n.prototype.__context_store__.commit("__"+w+"_internal_mutator__",{field:path,payload:t},{root:!0})}}):Object.defineProperty(r,e,{get:function(){return l.getters?l.getters[f+"__"+w+"_internal_getter__"](path):l["__"+w+"_internal_getter__"](path)}}),"continue";r[e]={},t({cls:n,proxy:r[e],state:d,$store:l,namespacedPath:f,currentField:m+e,maxDepth:v-1})};for(var T in c)_(T);return r}({cls:l,proxy:h,state:m,$store:e,namespacedPath:n}),function(t){var e=t.cls,n=t.getters,r=t.mutations,c=t.proxy,l=t.$store,h=t.namespacedPath,f=Object.keys(e.prototype.__mutations_cache__&&e.prototype.__mutations_cache__.__setter_mutations__||{}),d=e.name.toLowerCase();l&&l["__"+d+"_internal_getter__"]&&(l["__"+d+"_internal_mutator__"]=r["__"+d+"_internal_mutator__"]);h=o.refineNamespacedPath(h);var m=function(t){return void 0===l||c[t]?"continue":f.indexOf(t)>-1?(Object.defineProperty(c,t,{get:function(){var e=h?l.rootGetters:l.getters;return e?e[h+t]:l[h+t]},set:function(e){return l.commit(h+t,e,{root:!!h})}}),"continue"):Object.prototype.hasOwnProperty.call(c,t)?"continue":void Object.defineProperty(c,t,{get:function(){var e=h?l.rootGetters:l.getters;return e?e[h+t]:l[h+t]}})};for(var y in n)m(y)}({cls:l,mutations:y,getters:w,proxy:h,$store:e,namespacedPath:n}),function(t,e,n,r){var c=t.prototype.__mutations_cache__&&t.prototype.__mutations_cache__.__explicit_mutations__||{},l=t.prototype.__store_cache__?t.prototype.__store_cache__.commit:n.commit;r=o.refineNamespacedPath(t.prototype.__namespacedPath__.length?t.prototype.__namespacedPath__+"/":r);var h=function(t){e[t]=function(e){return l(r+t,e,{root:!0})}};for(var f in c)h(f)}(l,h,e,n),function(t){var e=t.cls,n=t.actions,r=t.proxy,c=t.$store,l=t.namespacedPath,h=e.prototype.__store_cache__?e.prototype.__store_cache__.dispatch:c.dispatch;l=o.refineNamespacedPath(e.prototype.__namespacedPath__.length?e.prototype.__namespacedPath__+"/":l);var f=function(t){r[t]=function(e){return h(l+t,e)}};for(var d in n)f(d)}({cls:l,actions:v,proxy:h,$store:e,namespacedPath:n}),function(t,e,n,o){var l=e.prototype.__store_cache__||t;for(var h in o){var f=e.prototype.__submodules_cache__[h],d=r.getNamespacedPath(f);f.prototype.__namespacedPath__=e.prototype.__namespacedPath__+"/"+d,n[h]=c(l,f)}}(e,l,h,S),h}e.clearProxyCache=function(t){},e.createProxy=c,e.createLocalProxy=function(t,e){var n=t;if(n.prototype.__vuex_local_proxy_cache__)return n.prototype.__vuex_local_proxy_cache__;var r=l(t,e,"");return n.prototype.__vuex_local_proxy_cache__=r,r},e._createProxy=l},,function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(219),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),c=Object.prototype.toString,l=Array.prototype.concat,h=Object.defineProperty,f=h&&function(){var t={};try{for(var e in h(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),d=function(object,t,e,n){var r;(!(t in object)||"function"==typeof(r=n)&&"[object Function]"===c.call(r)&&n())&&(f?h(object,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):object[t]=e)},m=function(object,map){var t=arguments.length>2?arguments[2]:{},e=r(map);o&&(e=l.call(e,Object.getOwnPropertySymbols(map)));for(var i=0;i<e.length;i+=1)d(object,e[i],map[e[i]],t[e[i]])};m.supportsDescriptors=!!f,t.exports=m},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";var r=n(221),o=n(131),c=n(132),l=n(242),h=n(75),f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=h("Array.prototype.concat"),v=h("Array.prototype.reduce"),w=m?function(t){return y(d(t),m(t))}:d,S=o(f)&&o(d);t.exports=function(t){if(c(t),!S)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var e=l(t);return v(w(e),(function(t,n){var o=f(e,n);return void 0!==o&&r(t,n,o),t}),{})}},function(t,e,n){"use strict";var r=n(13),o=r("%TypeError%"),c=r("%SyntaxError%"),l=n(58),h={"Property Descriptor":function(t,e){if("Object"!==t(e))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(l(e,r)&&!n[r])return!1;var c=l(e,"[[Value]]"),h=l(e,"[[Get]]")||l(e,"[[Set]]");if(c&&h)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}};t.exports=function(t,e,n,r){var l=h[e];if("function"!=typeof l)throw new c("unknown record type: "+e);if(!l(t,r))throw new o(n+" must be a "+e)}},function(t,e,n){"use strict";t.exports=function(t){return"string"==typeof t||"symbol"==typeof t}},function(t,e,n){"use strict";t.exports=function(t){return!!t}},function(t,e,n){"use strict";t.exports=n(235)},function(t,e,n){"use strict";t.exports=n(241)},function(t,e,n){"use strict";var r=n(127);t.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(244),o=n(135);function c(t,e,n){h(t),t.__actions__.push({__name__:e,__type__:"mutate"})}function l(t,e,n){h(t),t.__actions__.push({__name__:e,__type__:"raw"})}function h(t){void 0===t.__actions__&&(t.__actions__=[])}e.internalAction=function(t,e){},e.action=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];if(void 0===n)return c;if(n instanceof r.VuexModule||n instanceof o.LegacyVuexModule)return c(n,t[1],t[2]);switch(n.mode){case"raw":return l;case"mutate":return c;default:return c(n,t[1],t[2])}},e.getRawActionContext=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(74),o=n(100),c=n(99),l=n(76),h={namespacedPath:"",target:"core"};e.Module=function(t){var e=void 0===t?h:t,n=e.namespacedPath,o=void 0===n?"":n,c=e.target,l=void 0===c?"core":c;return function(t){var e=t;e.prototype.__options__={namespaced:o,target:"nuxt"===l?l:void 0};var n=r.createModule({target:e.prototype.__options__&&e.prototype.__options__.target,namespaced:e.prototype.__options__&&e.prototype.__options__.namespaced,strict:!0});for(var c in n.prototype)e.prototype[c]||(e.prototype[c]=n.prototype[c])}};var f=function(){function t(){}return t.ExtractVuexModule=function(t){var e=t;return r.extractVuexModule(e)[l.getClassPath(e.prototype.__namespacedPath__)||l.toCamelCase(e.name)]},t.CreateProxy=function(t,e){return o.createProxy(t,e)},t.CreateSubModule=function(t){return c.createSubModule(t)},t.ClearProxyCache=function(t){return o.clearProxyCache(t)},t}();e.LegacyVuexModule=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mutation=function(t,e,n){!function(t){var e=t;void 0===e.__explicit_mutations_names__&&(e.__explicit_mutations_names__=[]);void 0===e.__mutations_cache__&&(e.__mutations_cache__={__explicit_mutations__:{},__setter_mutations__:{}})}(t),t.__explicit_mutations_names__.push(e)},e.internalMutator=function(t,e){var n=e.field,r=e.payload,o=n.split(".");switch(o.length){case 1:t[o[0]]=r;break;case 2:t[o[0]][o[1]]=r;break;case 3:t[o[0]][o[1]][o[2]]=r;break;case 4:t[o[0]][o[1]][o[2]][o[3]]=r;break;case 5:t[o[0]][o[1]][o[2]][o[3]][o[4]]=r;break;case 6:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]]=r;break;case 7:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]]=r;break;case 8:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]][o[7]]=r;break;case 9:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]][o[7]][n[8]]=r;break;case 10:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]][o[7]][n[8]][n[9]]=r;break;case 11:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]][o[7]][n[8]][n[9]][n[10]]=r;break;case 12:t[o[0]][o[1]][o[2]][o[3]][o[4]][o[5]][o[6]][o[7]][n[8]][n[9]][n[10]][n[11]]=r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(247),c=n(138),l=n(139),h=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),f=new c.ErrorFactory("app","Firebase",h),d=[],m=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=c.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){d.push(t),setTimeout((function(){return t(null)}),0)},removeAuthTokenListener:function(t){d=d.filter((function(e){return e!==t}))}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var o=r[n],c=0,l=Object.keys(t.services_[o]);c<l.length;c++){var h=l[c];e.push(t.services_[o][h])}return Promise.all(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))})).then((function(){t.isDeleted_=!0,t.services_={}}))},t.prototype._getService=function(t,e){if(void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n="[DEFAULT]"!==e?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.services_[t]&&this.services_[t][e]&&delete this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;c.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(d.forEach((function(t){e.INTERNAL.addAuthTokenListener(t)})),d=[])},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw f.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var y=new l.Logger("@firebase/app");if(c.isBrowser()&&void 0!==self.firebase){y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=function t(){var e=function(t){var e={},n={},r={},o={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={});if("object"!=typeof r||null===r){r={name:r}}var l=r;void 0===l.name&&(l.name="[DEFAULT]");var h=l.name;if("string"!=typeof h||!h)throw f.create("bad-app-name",{appName:String(h)});if(c.contains(e,h))throw f.create("duplicate-app",{appName:h});var m=new t(n,l,o);return e[h]=m,d(m,"create"),m},app:l,apps:null,SDK_VERSION:"6.6.2",INTERNAL:{registerService:function(e,d,m,v,w){void 0===w&&(w=!1);if(n[e])return y.debug("There were multiple attempts to register service "+e+"."),o[e];n[e]=d,v&&(r[e]=v,h().forEach((function(t){v("create",t)})));function S(t){if(void 0===t&&(t=l()),"function"!=typeof t[e])throw f.create("invalid-app-argument",{appName:e});return t[e]()}void 0!==m&&c.deepExtend(S,m);return o[e]=S,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,w?t:[])},S},removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:m}};function l(t){if(t=t||"[DEFAULT]",!c.contains(e,t))throw f.create("no-app",{appName:t});return e[t]}function h(){return Object.keys(e).map((function(t){return e[t]}))}function d(t,e){for(var o=0,c=Object.keys(n);o<c.length;o++){var l=m(t,c[o]);if(null===l)return;r[l]&&r[l](e,t)}}function m(t,e){return"serverAuth"===e?null:e}return o.default=o,Object.defineProperty(o,"apps",{get:h}),l.App=t,o}(m);return e.INTERNAL=o.__assign({},e.INTERNAL,{createFirebaseNamespace:t,extendNamespace:function(t){c.deepExtend(e,t)},createSubscribe:c.createSubscribe,ErrorFactory:c.ErrorFactory,deepExtend:c.deepExtend}),e}(),S=w.initializeApp;w.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.isNode()&&y.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),S.apply(void 0,t)};var x=w;e.default=x,e.firebase=x},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(248),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw l(e)},l=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},h=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,l=c?input[i+2]:0,h=n>>2,f=(3&n)<<4|o>>4,d=(15&o)<<2|l>>6,m=63&l;c||(m=64,r||(d=64)),output.push(e[h],e[f],e[d],e[m])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(h(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(l=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var l=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var l=n<<2|r>>4;if(output.push(l),64!==o){var h=r<<4&240|o>>2;if(output.push(h),64!==c){var f=o<<6&192|c;output.push(f)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},d=function(t){try{return f.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=m(t[e],source[e]));return t}var y=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,S.prototype.create),r}return r.__extends(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?x(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new w(n,o),l=0,h=Object.keys(e);l<h.length;l++){var f=h[l];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=e[f])}return c},t}();function x(template,data){return template.replace(_,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var _=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}var E=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=T(d(r[0])||""),e=T(d(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var I=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],l=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^b&(l^h),c=1518500249):(o=b^l^h,c=1859775393):i<60?(o=b&l|h&(b|l),c=2400959708):(o=b^l^h,c=3395469782);r=(a<<5|a>>>27)+o+f+c+n[i]&4294967295;f=h,h=l,l=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function C(){}function k(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=y,e.ErrorFactory=S,e.FirebaseError=w,e.Sha1=I,e.assert=c,e.assertionError=l,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=f,e.base64Decode=d,e.base64Encode=function(t){var e=h(t);return f.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new A(t,e);return n.subscribe.bind(n)},e.decode=E,e.deepCopy=function(t){return m(void 0,t)},e.deepExtend=m,e.errorPrefix=k,e.getUA=v,e.isAdmin=function(t){var e=E(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=E(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=E(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=E(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=T,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(k(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(k(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(k(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(21))},function(t,e,n){"use strict";n.r(e),n.d(e,"LogLevel",(function(){return r})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f}));var r,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));var c=r.INFO,l=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var c=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+c+"]  "+t.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+c+"]  "+t.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+c+"]  "+t.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+c+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.ERROR].concat(t))},t}();function f(t){o.forEach((function(e){e.logLevel=t}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(253);e.EmailJSResponseStatus=r.EmailJSResponseStatus;var o=n(254),c=null,l="https://api.emailjs.com";function h(t,data,e){return void 0===e&&(e={}),new Promise((function(n,o){var c=new XMLHttpRequest;for(var l in c.addEventListener("load",(function(t){var e=new r.EmailJSResponseStatus(t.target);200===e.status||"OK"===e.text?n(e):o(e)})),c.addEventListener("error",(function(t){o(new r.EmailJSResponseStatus(t.target))})),c.open("POST",t,!0),e)c.setRequestHeader(l,e[l]);c.send(data)}))}function f(t){var element=document.getElementById("g-recaptcha-response");return element&&element.value&&(t["g-recaptcha-response"]=element.value),element=null,t}function d(t,e){c=t,l=e||"https://api.emailjs.com"}function m(t,e,n,r){var o={lib_version:"2.4.1",user_id:r||c,service_id:t,template_id:e,template_params:f(n)};return h(l+"/api/v1.0/email/send",JSON.stringify(o),{"Content-type":"application/json"})}function y(t,e,form,n){if("string"==typeof form&&(form=document.querySelector(form)),!form||"FORM"!==form.nodeName)throw"Expected the HTML form element or the style selector of form";o.UI.progressState(form);var r=new FormData(form);return r.append("lib_version","2.4.1"),r.append("service_id",t),r.append("template_id",e),r.append("user_id",n||c),h(l+"/api/v1.0/email/send-form",r).then((function(t){return o.UI.successState(form),t}),(function(t){return o.UI.errorState(form),Promise.reject(t)}))}e.init=d,e.send=m,e.sendForm=y,e.default={init:d,send:m,sendForm:y}},function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},,function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?m((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function l(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function h(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function f(object,t){try{return t in object}catch(t){return!1}}function d(t,source,e){var n={};return e.isMergeableObject(t)&&h(t).forEach((function(r){n[r]=c(t[r],e)})),h(source).forEach((function(r){(function(t,e){return f(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(f(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return m;var n=e.customMerge(t);return"function"==typeof n?n:m}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function m(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||l,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):d(t,source,e):c(source,e)}m.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return m(t,n,e)}),{})};var y=m;t.exports=y},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return v}));var o="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",h=null,f=function(t){return null!==h?h:h=new Promise((function(e,n){if("undefined"!=typeof window)if(window.Stripe&&t&&console.warn(l),window.Stripe)e(window.Stripe);else try{var script=function(){for(var t=document.querySelectorAll('script[src^="'.concat(o,'"]')),i=0;i<t.length;i++){var script=t[i];if(c.test(script.src))return script}return null}();script&&t?console.warn(l):script||(script=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(o).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(script),script}(t)),script.addEventListener("load",(function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))})),script.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(t){return void n(t)}else e(null)}))},d=function(t,e){if(null===t)return null;var n=t.apply(void 0,r(e));return function(t){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.8.0"})}(n),n},m=Promise.resolve().then((function(){return f(null)})),y=!1;m.catch((function(t){y||console.warn(t)}));var v=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y=!0,m.then((function(t){return d(t,e)}))}},function(t,e,n){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=6)}([function(t,e,n){"use strict";function r(){l=!1}function i(t){if(t){if(t!==c){if(t.length!==f.length)throw new Error("Custom alphabet for shortid must be "+f.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+f.length+" unique characters. These characters were not unique: "+e.join(", "));c=t,r()}}else c!==f&&(c=f,r())}function o(){return l||(l=function(){c||i(f);for(var t,e=c.split(""),n=[],r=h.nextValue();e.length>0;)r=h.nextValue(),t=Math.floor(r*e.length),n.push(e.splice(t,1)[0]);return n.join("")}())}var c,p,l,h=n(19),f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";t.exports={get:function(){return c||f},characters:function(t){return i(t),c},seed:function(t){h.seed(t),p!==t&&(r(),p=t)},lookup:function(t){return o()[t]},shuffled:o}},function(t,e,n){"use strict";var r=n(5),i=n.n(r);e.a={animateIn:function(t){i()({targets:t,translateY:"-35px",opacity:1,duration:300,easing:"easeOutCubic"})},animateOut:function(t,e){i()({targets:t,opacity:0,marginTop:"-40px",duration:300,easing:"easeOutExpo",complete:e})},animateOutBottom:function(t,e){i()({targets:t,opacity:0,marginBottom:"-40px",duration:300,easing:"easeOutExpo",complete:e})},animateReset:function(t){i()({targets:t,left:0,opacity:1,duration:300,easing:"easeOutExpo"})},animatePanning:function(t,e,n){i()({targets:t,duration:10,easing:"easeOutQuad",left:e,opacity:n})},animatePanEnd:function(t,e){i()({targets:t,opacity:0,duration:300,easing:"easeOutExpo",complete:e})},clearAnimation:function(t){var e=i.a.timeline();t.forEach((function(t){e.add({targets:t.el,opacity:0,right:"-40px",duration:300,offset:"-=150",easing:"easeOutExpo",complete:function(){t.remove()}})}))}}},function(t,e,n){"use strict";t.exports=n(16)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(8),i=n(1),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(2);n(11).polyfill();var s=function t(e){var n=this;return this.id=a.generate(),this.options=e,this.cached_options={},this.global={},this.groups=[],this.toasts=[],this.container=null,l(this),u(this),this.group=function(e){e||(e={}),e.globalToasts||(e.globalToasts={}),Object.assign(e.globalToasts,n.global);var r=new t(e);return n.groups.push(r),r},this.register=function(t,e,r){return h(n,t,e,r=r||{})},this.show=function(t,e){return c(n,t,e)},this.success=function(t,e){return(e=e||{}).type="success",c(n,t,e)},this.info=function(t,e){return(e=e||{}).type="info",c(n,t,e)},this.error=function(t,e){return(e=e||{}).type="error",c(n,t,e)},this.remove=function(t){n.toasts=n.toasts.filter((function(e){return e.el.hash!==t.hash})),t.parentNode&&t.parentNode.removeChild(t)},this.clear=function(t){return i.a.clearAnimation(n.toasts,(function(){t&&t()})),n.toasts=[],!0},this},c=function(t,e,i){var a;if("object"!==(void 0===(i=i||{})?"undefined":o(i)))return console.error("Options should be a type of object. given : "+i),null;t.options.singleton&&t.toasts.length>0&&(t.cached_options=i,t.toasts[t.toasts.length-1].goAway(0));var s=Object.assign({},t.options);return Object.assign(s,i),a=n.i(r.a)(t,e,s),t.toasts.push(a),a},u=function(t){var e=t.options.globalToasts,n=function(e,n){return"string"==typeof n&&t[n]?t[n].apply(t,[e,{}]):c(t,e,n)};e&&(t.global={},Object.keys(e).forEach((function(r){t.global[r]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[r].apply(null,[t,n])}})))},l=function(t){var e=document.createElement("div");e.id=t.id,e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","false"),document.body.appendChild(e),t.container=e},h=function(t,e,n,r){t.options.globalToasts||(t.options.globalToasts={}),t.options.globalToasts[e]=function(t,e){var i=null;return"string"==typeof n&&(i=n),"function"==typeof n&&(i=n(t)),e(i,r)},u(t)}},function(t,e,n){n(22);var r=n(21)(null,null,null,null);t.exports=r.exports},function(t,e,n){(function(n){var r,i,o,a={scope:{}};a.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},a.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==n&&null!=n?n:t},a.global=a.getGlobal(this),a.SYMBOL_PREFIX="jscomp_symbol_",a.initSymbol=function(){a.initSymbol=function(){},a.global.Symbol||(a.global.Symbol=a.Symbol)},a.symbolCounter_=0,a.Symbol=function(t){return a.SYMBOL_PREFIX+(t||"")+a.symbolCounter_++},a.initSymbolIterator=function(){a.initSymbol();var t=a.global.Symbol.iterator;t||(t=a.global.Symbol.iterator=a.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&a.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return a.arrayIterator(this)}}),a.initSymbolIterator=function(){}},a.arrayIterator=function(t){var e=0;return a.iteratorPrototype((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))},a.iteratorPrototype=function(t){return a.initSymbolIterator(),(t={next:t})[a.global.Symbol.iterator]=function(){return this},t},a.array=a.array||{},a.iteratorFromArray=function(t,e){a.initSymbolIterator(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},a.polyfill=function(t,e,n,r){if(e){for(n=a.global,t=t.split("."),r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&a.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},a.polyfill("Array.prototype.keys",(function(t){return t||function(){return a.iteratorFromArray(this,(function(t){return t}))}}),"es6-impl","es3");var s=this;i=[],r=function(){function t(t){if(!R.col(t))try{return document.querySelectorAll(t)}catch(t){}}function e(t,e){for(var n=t.length,r=2<=arguments.length?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in t){var a=t[o];e.call(r,a,o,t)&&i.push(a)}return i}function n(t){return t.reduce((function(t,e){return t.concat(R.arr(e)?n(e):e)}),[])}function r(e){return R.arr(e)?e:(R.str(e)&&(e=t(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function i(t,e){return t.some((function(t){return t===e}))}function o(t){var e,n={};for(e in t)n[e]=t[e];return n}function a(t,e){var n,r=o(t);for(n in t)r[n]=e.hasOwnProperty(n)?e[n]:t[n];return r}function c(t,e){var n,r=o(t);for(n in e)r[n]=R.und(t[n])?e[n]:t[n];return r}function l(t){if(t=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t))return t[2]}function h(t,e){return R.fnc(t)?t(e.target,e.id,e.total):t}function f(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function d(t,e){return R.dom(t)&&i(O,e)?"transform":R.dom(t)&&(t.getAttribute(e)||R.svg(t)&&t[e])?"attribute":R.dom(t)&&"transform"!==e&&f(t,e)?"css":null!=t[e]?"object":void 0}function m(t,n){var r=function(t){return-1<t.indexOf("translate")||"perspective"===t?"px":-1<t.indexOf("rotate")||-1<t.indexOf("skew")?"deg":void 0}(n);if(r=-1<n.indexOf("scale")?1:0+r,!(t=t.style.transform))return r;for(var i=[],o=[],a=[],s=/(\w+)\((.+?)\)/g;i=s.exec(t);)o.push(i[1]),a.push(i[2]);return(t=e(a,(function(t,e){return o[e]===n}))).length?t[0]:r}function g(t,e){switch(d(t,e)){case"transform":return m(t,e);case"css":return f(t,e);case"attribute":return t.getAttribute(e)}return t[e]||0}function y(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var r=l(t)||0;switch(e=parseFloat(e),t=parseFloat(t.replace(n[0],"")),n[0][0]){case"+":return e+t+r;case"-":return e-t+r;case"*":return e*t+r}}function b(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function v(t){t=t.points;for(var e,n=0,r=0;r<t.numberOfItems;r++){var i=t.getItem(r);0<r&&(n+=b(e,i)),e=i}return n}function w(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return 2*Math.PI*t.getAttribute("r");case"rect":return 2*t.getAttribute("width")+2*t.getAttribute("height");case"line":return b({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")});case"polyline":return v(t);case"polygon":var e=t.points;return v(t)+b(e.getItem(e.numberOfItems-1),e.getItem(0))}}function S(t,e){function n(n){return n=void 0===n?0:n,t.el.getPointAtLength(1<=e+n?e+n:0)}var r=n(),i=n(-1),o=n(1);switch(t.property){case"x":return r.x;case"y":return r.y;case"angle":return 180*Math.atan2(o.y-i.y,o.x-i.x)/Math.PI}}function x(t,e){var n,r=/-?\d*\.?\d+/g;if(n=R.pth(t)?t.totalLength:t,R.col(n))if(R.rgb(n)){var i=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=i?"rgba("+i[1]+",1)":n}else n=R.hex(n)?function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+(t=parseInt(e[1],16))+","+parseInt(e[2],16)+","+(e=parseInt(e[3],16))+",1)"}(n):R.hsl(n)?function(t){function e(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t);t=parseInt(n[1])/360;var r=parseInt(n[2])/100,i=parseInt(n[3])/100;if(n=n[4]||1,0==r)i=r=t=i;else{var o=.5>i?i*(1+r):i+r-i*r,a=2*i-o;i=e(a,o,t+1/3),r=e(a,o,t),t=e(a,o,t-1/3)}return"rgba("+255*i+","+255*r+","+255*t+","+n+")"}(n):void 0;else i=(i=l(n))?n.substr(0,n.length-i.length):n,n=e&&!/\s/g.test(n)?i+e:i;return{original:n+="",numbers:n.match(r)?n.match(r).map(Number):[0],strings:R.str(t)||e?n.split(r):[]}}function _(t){return e(t=t?n(R.arr(t)?t.map(r):r(t)):[],(function(t,e,n){return n.indexOf(t)===e}))}function T(t,e){var n=o(e);if(R.arr(t)){var i=t.length;2!==i||R.obj(t[0])?R.fnc(e.duration)||(n.duration=e.duration/i):t={value:t}}return r(t).map((function(t,n){return n=n?0:e.delay,t=R.obj(t)&&!R.pth(t)?t:{value:t},R.und(t.delay)&&(t.delay=n),t})).map((function(t){return c(t,n)}))}function E(t,e){var n;return t.tweens.map((function(r){var i=(r=function(t,e){var n,r={};for(n in t){var i=h(t[n],e);R.arr(i)&&1===(i=i.map((function(t){return h(t,e)}))).length&&(i=i[0]),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(r,e)).value,o=g(e.target,t.name),a=n?n.to.original:o,s=(a=R.arr(i)?i[0]:a,y(R.arr(i)?i[1]:i,a));return o=l(s)||l(a)||l(o),r.from=x(a,o),r.to=x(s,o),r.start=n?n.end:t.offset,r.end=r.start+r.delay+r.duration,r.easing=function(t){return R.arr(t)?P.apply(this,t):L[t]}(r.easing),r.elasticity=(1e3-Math.min(Math.max(r.elasticity,1),999))/1e3,r.isPath=R.pth(i),r.isColor=R.col(r.from.original),r.isColor&&(r.round=1),n=r}))}function I(t,r){return e(n(t.map((function(t){return r.map((function(e){var n=d(t.target,e.name);if(n){var r=E(e,t);e={type:n,property:e.name,animatable:t,tweens:r,duration:r[r.length-1].end,delay:r[0].delay}}else e=void 0;return e}))}))),(function(t){return!R.und(t)}))}function A(t,e,n,r){var i="delay"===t;return e.length?(i?Math.min:Math.max).apply(Math,e.map((function(e){return e[t]}))):i?r.delay:n.offset+r.delay+r.duration}function C(t){var e,n=a(D,t),r=a(M,t),i=function(t){var e=_(t);return e.map((function(t,n){return{target:t,id:n,total:e.length}}))}(t.targets),o=[],s=c(n,r);for(e in t)s.hasOwnProperty(e)||"targets"===e||o.push({name:e,offset:s.offset,tweens:T(t[e],r)});return c(n,{children:[],animatables:i,animations:t=I(i,o),duration:A("duration",t,n,r),delay:A("delay",t,n,r)})}function k(t){function n(){return window.Promise&&new Promise((function(t){return h=t}))}function r(t){return d.reversed?d.duration-t:t}function i(t){for(var n=0,r={},i=d.animations,o=i.length;n<o;){var a=i[n],s=a.animatable,c=(l=a.tweens)[u=l.length-1];u&&(c=e(l,(function(e){return t<e.end}))[0]||c);for(var l=Math.min(Math.max(t-c.start-c.delay,0),c.duration)/c.duration,h=isNaN(l)?1:c.easing(l,c.elasticity),p=(l=c.to.strings,c.round),u=[],m=void 0,y=(m=c.to.numbers.length,0);y<m;y++){var g=void 0,v=(g=c.to.numbers[y],c.from.numbers[y]);g=c.isPath?S(c.value,h*g):v+h*(g-v),p&&(c.isColor&&2<y||(g=Math.round(g*p)/p)),u.push(g)}if(c=l.length)for(m=l[0],h=0;h<c;h++)p=l[h+1],y=u[h],isNaN(y)||(m=p?m+(y+p):m+(y+" "));else m=u[0];B[a.type](s.target,a.property,m,r,s.id),a.currentValue=m,n++}if(n=Object.keys(r).length)for(i=0;i<n;i++)N||(N=f(document.body,"transform")?"transform":"-webkit-transform"),d.animatables[i].target.style[N]=r[i].join(" ");d.currentTime=t,d.progress=t/d.duration*100}function o(t){d[t]&&d[t](d)}function a(){d.remaining&&!0!==d.remaining&&d.remaining--}function s(t){var e=d.duration,s=d.offset,f=s+d.delay,m=d.currentTime,y=d.reversed,g=r(t);if(d.children.length){var v=d.children,b=v.length;if(g>=d.currentTime)for(var w=0;w<b;w++)v[w].seek(g);else for(;b--;)v[b].seek(g)}(g>=f||!e)&&(d.began||(d.began=!0,o("begin")),o("run")),g>s&&g<e?i(g):(g<=s&&0!==m&&(i(0),y&&a()),(g>=e&&m!==e||!e)&&(i(e),y||a())),o("update"),t>=e&&(d.remaining?(u=c,"alternate"===d.direction&&(d.reversed=!d.reversed)):(d.pause(),d.completed||(d.completed=!0,o("complete"),"Promise"in window&&(h(),p=n()))),l=0)}t=void 0===t?{}:t;var c,u,l=0,h=null,p=n(),d=C(t);return d.reset=function(){var t=d.direction,e=d.loop;for(d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.completed=!1,d.reversed="reverse"===t,d.remaining="alternate"===t&&1===e?2:e,i(0),t=d.children.length;t--;)d.children[t].reset()},d.tick=function(t){c=t,u||(u=c),s((l+c-u)*k.speed)},d.seek=function(t){s(r(t))},d.pause=function(){var t=F.indexOf(d);-1<t&&F.splice(t,1),d.paused=!0},d.play=function(){d.paused&&(d.paused=!1,u=0,l=r(d.currentTime),F.push(d),q||z())},d.reverse=function(){d.reversed=!d.reversed,u=0,l=r(d.currentTime)},d.restart=function(){d.pause(),d.reset(),d.play()},d.finished=p,d.reset(),d.autoplay&&d.play(),d}var N,D={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},M={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},O="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),R={arr:function(t){return Array.isArray(t)},obj:function(t){return-1<Object.prototype.toString.call(t).indexOf("Object")},pth:function(t){return R.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||R.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return R.hex(t)||R.rgb(t)||R.hsl(t)}},P=function(){function t(t,e,n){return(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t}return function(e,n,r,i){if(0<=e&&1>=e&&0<=r&&1>=r){var o=new Float32Array(11);if(e!==n||r!==i)for(var a=0;11>a;++a)o[a]=t(.1*a,e,r);return function(a){if(e===n&&r===i)return a;if(0===a)return 0;if(1===a)return 1;for(var s=0,c=1;10!==c&&o[c]<=a;++c)s+=.1;--c,c=s+(a-o[c])/(o[c+1]-o[c])*.1;var u=3*(1-3*r+3*e)*c*c+2*(3*r-6*e)*c+3*e;if(.001<=u){for(s=0;4>s&&0!=(u=3*(1-3*r+3*e)*c*c+2*(3*r-6*e)*c+3*e);++s){var l=t(c,e,r)-a;c-=l/u}a=c}else if(0===u)a=c;else{c=s,s+=.1;var h=0;do{0<(u=t(l=c+(s-c)/2,e,r)-a)?s=l:c=l}while(1e-7<Math.abs(u)&&10>++h);a=l}return t(a,n,i)}}}}(),L=function(){function t(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin(2*(t-1-e/(2*Math.PI)*Math.asin(1))*Math.PI/e)}var e,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),r={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],t],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,n){return 1-t(1-e,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,n){return.5>e?t(2*e,n)/2:1-t(-2*e+2,n)/2}]},i={linear:P(.25,.25,.75,.75)},o={};for(e in r)o.type=e,r[o.type].forEach(function(t){return function(e,r){i["ease"+t.type+n[r]]=R.fnc(e)?e:P.apply(s,e)}}(o)),o={type:o.type};return i}(),B={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,r,i){r[i]||(r[i]=[]),r[i].push(e+"("+n+")")}},F=[],q=0,z=function(){function t(){q=requestAnimationFrame(e)}function e(e){var n=F.length;if(n){for(var r=0;r<n;)F[r]&&F[r].tick(e),r++;t()}else cancelAnimationFrame(q),q=0}return t}();return k.version="2.2.0",k.speed=1,k.running=F,k.remove=function(t){t=_(t);for(var e=F.length;e--;)for(var n=F[e],r=n.animations,o=r.length;o--;)i(t,r[o].animatable.target)&&(r.splice(o,1),r.length||n.pause())},k.getValue=g,k.path=function(e,n){var r=R.str(e)?t(e)[0]:e,i=n||100;return function(t){return{el:r,property:t,totalLength:w(r)*(i/100)}}},k.setDashoffset=function(t){var e=w(t);return t.setAttribute("stroke-dasharray",e),e},k.bezier=P,k.easings=L,k.timeline=function(t){var e=k(t);return e.pause(),e.duration=0,e.add=function(n){return e.children.forEach((function(t){t.began=!0,t.completed=!0})),r(n).forEach((function(n){var r=c(n,a(M,t||{}));r.targets=r.targets||t.targets,n=e.duration;var i=r.offset;r.autoplay=!1,r.direction=e.direction,r.offset=R.und(i)?n:y(i,n),e.began=!0,e.completed=!0,e.seek(r.offset),(r=k(r)).began=!0,r.completed=!0,r.duration>n&&(e.duration=r.duration),e.children.push(r)})),e.seek(0),e.reset(),e.autoplay&&e.restart(),e},e},k.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},k},void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}).call(e,n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(4),o=n.n(i),a={install:function(t,e){e||(e={});var n=new r.a(e);t.component("toasted",o.a),t.toasted=t.prototype.$toasted=n}};"undefined"!=typeof window&&window.Vue&&(window.Toasted=a),e.default=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n){return setTimeout((function(){n.cached_options.position&&n.cached_options.position.includes("bottom")?r.a.animateOutBottom(t,(function(){n.remove(t)})):r.a.animateOut(t,(function(){n.remove(t)}))}),e),!0},c=function(t,e){var n=!1;return{el:t,text:function(e){return function(t,e){("object"===("undefined"==typeof HTMLElement?"undefined":o(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":o(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)?t.appendChild(e):t.innerHTML=e}(t,e),this},goAway:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return n=!0,a(t,r,e)},remove:function(){e.remove(t)},disposed:function(){return n}}}},function(t,e,n){"use strict";var r=n(12),i=n.n(r),o=n(1),a=n(7),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(2);String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}});var u={},l=null,h=function(t){return t.className=t.className||null,t.onComplete=t.onComplete||null,t.position=t.position||"top-right",t.duration=t.duration||null,t.keepOnHover=t.keepOnHover||!1,t.theme=t.theme||"toasted-primary",t.type=t.type||"default",t.containerClass=t.containerClass||null,t.fullWidth=t.fullWidth||!1,t.icon=t.icon||null,t.action=t.action||null,t.fitToScreen=t.fitToScreen||null,t.closeOnSwipe=void 0===t.closeOnSwipe||t.closeOnSwipe,t.iconPack=t.iconPack||"material",t.className&&"string"==typeof t.className&&(t.className=t.className.split(" ")),t.className||(t.className=[]),t.theme&&t.className.push(t.theme.trim()),t.type&&t.className.push(t.type),t.containerClass&&"string"==typeof t.containerClass&&(t.containerClass=t.containerClass.split(" ")),t.containerClass||(t.containerClass=[]),t.position&&t.containerClass.push(t.position.trim()),t.fullWidth&&t.containerClass.push("full-width"),t.fitToScreen&&t.containerClass.push("fit-to-screen"),u=t,t},p=function(t,e){var r=document.createElement("div");if(r.classList.add("toasted"),r.hash=c.generate(),e.className&&e.className.forEach((function(t){r.classList.add(t)})),("object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":s(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)?r.appendChild(t):r.innerHTML=t,f(e,r),e.closeOnSwipe){var u=new i.a(r,{prevent_default:!1});u.on("pan",(function(t){var e=t.deltaX;r.classList.contains("panning")||r.classList.add("panning");var n=1-Math.abs(e/80);n<0&&(n=0),o.a.animatePanning(r,e,n)})),u.on("panend",(function(t){var n=t.deltaX;Math.abs(n)>80?o.a.animatePanEnd(r,(function(){"function"==typeof e.onComplete&&e.onComplete(),r.parentNode&&l.remove(r)})):(r.classList.remove("panning"),o.a.animateReset(r))}))}if(Array.isArray(e.action))e.action.forEach((function(t){var e=m(t,n.i(a.a)(r,l));e&&r.appendChild(e)}));else if("object"===s(e.action)){var h=m(e.action,n.i(a.a)(r,l));h&&r.appendChild(h)}return r},f=function(t,e){if(t.icon){var n=document.createElement("i");switch(n.setAttribute("aria-hidden","true"),t.iconPack){case"fontawesome":n.classList.add("fa");var r=t.icon.name?t.icon.name:t.icon;r.includes("fa-")?n.classList.add(r.trim()):n.classList.add("fa-"+r.trim());break;case"mdi":n.classList.add("mdi");var i=t.icon.name?t.icon.name:t.icon;i.includes("mdi-")?n.classList.add(i.trim()):n.classList.add("mdi-"+i.trim());break;case"custom-class":var o=t.icon.name?t.icon.name:t.icon;"string"==typeof o?o.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(o)&&o.forEach((function(t){n.classList.add(t.trim())}));break;case"callback":var a=t.icon&&t.icon instanceof Function?t.icon:null;a&&(n=a(n));break;default:n.classList.add("material-icons"),n.textContent=t.icon.name?t.icon.name:t.icon}t.icon.after&&n.classList.add("after"),d(t,n,e)}},d=function(t,e,n){t.icon&&(t.icon.after&&t.icon.name?n.appendChild(e):(t.icon.name,n.insertBefore(e,n.firstChild)))},m=function(t,e){if(!t)return null;var n=document.createElement("a");if(n.classList.add("action"),n.classList.add("ripple"),t.text&&(n.text=t.text),t.href&&(n.href=t.href),t.target&&(n.target=t.target),t.icon){n.classList.add("icon");var r=document.createElement("i");switch(u.iconPack){case"fontawesome":r.classList.add("fa"),t.icon.includes("fa-")?r.classList.add(t.icon.trim()):r.classList.add("fa-"+t.icon.trim());break;case"mdi":r.classList.add("mdi"),t.icon.includes("mdi-")?r.classList.add(t.icon.trim()):r.classList.add("mdi-"+t.icon.trim());break;case"custom-class":"string"==typeof t.icon?t.icon.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(t.icon)&&t.icon.forEach((function(t){n.classList.add(t.trim())}));break;default:r.classList.add("material-icons"),r.textContent=t.icon}n.appendChild(r)}return t.class&&("string"==typeof t.class?t.class.split(" ").forEach((function(t){n.classList.add(t)})):Array.isArray(t.class)&&t.class.forEach((function(t){n.classList.add(t.trim())}))),t.push&&n.addEventListener("click",(function(n){n.preventDefault(),u.router?(u.router.push(t.push),t.push.dontClose||e.goAway(0)):console.warn("[vue-toasted] : Vue Router instance is not attached. please check the docs")})),t.onClick&&"function"==typeof t.onClick&&n.addEventListener("click",(function(n){t.onClick&&(n.preventDefault(),t.onClick(n,e))})),n};e.a=function(t,e,r){l=t,r=h(r);var i=l.container;r.containerClass.unshift("toasted-container"),i.className!==r.containerClass.join(" ")&&(i.className="",r.containerClass.forEach((function(t){i.classList.add(t)})));var s=p(e,r);e&&i.appendChild(s),s.style.opacity=0,o.a.animateIn(s);var c=r.duration,u=void 0;if(null!==c){var f=function(){return setInterval((function(){null===s.parentNode&&window.clearInterval(u),s.classList.contains("panning")||(c-=20),c<=0&&(o.a.animateOut(s,(function(){"function"==typeof r.onComplete&&r.onComplete(),s.parentNode&&l.remove(s)})),window.clearInterval(u))}),20)};u=f(),r.keepOnHover&&(s.addEventListener("mouseover",(function(){window.clearInterval(u)})),s.addEventListener("mouseout",(function(){u=f()})))}return n.i(a.a)(s,l)}},function(t,e,n){(t.exports=n(10)()).push([t.i,".toasted{padding:0 20px}.toasted.rounded{border-radius:24px}.toasted .primary,.toasted.toasted-primary{border-radius:2px;min-height:38px;line-height:1.1em;background-color:#353535;padding:6px 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted .primary.success,.toasted.toasted-primary.success{background:#4caf50}.toasted .primary.error,.toasted.toasted-primary.error{background:#f44336}.toasted .primary.info,.toasted.toasted-primary.info{background:#3f51b5}.toasted .primary .action,.toasted.toasted-primary .action{color:#a1c2fa}.toasted.bubble{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#ff7043;padding:0 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted.bubble.success{background:#4caf50}.toasted.bubble.error{background:#f44336}.toasted.bubble.info{background:#3f51b5}.toasted.bubble .action{color:#8e2b0c}.toasted.outline{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#fff;border:1px solid #676767;padding:0 20px;font-size:15px;color:#676767;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);font-weight:700}.toasted.outline.success{color:#4caf50;border-color:#4caf50}.toasted.outline.error{color:#f44336;border-color:#f44336}.toasted.outline.info{color:#3f51b5;border-color:#3f51b5}.toasted.outline .action{color:#607d8b}.toasted-container{position:fixed;z-index:10000}.toasted-container,.toasted-container.full-width{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.toasted-container.full-width{max-width:86%;width:100%}.toasted-container.full-width.fit-to-screen{min-width:100%}.toasted-container.full-width.fit-to-screen .toasted:first-child{margin-top:0}.toasted-container.full-width.fit-to-screen.top-right{top:0;right:0}.toasted-container.full-width.fit-to-screen.top-left{top:0;left:0}.toasted-container.full-width.fit-to-screen.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.full-width.fit-to-screen.bottom-right{right:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-left{left:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.top-right{top:10%;right:7%}.toasted-container.top-left{top:10%;left:7%}.toasted-container.top-center{top:10%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.toasted-container.bottom-right{right:5%;bottom:7%}.toasted-container.bottom-left{left:5%;bottom:7%}.toasted-container.bottom-center{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:7%}.toasted-container.bottom-left .toasted,.toasted-container.top-left .toasted{float:left}.toasted-container.bottom-right .toasted,.toasted-container.top-right .toasted{float:right}.toasted-container .toasted{top:35px;width:auto;clear:both;margin-top:10px;position:relative;max-width:100%;height:auto;word-break:normal;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;box-sizing:inherit}.toasted-container .toasted .fa,.toasted-container .toasted .fab,.toasted-container .toasted .far,.toasted-container .toasted .fas,.toasted-container .toasted .material-icons,.toasted-container .toasted .mdi{margin-right:.5rem;margin-left:-.4rem}.toasted-container .toasted .fa.after,.toasted-container .toasted .fab.after,.toasted-container .toasted .far.after,.toasted-container .toasted .fas.after,.toasted-container .toasted .material-icons.after,.toasted-container .toasted .mdi.after{margin-left:.5rem;margin-right:-.4rem}.toasted-container .toasted .action{text-decoration:none;font-size:.8rem;padding:8px;margin:5px -7px 5px 7px;border-radius:3px;text-transform:uppercase;letter-spacing:.03em;font-weight:600;cursor:pointer}.toasted-container .toasted .action.icon{padding:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.toasted-container .toasted .action.icon .fa,.toasted-container .toasted .action.icon .material-icons,.toasted-container .toasted .action.icon .mdi{margin-right:0;margin-left:4px}.toasted-container .toasted .action.icon:hover{text-decoration:none}.toasted-container .toasted .action:hover{text-decoration:underline}@media only screen and (max-width:600px){.toasted-container{min-width:100%}.toasted-container .toasted:first-child{margin-top:0}.toasted-container.top-right{top:0;right:0}.toasted-container.top-left{top:0;left:0}.toasted-container.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-right{right:0;bottom:0}.toasted-container.bottom-left{left:0;bottom:0}.toasted-container.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-center,.toasted-container.top-center{-ms-flex-align:stretch!important;align-items:stretch!important}.toasted-container.bottom-left .toasted,.toasted-container.bottom-right .toasted,.toasted-container.top-left .toasted,.toasted-container.top-right .toasted{float:none}.toasted-container .toasted{border-radius:0}}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){"use strict";function r(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],u=Object.getOwnPropertyDescriptor(i,c);void 0!==u&&u.enumerable&&(n[c]=i[c])}}return n}t.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(t,e,n){var r;!function(i,o,a,s){"use strict";function c(t,e,n){return setTimeout(f(t,n),e)}function u(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function h(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function p(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&at(r,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==ct?t.apply(e&&e[0]||s,e):t}function m(t,e){return t===s?e:t}function y(t,e,n){l(w(e),(function(e){t.addEventListener(e,n,!1)}))}function g(t,e,n){l(w(e),(function(e){t.removeEventListener(e,n,!1)}))}function v(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function b(t,e){return t.indexOf(e)>-1}function w(t){return t.trim().split(/\s+/g)}function S(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function x(t){return Array.prototype.slice.call(t,0)}function _(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];S(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function T(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<st.length;){if((r=(n=st[o])?n+i:e)in t)return r;o++}return s}function E(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function I(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function A(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&St&&r-i==0,a=e&(_t|Tt)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=k(e)),i>1&&!n.firstMultiple?n.firstMultiple=k(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=e.center=N(r);e.timeStamp=ft(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=R(s,c),e.distance=O(s,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==St&&o.eventType!==_t||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=M(e.deltaX,e.deltaY);var u=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=ht(u.x)>ht(u.y)?u.x:u.y,e.scale=a?function(t,e){return O(e[0],e[1],Rt)/O(t[0],t[1],Rt)}(a.pointers,r):1,e.rotation=a?function(t,e){return R(e[1],e[0],Rt)+R(t[1],t[0],Rt)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,C(n,e);var l=t.element;v(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function C(t,e){var n,r,i,o,a=t.lastInterval||e,c=e.timeStamp-a.timeStamp;if(e.eventType!=Tt&&(c>wt||a.velocity===s)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=D(c,u,l);r=h.x,i=h.y,n=ht(h.x)>ht(h.y)?h.x:h.y,o=M(u,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function k(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:lt(t.pointers[n].clientX),clientY:lt(t.pointers[n].clientY)},n++;return{timeStamp:ft(),pointers:e,center:N(e),deltaX:t.deltaX,deltaY:t.deltaY}}function N(t){var e=t.length;if(1===e)return{x:lt(t[0].clientX),y:lt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:lt(n/e),y:lt(r/e)}}function D(t,e,n){return{x:e/t||0,y:n/t||0}}function M(t,e){return t===e?Et:ht(t)>=ht(e)?t<0?It:At:e<0?Ct:kt}function O(t,e,n){n||(n=Ot);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function R(t,e,n){n||(n=Ot);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function P(){this.evEl=Lt,this.evWin=qt,this.pressed=!1,I.apply(this,arguments)}function L(){this.evEl=zt,this.evWin=Vt,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=jt,this.evWin=Wt,this.started=!1,I.apply(this,arguments)}function B(t,e){var n=x(t.touches),r=x(t.changedTouches);return e&(_t|Tt)&&(n=_(n.concat(r),"identifier",!0)),[n,r]}function F(){this.evTarget=Qt,this.targetIds={},I.apply(this,arguments)}function z(t,e){var n=x(t.touches),r=this.targetIds;if(e&(St|xt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=x(t.changedTouches),s=[],c=this.target;if(o=n.filter((function(t){return v(t.target,c)})),e===St)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(_t|Tt)&&delete r[a[i].identifier],i++;return s.length?[_(o.concat(s),"identifier",!0),s]:void 0}function V(){I.apply(this,arguments);var t=f(this.handler,this);this.touch=new F(this.manager,t),this.mouse=new P(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function U(t,e){t&St?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(_t|Tt)&&j.call(this,e)}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Ht)}}function W(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=Kt&&a<=Kt)return!0}return!1}function G(t,e){this.manager=t,this.set(e)}function Q(t){this.options=at({},this.defaults,t||{}),this.id=yt++,this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function H(t){return t&ue?"cancel":t&ae?"end":t&ie?"move":t&oe?"start":""}function K(t){return t==kt?"down":t==Ct?"up":t==It?"left":t==At?"right":""}function Y(t,e){var n=e.manager;return n?n.get(t):t}function rt(){Q.apply(this,arguments)}function X(){rt.apply(this,arguments),this.pX=null,this.pY=null}function $(){rt.apply(this,arguments)}function J(){Q.apply(this,arguments),this._timer=null,this._input=null}function Z(){rt.apply(this,arguments)}function tt(){rt.apply(this,arguments)}function et(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function nt(t,e){return(e=e||{}).recognizers=m(e.recognizers,nt.defaults.preset),new ot(t,e)}function ot(t,e){this.options=at({},nt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){return new(t.options.inputClass||(vt?L:bt?F:gt?V:P))(t,A)}(this),this.touchAction=new G(this,this.options.touchAction),it(this,!0),l(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function it(t,e){var n,r=t.element;r.style&&(l(t.options.cssProps,(function(i,o){n=T(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}var at,st=["","webkit","Moz","MS","ms","o"],ut=o.createElement("div"),ct="function",lt=Math.round,ht=Math.abs,ft=Date.now;at="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var pt=h((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),mt=h((function(t,e){return pt(t,e,!0)}),"merge","Use `assign`."),yt=1,gt="ontouchstart"in i,vt=T(i,"PointerEvent")!==s,bt=gt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),wt=25,St=1,xt=2,_t=4,Tt=8,Et=1,It=2,At=4,Ct=8,kt=16,Nt=It|At,Dt=Ct|kt,Mt=Nt|Dt,Ot=["x","y"],Rt=["clientX","clientY"];I.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(E(this.element),this.evWin,this.domHandler)}};var Pt={mousedown:St,mousemove:xt,mouseup:_t},Lt="mousedown",qt="mousemove mouseup";p(P,I,{handler:function(t){var e=Pt[t.type];e&St&&0===t.button&&(this.pressed=!0),e&xt&&1!==t.which&&(e=_t),this.pressed&&(e&_t&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Bt={pointerdown:St,pointermove:xt,pointerup:_t,pointercancel:Tt,pointerout:Tt},Ft={2:"touch",3:"pen",4:"mouse",5:"kinect"},zt="pointerdown",Vt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(zt="MSPointerDown",Vt="MSPointerMove MSPointerUp MSPointerCancel"),p(L,I,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Bt[r],o=Ft[t.pointerType]||t.pointerType,a="touch"==o,s=S(e,t.pointerId,"pointerId");i&St&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(_t|Tt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Ut={touchstart:St,touchmove:xt,touchend:_t,touchcancel:Tt},jt="touchstart",Wt="touchstart touchmove touchend touchcancel";p(q,I,{handler:function(t){var e=Ut[t.type];if(e===St&&(this.started=!0),this.started){var n=B.call(this,t,e);e&(_t|Tt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Gt={touchstart:St,touchmove:xt,touchend:_t,touchcancel:Tt},Qt="touchstart touchmove touchend touchcancel";p(F,I,{handler:function(t){var e=Gt[t.type],n=z.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Ht=2500,Kt=25;p(V,I,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)U.call(this,e,n);else if(i&&W.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yt=T(ut.style,"touchAction"),Xt=Yt!==s,$t="auto",Jt="manipulation",Zt="none",te="pan-x",ee="pan-y",ne=function(){if(!Xt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();G.prototype={set:function(t){"compute"==t&&(t=this.compute()),Xt&&this.manager.element.style&&ne[t]&&(this.manager.element.style[Yt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,(function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(b(t,Zt))return Zt;var e=b(t,te),n=b(t,ee);return e&&n?Zt:e||n?e?te:ee:b(t,Jt)?Jt:$t}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,i=b(r,Zt)&&!ne[Zt],o=b(r,ee)&&!ne[ee],a=b(r,te)&&!ne[te];if(i){var s=1===t.pointers.length,c=t.distance<2,u=t.deltaTime<250;if(s&&c&&u)return}return a&&o?void 0:i||o&&n&Nt||a&&n&Dt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,oe=2,ie=4,ae=8,se=ae,ue=16;Q.prototype={defaults:{},set:function(t){return at(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Y(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)||(t=Y(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return-1===S(e,t=Y(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=Y(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<ae&&e(n.options.event+H(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ae&&e(n.options.event+H(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|re)))return!1;t++}return!0},recognize:function(t){var e=at({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(se|ue|32)&&(this.state=re),this.state=this.process(e),this.state&(oe|ie|ae|ue)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(rt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(oe|ie),i=this.attrTest(t);return r&&(n&Tt||!i)?e|ue:r||i?n&_t?e|ae:e&oe?e|ie:oe:32}}),p(X,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Mt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Nt&&e.push(ee),t&Dt&&e.push(te),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Nt?(i=0===o?Et:o<0?It:At,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Et:a<0?Ct:kt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&oe||!(this.state&oe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=K(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p($,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(J,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[$t]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(_t|Tt)&&!i)this.reset();else if(t.eventType&St)this.reset(),this._timer=c((function(){this.state=se,this.tryEmit()}),e.time,this);else if(t.eventType&_t)return se;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===se&&(t&&t.eventType&_t?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),p(Z,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oe)}}),p(tt,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Nt|Dt,pointers:1},getTouchAction:function(){return X.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Nt|Dt)?e=t.overallVelocity:n&Nt?e=t.overallVelocityX:n&Dt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ht(e)>this.options.velocity&&t.eventType&_t},emit:function(t){var e=K(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(et,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Jt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&St&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=_t)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=c((function(){this.state=se,this.tryEmit()}),e.interval,this),oe):se}return 32},failTimeout:function(){return this._timer=c((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==se&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),nt.VERSION="2.0.7",nt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Z,{enable:!1}],[$,{enable:!1},["rotate"]],[tt,{direction:Nt}],[X,{direction:Nt},["swipe"]],[et],[et,{event:"doubletap",taps:2},["tap"]],[J]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ot.prototype={set:function(t){return at(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&se)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(oe|ie|ae)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=S(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return l(w(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return l(w(t),(function(t){e?n[t]&&n[t].splice(S(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&it(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},at(nt,{INPUT_START:St,INPUT_MOVE:xt,INPUT_END:_t,INPUT_CANCEL:Tt,STATE_POSSIBLE:re,STATE_BEGAN:oe,STATE_CHANGED:ie,STATE_ENDED:ae,STATE_RECOGNIZED:se,STATE_CANCELLED:ue,STATE_FAILED:32,DIRECTION_NONE:Et,DIRECTION_LEFT:It,DIRECTION_RIGHT:At,DIRECTION_UP:Ct,DIRECTION_DOWN:kt,DIRECTION_HORIZONTAL:Nt,DIRECTION_VERTICAL:Dt,DIRECTION_ALL:Mt,Manager:ot,Input:I,TouchAction:G,TouchInput:F,MouseInput:P,PointerEventInput:L,TouchMouseInput:V,SingleTouchInput:q,Recognizer:Q,AttrRecognizer:rt,Tap:et,Pan:X,Swipe:tt,Pinch:$,Rotate:Z,Press:J,on:y,off:g,each:l,merge:mt,extend:pt,assign:at,inherit:p,bindFn:f,prefixed:T}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=nt,(r=function(){return nt}.call(e,n,e,t))!==s&&(t.exports=r)}(window,document)},function(t,e){t.exports=function(t,e,n){for(var r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*n/e.length),o="";;)for(var a=t(i),s=i;s--;)if((o+=e[a[s]&r]||"").length===+n)return o}},function(t,e,n){"use strict";var i,r,a=n(15),s=(n(0),1567752802062),o=7;t.exports=function(t){var e="",n=Math.floor(.001*(Date.now()-s));return n===r?i++:(i=0,r=n),e+=a(o),e+=a(t),i>0&&(e+=a(i)),e+a(n)}},function(t,e,n){"use strict";var i=n(0),r=n(18),a=n(13);t.exports=function(t){for(var e,n=0,o="";!e;)o+=a(r,i.get(),1),e=t<Math.pow(16,n+1),n++;return o}},function(t,e,n){"use strict";function a(){return r(o)}var s=n(0),r=n(14),u=n(17),o=n(20)||0;t.exports=a,t.exports.generate=a,t.exports.seed=function(e){return s.seed(e),t.exports},t.exports.worker=function(e){return o=e,t.exports},t.exports.characters=function(t){return void 0!==t&&s.characters(t),s.shuffled()},t.exports.isValid=u},function(t,e,n){"use strict";var i=n(0);t.exports=function(t){return!(!t||"string"!=typeof t||t.length<6||new RegExp("[^"+i.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t))}},function(t,e,n){"use strict";var r,i="object"==typeof window&&(window.crypto||window.msCrypto);r=i&&i.getRandomValues?function(t){return i.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e},t.exports=r},function(t,e,n){"use strict";var r=1;t.exports={nextValue:function(){return(r=(9301*r+49297)%233280)/233280},seed:function(t){r=t}}},function(t,e,n){"use strict";t.exports=0},function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var c=Object.create(s.computed||null);Object.keys(r).forEach((function(t){var e=r[t];c[t]=function(){return e}})),s.computed=c}return{esModule:i,exports:o,options:s}}},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),n(23)("df0682cc",r,!0,{})},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=l[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(o(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(o(n.parts[i]));l[n.id]={id:n.id,refs:1,parts:a}}}}function i(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function o(t){var e,n,r=document.querySelector("style["+g+'~="'+t.id+'"]');if(r){if(d)return m;r.parentNode.removeChild(r)}if(v){var o=f++;r=p||(p=i()),e=a.bind(null,r,o,!1),n=a.bind(null,r,o,!0)}else r=i(),e=s.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),y.ssrId&&t.setAttribute(g,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(24),l={},h=c&&(document.head||document.getElementsByTagName("head")[0]),p=null,f=0,d=!1,m=function(){},y=null,g="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n,i){d=n,y=i||{};var o=u(t,e);return r(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i];(s=l[a.id]).refs--,n.push(s)}for(e?r(o=u(t,e)):o=[],i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete l[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o[0],c={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])},function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e),n(0);var r=function(){function t(t,e,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=n}return t.range=function(e,n){return n?e&&e.loc&&n.loc&&e.loc.lexer===n.loc.lexer?new t(e.loc.lexer,e.loc.start,n.loc.end):null:e&&e.loc},t}(),o=function(){function t(text,t){this.text=void 0,this.loc=void 0,this.text=text,this.loc=t}return t.prototype.range=function(e,text){return new t(text,r.range(this,e))},t}(),c=function t(e,n){this.position=void 0;var r,o="KaTeX parse error: "+e,c=n&&n.loc;if(c&&c.start<=c.end){var input=c.lexer.input;r=c.start;var l=c.end;r===input.length?o+=" at end of input: ":o+=" at position "+(r+1)+": ";var h=input.slice(r,l).replace(/[^]/g,"$&");o+=(r>15?""+input.slice(r-15,r):input.slice(0,r))+h+(l+15<input.length?input.slice(l,l+15)+"":input.slice(l))}var f=new Error(o);return f.name="ParseError",f.__proto__=t.prototype,f.position=r,f};c.prototype.__proto__=Error.prototype;var l=c,h=/([A-Z])/g,f={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g,m=function t(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},y={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(text){return String(text).replace(d,(function(t){return f[t]}))},hyphenate:function(t){return t.replace(h,"-$1").toLowerCase()},getBaseElem:m,isCharacterBox:function(t){var e=m(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},protocolFromUrl:function(t){var e=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(t);return null!=e?e[1]:"_relative"}},v=function(){function t(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,t=t||{},this.displayMode=y.deflt(t.displayMode,!1),this.output=y.deflt(t.output,"htmlAndMathml"),this.leqno=y.deflt(t.leqno,!1),this.fleqn=y.deflt(t.fleqn,!1),this.throwOnError=y.deflt(t.throwOnError,!0),this.errorColor=y.deflt(t.errorColor,"#cc0000"),this.macros=t.macros||{},this.minRuleThickness=Math.max(0,y.deflt(t.minRuleThickness,0)),this.colorIsTextColor=y.deflt(t.colorIsTextColor,!1),this.strict=y.deflt(t.strict,"warn"),this.trust=y.deflt(t.trust,!1),this.maxSize=Math.max(0,y.deflt(t.maxSize,1/0)),this.maxExpand=Math.max(0,y.deflt(t.maxExpand,1e3))}var e=t.prototype;return e.reportNonstrict=function(t,e,n){var r=this.strict;if("function"==typeof r&&(r=r(t,e,n)),r&&"ignore"!==r){if(!0===r||"error"===r)throw new l("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",n);"warn"===r?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+e+" ["+t+"]")}},e.useStrictBehavior=function(t,e,n){var r=this.strict;if("function"==typeof r)try{r=r(t,e,n)}catch(t){r="error"}return!(!r||"ignore"===r||!0!==r&&"error"!==r&&("warn"===r?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"),1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+e+" ["+t+"]"),1)))},e.isTrusted=function(t){t.url&&!t.protocol&&(t.protocol=y.protocolFromUrl(t.url));var e="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(e)},t}(),w=function(){function t(t,e,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=n}var e=t.prototype;return e.sup=function(){return S[x[this.id]]},e.sub=function(){return S[_[this.id]]},e.fracNum=function(){return S[T[this.id]]},e.fracDen=function(){return S[E[this.id]]},e.cramp=function(){return S[I[this.id]]},e.text=function(){return S[A[this.id]]},e.isTight=function(){return this.size>=2},t}(),S=[new w(0,0,!1),new w(1,0,!0),new w(2,1,!1),new w(3,1,!0),new w(4,2,!1),new w(5,2,!0),new w(6,3,!1),new w(7,3,!0)],x=[4,5,4,5,6,7,6,7],_=[5,5,5,5,7,7,7,7],T=[2,3,4,5,6,7,6,7],E=[3,3,5,5,7,7,7,7],I=[1,1,3,3,5,5,7,7],A=[0,1,2,3,2,3,2,3],C={DISPLAY:S[0],TEXT:S[2],SCRIPT:S[4],SCRIPTSCRIPT:S[6]},k=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],N=[];function D(t){for(var i=0;i<N.length;i+=2)if(t>=N[i]&&t<=N[i+1])return!0;return!1}k.forEach((function(s){return s.blocks.forEach((function(b){return N.push.apply(N,b)}))}));var M={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},O=function(){function t(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var e=t.prototype;return e.hasClass=function(t){return y.contains(this.classes,t)},e.toNode=function(){for(var t=document.createDocumentFragment(),i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},e.toMarkup=function(){for(var t="",i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t},e.toText=function(){var t=function(t){return t.toText()};return this.children.map(t).join("")},t}(),R=function(t){return t.filter((function(t){return t})).join(" ")},P=function(t,e,style){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=style||{},e){e.style.isTight()&&this.classes.push("mtight");var n=e.getColor();n&&(this.style.color=n)}},L=function(t){var e=document.createElement(t);for(var style in e.className=R(this.classes),this.style)this.style.hasOwnProperty(style)&&(e.style[style]=this.style[style]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&e.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e},B=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+y.escape(R(this.classes))+'"');var n="";for(var style in this.style)this.style.hasOwnProperty(style)&&(n+=y.hyphenate(style)+":"+this.style[style]+";");for(var r in n&&(e+=' style="'+y.escape(n)+'"'),this.attributes)this.attributes.hasOwnProperty(r)&&(e+=" "+r+'="'+y.escape(this.attributes[r])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+="</"+t+">"},F=function(){function t(t,e,n,style){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,P.call(this,t,n,style),this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return y.contains(this.classes,t)},e.toNode=function(){return L.call(this,"span")},e.toMarkup=function(){return B.call(this,"span")},t}(),z=function(){function t(t,e,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,P.call(this,e,r),this.children=n||[],this.setAttribute("href",t)}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return y.contains(this.classes,t)},e.toNode=function(){return L.call(this,"a")},e.toMarkup=function(){return B.call(this,"a")},t}(),V=function(){function t(t,e,style){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=style}var e=t.prototype;return e.hasClass=function(t){return y.contains(this.classes,t)},e.toNode=function(){var t=document.createElement("img");for(var style in t.src=this.src,t.alt=this.alt,t.className="mord",this.style)this.style.hasOwnProperty(style)&&(t.style[style]=this.style[style]);return t},e.toMarkup=function(){var t="<img  src='"+this.src+" 'alt='"+this.alt+"' ",e="";for(var style in this.style)this.style.hasOwnProperty(style)&&(e+=y.hyphenate(style)+":"+this.style[style]+";");return e&&(t+=' style="'+y.escape(e)+'"'),t+="'/>"},t}(),U={"":"","":"","":"","":""},j=function(){function t(text,t,e,n,r,o,c,style){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=text,this.height=t||0,this.depth=e||0,this.italic=n||0,this.skew=r||0,this.width=o||0,this.classes=c||[],this.style=style||{},this.maxFontSize=0;var script=function(t){for(var i=0;i<k.length;i++)for(var script=k[i],e=0;e<script.blocks.length;e++){var n=script.blocks[e];if(t>=n[0]&&t<=n[1])return script.name}return null}(this.text.charCodeAt(0));script&&this.classes.push(script+"_fallback"),/[]/.test(this.text)&&(this.text=U[this.text])}var e=t.prototype;return e.hasClass=function(t){return y.contains(this.classes,t)},e.toNode=function(){var t=document.createTextNode(this.text),span=null;for(var style in this.italic>0&&((span=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((span=span||document.createElement("span")).className=R(this.classes)),this.style)this.style.hasOwnProperty(style)&&((span=span||document.createElement("span")).style[style]=this.style[style]);return span?(span.appendChild(t),span):t},e.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=y.escape(R(this.classes)),e+='"');var n="";for(var style in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(style)&&(n+=y.hyphenate(style)+":"+this.style[style]+";");n&&(t=!0,e+=' style="'+y.escape(n)+'"');var r=y.escape(this.text);return t?(e+=">",e+=r,e+="</span>"):r},t}(),W=function(){function t(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},e.toMarkup=function(){var t="<svg";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>"},t}(),G=function(){function t(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",M[this.pathName]),t},e.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+M[this.pathName]+"'/>"},t}(),Q=function(){function t(t){this.attributes=void 0,this.attributes=t||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t},e.toMarkup=function(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");return t+="/>"},t}();function H(t){if(t instanceof j)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}var K={"AMS-Regular":{65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473]},"Fraktur-Regular":{33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],163:[0,.69444,0,0,.86853],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],163:[0,.69444,0,0,.76909],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],305:[0,.43056,0,.02778,.32246],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],567:[.19444,.43056,0,.08334,.38403],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333]},"Math-Italic":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"Math-Regular":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"SansSerif-Bold":{33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212]},"Size1-Regular":{40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},X={"":"A","":"C","":"D","":"o","":"a","":"c","":"d","":"o","":"A","":"B","":"B","":"F","":"A","":"E","":"K","":"3","":"N","":"N","":"K","":"N","":"M","":"H","":"O","":"N","":"P","":"C","":"T","":"y","":"O","":"X","":"U","":"h","":"W","":"W","":"B","":"X","":"B","":"3","":"X","":"R","":"a","":"b","":"a","":"r","":"y","":"e","":"m","":"e","":"n","":"n","":"n","":"n","":"m","":"n","":"o","":"n","":"p","":"c","":"o","":"y","":"b","":"x","":"n","":"n","":"w","":"w","":"a","":"m","":"a","":"e","":"m","":"r"};function $(t,e,n){if(!K[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),o=K[e][r];if(!o&&t[0]in X&&(r=X[t[0]].charCodeAt(0),o=K[e][r]),o||"text"!==n||D(r)&&(o=K[e][77]),o)return{depth:o[0],height:o[1],italic:o[2],skew:o[3],width:o[4]}}var J={},Z={bin:1,close:1,inner:1,open:1,punct:1,rel:1},tt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},et={math:{},text:{}},nt=et;function ot(t,e,n,r,o,c){et[t][o]={font:e,group:n,replace:r},c&&r&&(et[t][r]=et[t][o])}var main="main",it="ams",at="bin",st="mathord",ut="op-token",ct="rel";ot("math",main,ct,"","\\equiv",!0),ot("math",main,ct,"","\\prec",!0),ot("math",main,ct,"","\\succ",!0),ot("math",main,ct,"","\\sim",!0),ot("math",main,ct,"","\\perp"),ot("math",main,ct,"","\\preceq",!0),ot("math",main,ct,"","\\succeq",!0),ot("math",main,ct,"","\\simeq",!0),ot("math",main,ct,"","\\mid",!0),ot("math",main,ct,"","\\ll",!0),ot("math",main,ct,"","\\gg",!0),ot("math",main,ct,"","\\asymp",!0),ot("math",main,ct,"","\\parallel"),ot("math",main,ct,"","\\bowtie",!0),ot("math",main,ct,"","\\smile",!0),ot("math",main,ct,"","\\sqsubseteq",!0),ot("math",main,ct,"","\\sqsupseteq",!0),ot("math",main,ct,"","\\doteq",!0),ot("math",main,ct,"","\\frown",!0),ot("math",main,ct,"","\\ni",!0),ot("math",main,ct,"","\\propto",!0),ot("math",main,ct,"","\\vdash",!0),ot("math",main,ct,"","\\dashv",!0),ot("math",main,ct,"","\\owns"),ot("math",main,"punct",".","\\ldotp"),ot("math",main,"punct","","\\cdotp"),ot("math",main,"textord","#","\\#"),ot("text",main,"textord","#","\\#"),ot("math",main,"textord","&","\\&"),ot("text",main,"textord","&","\\&"),ot("math",main,"textord","","\\aleph",!0),ot("math",main,"textord","","\\forall",!0),ot("math",main,"textord","","\\hbar",!0),ot("math",main,"textord","","\\exists",!0),ot("math",main,"textord","","\\nabla",!0),ot("math",main,"textord","","\\flat",!0),ot("math",main,"textord","","\\ell",!0),ot("math",main,"textord","","\\natural",!0),ot("math",main,"textord","","\\clubsuit",!0),ot("math",main,"textord","","\\wp",!0),ot("math",main,"textord","","\\sharp",!0),ot("math",main,"textord","","\\diamondsuit",!0),ot("math",main,"textord","","\\Re",!0),ot("math",main,"textord","","\\heartsuit",!0),ot("math",main,"textord","","\\Im",!0),ot("math",main,"textord","","\\spadesuit",!0),ot("text",main,"textord","","\\S",!0),ot("text",main,"textord","","\\P",!0),ot("math",main,"textord","","\\dag"),ot("text",main,"textord","","\\dag"),ot("text",main,"textord","","\\textdagger"),ot("math",main,"textord","","\\ddag"),ot("text",main,"textord","","\\ddag"),ot("text",main,"textord","","\\textdaggerdbl"),ot("math",main,"close","","\\rmoustache",!0),ot("math",main,"open","","\\lmoustache",!0),ot("math",main,"close","","\\rgroup",!0),ot("math",main,"open","","\\lgroup",!0),ot("math",main,at,"","\\mp",!0),ot("math",main,at,"","\\ominus",!0),ot("math",main,at,"","\\uplus",!0),ot("math",main,at,"","\\sqcap",!0),ot("math",main,at,"","\\ast"),ot("math",main,at,"","\\sqcup",!0),ot("math",main,at,"","\\bigcirc"),ot("math",main,at,"","\\bullet"),ot("math",main,at,"","\\ddagger"),ot("math",main,at,"","\\wr",!0),ot("math",main,at,"","\\amalg"),ot("math",main,at,"&","\\And"),ot("math",main,ct,"","\\longleftarrow",!0),ot("math",main,ct,"","\\Leftarrow",!0),ot("math",main,ct,"","\\Longleftarrow",!0),ot("math",main,ct,"","\\longrightarrow",!0),ot("math",main,ct,"","\\Rightarrow",!0),ot("math",main,ct,"","\\Longrightarrow",!0),ot("math",main,ct,"","\\leftrightarrow",!0),ot("math",main,ct,"","\\longleftrightarrow",!0),ot("math",main,ct,"","\\Leftrightarrow",!0),ot("math",main,ct,"","\\Longleftrightarrow",!0),ot("math",main,ct,"","\\mapsto",!0),ot("math",main,ct,"","\\longmapsto",!0),ot("math",main,ct,"","\\nearrow",!0),ot("math",main,ct,"","\\hookleftarrow",!0),ot("math",main,ct,"","\\hookrightarrow",!0),ot("math",main,ct,"","\\searrow",!0),ot("math",main,ct,"","\\leftharpoonup",!0),ot("math",main,ct,"","\\rightharpoonup",!0),ot("math",main,ct,"","\\swarrow",!0),ot("math",main,ct,"","\\leftharpoondown",!0),ot("math",main,ct,"","\\rightharpoondown",!0),ot("math",main,ct,"","\\nwarrow",!0),ot("math",main,ct,"","\\rightleftharpoons",!0),ot("math",it,ct,"","\\nless",!0),ot("math",it,ct,"","\\@nleqslant"),ot("math",it,ct,"","\\@nleqq"),ot("math",it,ct,"","\\lneq",!0),ot("math",it,ct,"","\\lneqq",!0),ot("math",it,ct,"","\\@lvertneqq"),ot("math",it,ct,"","\\lnsim",!0),ot("math",it,ct,"","\\lnapprox",!0),ot("math",it,ct,"","\\nprec",!0),ot("math",it,ct,"","\\npreceq",!0),ot("math",it,ct,"","\\precnsim",!0),ot("math",it,ct,"","\\precnapprox",!0),ot("math",it,ct,"","\\nsim",!0),ot("math",it,ct,"","\\@nshortmid"),ot("math",it,ct,"","\\nmid",!0),ot("math",it,ct,"","\\nvdash",!0),ot("math",it,ct,"","\\nvDash",!0),ot("math",it,ct,"","\\ntriangleleft"),ot("math",it,ct,"","\\ntrianglelefteq",!0),ot("math",it,ct,"","\\subsetneq",!0),ot("math",it,ct,"","\\@varsubsetneq"),ot("math",it,ct,"","\\subsetneqq",!0),ot("math",it,ct,"","\\@varsubsetneqq"),ot("math",it,ct,"","\\ngtr",!0),ot("math",it,ct,"","\\@ngeqslant"),ot("math",it,ct,"","\\@ngeqq"),ot("math",it,ct,"","\\gneq",!0),ot("math",it,ct,"","\\gneqq",!0),ot("math",it,ct,"","\\@gvertneqq"),ot("math",it,ct,"","\\gnsim",!0),ot("math",it,ct,"","\\gnapprox",!0),ot("math",it,ct,"","\\nsucc",!0),ot("math",it,ct,"","\\nsucceq",!0),ot("math",it,ct,"","\\succnsim",!0),ot("math",it,ct,"","\\succnapprox",!0),ot("math",it,ct,"","\\ncong",!0),ot("math",it,ct,"","\\@nshortparallel"),ot("math",it,ct,"","\\nparallel",!0),ot("math",it,ct,"","\\nVDash",!0),ot("math",it,ct,"","\\ntriangleright"),ot("math",it,ct,"","\\ntrianglerighteq",!0),ot("math",it,ct,"","\\@nsupseteqq"),ot("math",it,ct,"","\\supsetneq",!0),ot("math",it,ct,"","\\@varsupsetneq"),ot("math",it,ct,"","\\supsetneqq",!0),ot("math",it,ct,"","\\@varsupsetneqq"),ot("math",it,ct,"","\\nVdash",!0),ot("math",it,ct,"","\\precneqq",!0),ot("math",it,ct,"","\\succneqq",!0),ot("math",it,ct,"","\\@nsubseteqq"),ot("math",it,at,"","\\unlhd"),ot("math",it,at,"","\\unrhd"),ot("math",it,ct,"","\\nleftarrow",!0),ot("math",it,ct,"","\\nrightarrow",!0),ot("math",it,ct,"","\\nLeftarrow",!0),ot("math",it,ct,"","\\nRightarrow",!0),ot("math",it,ct,"","\\nleftrightarrow",!0),ot("math",it,ct,"","\\nLeftrightarrow",!0),ot("math",it,ct,"","\\vartriangle"),ot("math",it,"textord","","\\hslash"),ot("math",it,"textord","","\\triangledown"),ot("math",it,"textord","","\\lozenge"),ot("math",it,"textord","","\\circledS"),ot("math",it,"textord","","\\circledR"),ot("text",it,"textord","","\\circledR"),ot("math",it,"textord","","\\measuredangle",!0),ot("math",it,"textord","","\\nexists"),ot("math",it,"textord","","\\mho"),ot("math",it,"textord","","\\Finv",!0),ot("math",it,"textord","","\\Game",!0),ot("math",it,"textord","","\\backprime"),ot("math",it,"textord","","\\blacktriangle"),ot("math",it,"textord","","\\blacktriangledown"),ot("math",it,"textord","","\\blacksquare"),ot("math",it,"textord","","\\blacklozenge"),ot("math",it,"textord","","\\bigstar"),ot("math",it,"textord","","\\sphericalangle",!0),ot("math",it,"textord","","\\complement",!0),ot("math",it,"textord","","\\eth",!0),ot("math",it,"textord","","\\diagup"),ot("math",it,"textord","","\\diagdown"),ot("math",it,"textord","","\\square"),ot("math",it,"textord","","\\Box"),ot("math",it,"textord","","\\Diamond"),ot("math",it,"textord","","\\yen",!0),ot("text",it,"textord","","\\yen",!0),ot("math",it,"textord","","\\checkmark",!0),ot("text",it,"textord","","\\checkmark"),ot("math",it,"textord","","\\beth",!0),ot("math",it,"textord","","\\daleth",!0),ot("math",it,"textord","","\\gimel",!0),ot("math",it,"textord","","\\digamma",!0),ot("math",it,"textord","","\\varkappa"),ot("math",it,"open","","\\ulcorner",!0),ot("math",it,"close","","\\urcorner",!0),ot("math",it,"open","","\\llcorner",!0),ot("math",it,"close","","\\lrcorner",!0),ot("math",it,ct,"","\\leqq",!0),ot("math",it,ct,"","\\leqslant",!0),ot("math",it,ct,"","\\eqslantless",!0),ot("math",it,ct,"","\\lesssim",!0),ot("math",it,ct,"","\\lessapprox",!0),ot("math",it,ct,"","\\approxeq",!0),ot("math",it,at,"","\\lessdot"),ot("math",it,ct,"","\\lll",!0),ot("math",it,ct,"","\\lessgtr",!0),ot("math",it,ct,"","\\lesseqgtr",!0),ot("math",it,ct,"","\\lesseqqgtr",!0),ot("math",it,ct,"","\\doteqdot"),ot("math",it,ct,"","\\risingdotseq",!0),ot("math",it,ct,"","\\fallingdotseq",!0),ot("math",it,ct,"","\\backsim",!0),ot("math",it,ct,"","\\backsimeq",!0),ot("math",it,ct,"","\\subseteqq",!0),ot("math",it,ct,"","\\Subset",!0),ot("math",it,ct,"","\\sqsubset",!0),ot("math",it,ct,"","\\preccurlyeq",!0),ot("math",it,ct,"","\\curlyeqprec",!0),ot("math",it,ct,"","\\precsim",!0),ot("math",it,ct,"","\\precapprox",!0),ot("math",it,ct,"","\\vartriangleleft"),ot("math",it,ct,"","\\trianglelefteq"),ot("math",it,ct,"","\\vDash",!0),ot("math",it,ct,"","\\Vvdash",!0),ot("math",it,ct,"","\\smallsmile"),ot("math",it,ct,"","\\smallfrown"),ot("math",it,ct,"","\\bumpeq",!0),ot("math",it,ct,"","\\Bumpeq",!0),ot("math",it,ct,"","\\geqq",!0),ot("math",it,ct,"","\\geqslant",!0),ot("math",it,ct,"","\\eqslantgtr",!0),ot("math",it,ct,"","\\gtrsim",!0),ot("math",it,ct,"","\\gtrapprox",!0),ot("math",it,at,"","\\gtrdot"),ot("math",it,ct,"","\\ggg",!0),ot("math",it,ct,"","\\gtrless",!0),ot("math",it,ct,"","\\gtreqless",!0),ot("math",it,ct,"","\\gtreqqless",!0),ot("math",it,ct,"","\\eqcirc",!0),ot("math",it,ct,"","\\circeq",!0),ot("math",it,ct,"","\\triangleq",!0),ot("math",it,ct,"","\\thicksim"),ot("math",it,ct,"","\\thickapprox"),ot("math",it,ct,"","\\supseteqq",!0),ot("math",it,ct,"","\\Supset",!0),ot("math",it,ct,"","\\sqsupset",!0),ot("math",it,ct,"","\\succcurlyeq",!0),ot("math",it,ct,"","\\curlyeqsucc",!0),ot("math",it,ct,"","\\succsim",!0),ot("math",it,ct,"","\\succapprox",!0),ot("math",it,ct,"","\\vartriangleright"),ot("math",it,ct,"","\\trianglerighteq"),ot("math",it,ct,"","\\Vdash",!0),ot("math",it,ct,"","\\shortmid"),ot("math",it,ct,"","\\shortparallel"),ot("math",it,ct,"","\\between",!0),ot("math",it,ct,"","\\pitchfork",!0),ot("math",it,ct,"","\\varpropto"),ot("math",it,ct,"","\\blacktriangleleft"),ot("math",it,ct,"","\\therefore",!0),ot("math",it,ct,"","\\backepsilon"),ot("math",it,ct,"","\\blacktriangleright"),ot("math",it,ct,"","\\because",!0),ot("math",it,ct,"","\\llless"),ot("math",it,ct,"","\\gggtr"),ot("math",it,at,"","\\lhd"),ot("math",it,at,"","\\rhd"),ot("math",it,ct,"","\\eqsim",!0),ot("math",main,ct,"","\\Join"),ot("math",it,ct,"","\\Doteq",!0),ot("math",it,at,"","\\dotplus",!0),ot("math",it,at,"","\\smallsetminus"),ot("math",it,at,"","\\Cap",!0),ot("math",it,at,"","\\Cup",!0),ot("math",it,at,"","\\doublebarwedge",!0),ot("math",it,at,"","\\boxminus",!0),ot("math",it,at,"","\\boxplus",!0),ot("math",it,at,"","\\divideontimes",!0),ot("math",it,at,"","\\ltimes",!0),ot("math",it,at,"","\\rtimes",!0),ot("math",it,at,"","\\leftthreetimes",!0),ot("math",it,at,"","\\rightthreetimes",!0),ot("math",it,at,"","\\curlywedge",!0),ot("math",it,at,"","\\curlyvee",!0),ot("math",it,at,"","\\circleddash",!0),ot("math",it,at,"","\\circledast",!0),ot("math",it,at,"","\\centerdot"),ot("math",it,at,"","\\intercal",!0),ot("math",it,at,"","\\doublecap"),ot("math",it,at,"","\\doublecup"),ot("math",it,at,"","\\boxtimes",!0),ot("math",it,ct,"","\\dashrightarrow",!0),ot("math",it,ct,"","\\dashleftarrow",!0),ot("math",it,ct,"","\\leftleftarrows",!0),ot("math",it,ct,"","\\leftrightarrows",!0),ot("math",it,ct,"","\\Lleftarrow",!0),ot("math",it,ct,"","\\twoheadleftarrow",!0),ot("math",it,ct,"","\\leftarrowtail",!0),ot("math",it,ct,"","\\looparrowleft",!0),ot("math",it,ct,"","\\leftrightharpoons",!0),ot("math",it,ct,"","\\curvearrowleft",!0),ot("math",it,ct,"","\\circlearrowleft",!0),ot("math",it,ct,"","\\Lsh",!0),ot("math",it,ct,"","\\upuparrows",!0),ot("math",it,ct,"","\\upharpoonleft",!0),ot("math",it,ct,"","\\downharpoonleft",!0),ot("math",it,ct,"","\\multimap",!0),ot("math",it,ct,"","\\leftrightsquigarrow",!0),ot("math",it,ct,"","\\rightrightarrows",!0),ot("math",it,ct,"","\\rightleftarrows",!0),ot("math",it,ct,"","\\twoheadrightarrow",!0),ot("math",it,ct,"","\\rightarrowtail",!0),ot("math",it,ct,"","\\looparrowright",!0),ot("math",it,ct,"","\\curvearrowright",!0),ot("math",it,ct,"","\\circlearrowright",!0),ot("math",it,ct,"","\\Rsh",!0),ot("math",it,ct,"","\\downdownarrows",!0),ot("math",it,ct,"","\\upharpoonright",!0),ot("math",it,ct,"","\\downharpoonright",!0),ot("math",it,ct,"","\\rightsquigarrow",!0),ot("math",it,ct,"","\\leadsto"),ot("math",it,ct,"","\\Rrightarrow",!0),ot("math",it,ct,"","\\restriction"),ot("math",main,"textord","","`"),ot("math",main,"textord","$","\\$"),ot("text",main,"textord","$","\\$"),ot("text",main,"textord","$","\\textdollar"),ot("math",main,"textord","%","\\%"),ot("text",main,"textord","%","\\%"),ot("math",main,"textord","_","\\_"),ot("text",main,"textord","_","\\_"),ot("text",main,"textord","_","\\textunderscore"),ot("math",main,"textord","","\\angle",!0),ot("math",main,"textord","","\\infty",!0),ot("math",main,"textord","","\\prime"),ot("math",main,"textord","","\\triangle"),ot("math",main,"textord","","\\Gamma",!0),ot("math",main,"textord","","\\Delta",!0),ot("math",main,"textord","","\\Theta",!0),ot("math",main,"textord","","\\Lambda",!0),ot("math",main,"textord","","\\Xi",!0),ot("math",main,"textord","","\\Pi",!0),ot("math",main,"textord","","\\Sigma",!0),ot("math",main,"textord","","\\Upsilon",!0),ot("math",main,"textord","","\\Phi",!0),ot("math",main,"textord","","\\Psi",!0),ot("math",main,"textord","","\\Omega",!0),ot("math",main,"textord","A",""),ot("math",main,"textord","B",""),ot("math",main,"textord","E",""),ot("math",main,"textord","Z",""),ot("math",main,"textord","H",""),ot("math",main,"textord","I",""),ot("math",main,"textord","K",""),ot("math",main,"textord","M",""),ot("math",main,"textord","N",""),ot("math",main,"textord","O",""),ot("math",main,"textord","P",""),ot("math",main,"textord","T",""),ot("math",main,"textord","X",""),ot("math",main,"textord","","\\neg",!0),ot("math",main,"textord","","\\lnot"),ot("math",main,"textord","","\\top"),ot("math",main,"textord","","\\bot"),ot("math",main,"textord","","\\emptyset"),ot("math",it,"textord","","\\varnothing"),ot("math",main,st,"","\\alpha",!0),ot("math",main,st,"","\\beta",!0),ot("math",main,st,"","\\gamma",!0),ot("math",main,st,"","\\delta",!0),ot("math",main,st,"","\\epsilon",!0),ot("math",main,st,"","\\zeta",!0),ot("math",main,st,"","\\eta",!0),ot("math",main,st,"","\\theta",!0),ot("math",main,st,"","\\iota",!0),ot("math",main,st,"","\\kappa",!0),ot("math",main,st,"","\\lambda",!0),ot("math",main,st,"","\\mu",!0),ot("math",main,st,"","\\nu",!0),ot("math",main,st,"","\\xi",!0),ot("math",main,st,"","\\omicron",!0),ot("math",main,st,"","\\pi",!0),ot("math",main,st,"","\\rho",!0),ot("math",main,st,"","\\sigma",!0),ot("math",main,st,"","\\tau",!0),ot("math",main,st,"","\\upsilon",!0),ot("math",main,st,"","\\phi",!0),ot("math",main,st,"","\\chi",!0),ot("math",main,st,"","\\psi",!0),ot("math",main,st,"","\\omega",!0),ot("math",main,st,"","\\varepsilon",!0),ot("math",main,st,"","\\vartheta",!0),ot("math",main,st,"","\\varpi",!0),ot("math",main,st,"","\\varrho",!0),ot("math",main,st,"","\\varsigma",!0),ot("math",main,st,"","\\varphi",!0),ot("math",main,at,"","*"),ot("math",main,at,"+","+"),ot("math",main,at,"","-"),ot("math",main,at,"","\\cdot",!0),ot("math",main,at,"","\\circ"),ot("math",main,at,"","\\div",!0),ot("math",main,at,"","\\pm",!0),ot("math",main,at,"","\\times",!0),ot("math",main,at,"","\\cap",!0),ot("math",main,at,"","\\cup",!0),ot("math",main,at,"","\\setminus"),ot("math",main,at,"","\\land"),ot("math",main,at,"","\\lor"),ot("math",main,at,"","\\wedge",!0),ot("math",main,at,"","\\vee",!0),ot("math",main,"textord","","\\surd"),ot("math",main,"open","(","("),ot("math",main,"open","[","["),ot("math",main,"open","","\\langle",!0),ot("math",main,"open","","\\lvert"),ot("math",main,"open","","\\lVert"),ot("math",main,"close",")",")"),ot("math",main,"close","]","]"),ot("math",main,"close","?","?"),ot("math",main,"close","!","!"),ot("math",main,"close","","\\rangle",!0),ot("math",main,"close","","\\rvert"),ot("math",main,"close","","\\rVert"),ot("math",main,ct,"=","="),ot("math",main,ct,"<","<"),ot("math",main,ct,">",">"),ot("math",main,ct,":",":"),ot("math",main,ct,"","\\approx",!0),ot("math",main,ct,"","\\cong",!0),ot("math",main,ct,"","\\ge"),ot("math",main,ct,"","\\geq",!0),ot("math",main,ct,"","\\gets"),ot("math",main,ct,">","\\gt"),ot("math",main,ct,"","\\in",!0),ot("math",main,ct,"","\\@not"),ot("math",main,ct,"","\\subset",!0),ot("math",main,ct,"","\\supset",!0),ot("math",main,ct,"","\\subseteq",!0),ot("math",main,ct,"","\\supseteq",!0),ot("math",it,ct,"","\\nsubseteq",!0),ot("math",it,ct,"","\\nsupseteq",!0),ot("math",main,ct,"","\\models"),ot("math",main,ct,"","\\leftarrow",!0),ot("math",main,ct,"","\\le"),ot("math",main,ct,"","\\leq",!0),ot("math",main,ct,"<","\\lt"),ot("math",main,ct,"","\\rightarrow",!0),ot("math",main,ct,"","\\to"),ot("math",it,ct,"","\\ngeq",!0),ot("math",it,ct,"","\\nleq",!0),ot("math",main,"spacing","","\\ "),ot("math",main,"spacing","","~"),ot("math",main,"spacing","","\\space"),ot("math",main,"spacing","","\\nobreakspace"),ot("text",main,"spacing","","\\ "),ot("text",main,"spacing","","~"),ot("text",main,"spacing","","\\space"),ot("text",main,"spacing","","\\nobreakspace"),ot("math",main,"spacing",null,"\\nobreak"),ot("math",main,"spacing",null,"\\allowbreak"),ot("math",main,"punct",",",","),ot("math",main,"punct",";",";"),ot("math",it,at,"","\\barwedge",!0),ot("math",it,at,"","\\veebar",!0),ot("math",main,at,"","\\odot",!0),ot("math",main,at,"","\\oplus",!0),ot("math",main,at,"","\\otimes",!0),ot("math",main,"textord","","\\partial",!0),ot("math",main,at,"","\\oslash",!0),ot("math",it,at,"","\\circledcirc",!0),ot("math",it,at,"","\\boxdot",!0),ot("math",main,at,"","\\bigtriangleup"),ot("math",main,at,"","\\bigtriangledown"),ot("math",main,at,"","\\dagger"),ot("math",main,at,"","\\diamond"),ot("math",main,at,"","\\star"),ot("math",main,at,"","\\triangleleft"),ot("math",main,at,"","\\triangleright"),ot("math",main,"open","{","\\{"),ot("text",main,"textord","{","\\{"),ot("text",main,"textord","{","\\textbraceleft"),ot("math",main,"close","}","\\}"),ot("text",main,"textord","}","\\}"),ot("text",main,"textord","}","\\textbraceright"),ot("math",main,"open","{","\\lbrace"),ot("math",main,"close","}","\\rbrace"),ot("math",main,"open","[","\\lbrack"),ot("text",main,"textord","[","\\lbrack"),ot("math",main,"close","]","\\rbrack"),ot("text",main,"textord","]","\\rbrack"),ot("math",main,"open","(","\\lparen"),ot("math",main,"close",")","\\rparen"),ot("text",main,"textord","<","\\textless"),ot("text",main,"textord",">","\\textgreater"),ot("math",main,"open","","\\lfloor",!0),ot("math",main,"close","","\\rfloor",!0),ot("math",main,"open","","\\lceil",!0),ot("math",main,"close","","\\rceil",!0),ot("math",main,"textord","\\","\\backslash"),ot("math",main,"textord","","|"),ot("math",main,"textord","","\\vert"),ot("text",main,"textord","|","\\textbar"),ot("math",main,"textord","","\\|"),ot("math",main,"textord","","\\Vert"),ot("text",main,"textord","","\\textbardbl"),ot("text",main,"textord","~","\\textasciitilde"),ot("text",main,"textord","\\","\\textbackslash"),ot("text",main,"textord","^","\\textasciicircum"),ot("math",main,ct,"","\\uparrow",!0),ot("math",main,ct,"","\\Uparrow",!0),ot("math",main,ct,"","\\downarrow",!0),ot("math",main,ct,"","\\Downarrow",!0),ot("math",main,ct,"","\\updownarrow",!0),ot("math",main,ct,"","\\Updownarrow",!0),ot("math",main,ut,"","\\coprod"),ot("math",main,ut,"","\\bigvee"),ot("math",main,ut,"","\\bigwedge"),ot("math",main,ut,"","\\biguplus"),ot("math",main,ut,"","\\bigcap"),ot("math",main,ut,"","\\bigcup"),ot("math",main,ut,"","\\int"),ot("math",main,ut,"","\\intop"),ot("math",main,ut,"","\\iint"),ot("math",main,ut,"","\\iiint"),ot("math",main,ut,"","\\prod"),ot("math",main,ut,"","\\sum"),ot("math",main,ut,"","\\bigotimes"),ot("math",main,ut,"","\\bigoplus"),ot("math",main,ut,"","\\bigodot"),ot("math",main,ut,"","\\oint"),ot("math",main,ut,"","\\oiint"),ot("math",main,ut,"","\\oiiint"),ot("math",main,ut,"","\\bigsqcup"),ot("math",main,ut,"","\\smallint"),ot("text",main,"inner","","\\textellipsis"),ot("math",main,"inner","","\\mathellipsis"),ot("text",main,"inner","","\\ldots",!0),ot("math",main,"inner","","\\ldots",!0),ot("math",main,"inner","","\\@cdots",!0),ot("math",main,"inner","","\\ddots",!0),ot("math",main,"textord","","\\varvdots"),ot("math",main,"accent-token","","\\acute"),ot("math",main,"accent-token","","\\grave"),ot("math",main,"accent-token","","\\ddot"),ot("math",main,"accent-token","~","\\tilde"),ot("math",main,"accent-token","","\\bar"),ot("math",main,"accent-token","","\\breve"),ot("math",main,"accent-token","","\\check"),ot("math",main,"accent-token","^","\\hat"),ot("math",main,"accent-token","","\\vec"),ot("math",main,"accent-token","","\\dot"),ot("math",main,"accent-token","","\\mathring"),ot("math",main,st,"","\\imath",!0),ot("math",main,st,"","\\jmath",!0),ot("text",main,"textord","","\\i",!0),ot("text",main,"textord","","\\j",!0),ot("text",main,"textord","","\\ss",!0),ot("text",main,"textord","","\\ae",!0),ot("text",main,"textord","","\\ae",!0),ot("text",main,"textord","","\\oe",!0),ot("text",main,"textord","","\\o",!0),ot("text",main,"textord","","\\AE",!0),ot("text",main,"textord","","\\OE",!0),ot("text",main,"textord","","\\O",!0),ot("text",main,"accent-token","","\\'"),ot("text",main,"accent-token","","\\`"),ot("text",main,"accent-token","","\\^"),ot("text",main,"accent-token","","\\~"),ot("text",main,"accent-token","","\\="),ot("text",main,"accent-token","","\\u"),ot("text",main,"accent-token","","\\."),ot("text",main,"accent-token","","\\r"),ot("text",main,"accent-token","","\\v"),ot("text",main,"accent-token","",'\\"'),ot("text",main,"accent-token","","\\H"),ot("text",main,"accent-token","","\\textcircled");var lt={"--":!0,"---":!0,"``":!0,"''":!0};ot("text",main,"textord","","--"),ot("text",main,"textord","","\\textendash"),ot("text",main,"textord","","---"),ot("text",main,"textord","","\\textemdash"),ot("text",main,"textord","","`"),ot("text",main,"textord","","\\textquoteleft"),ot("text",main,"textord","","'"),ot("text",main,"textord","","\\textquoteright"),ot("text",main,"textord","","``"),ot("text",main,"textord","","\\textquotedblleft"),ot("text",main,"textord","","''"),ot("text",main,"textord","","\\textquotedblright"),ot("math",main,"textord","","\\degree",!0),ot("text",main,"textord","","\\degree"),ot("text",main,"textord","","\\textdegree",!0),ot("math",main,st,"","\\pounds"),ot("math",main,st,"","\\mathsterling",!0),ot("text",main,st,"","\\pounds"),ot("text",main,st,"","\\textsterling",!0),ot("math",it,"textord","","\\maltese"),ot("text",it,"textord","","\\maltese"),ot("text",main,"spacing","","\\ "),ot("text",main,"spacing",""," "),ot("text",main,"spacing","","~");for(var ht=0;ht<'0123456789/@."'.length;ht++){var ft='0123456789/@."'.charAt(ht);ot("math",main,"textord",ft,ft)}for(var pt=0;pt<'0123456789!@*()-=+[]<>|";:?/.,'.length;pt++){var mt='0123456789!@*()-=+[]<>|";:?/.,'.charAt(pt);ot("text",main,"textord",mt,mt)}for(var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",gt=0;gt<yt.length;gt++){var vt=yt.charAt(gt);ot("math",main,st,vt,vt),ot("text",main,"textord",vt,vt)}ot("math",it,"textord","C",""),ot("text",it,"textord","C",""),ot("math",it,"textord","H",""),ot("text",it,"textord","H",""),ot("math",it,"textord","N",""),ot("text",it,"textord","N",""),ot("math",it,"textord","P",""),ot("text",it,"textord","P",""),ot("math",it,"textord","Q",""),ot("text",it,"textord","Q",""),ot("math",it,"textord","R",""),ot("text",it,"textord","R",""),ot("math",it,"textord","Z",""),ot("text",it,"textord","Z",""),ot("math",main,st,"h",""),ot("text",main,st,"h","");for(var bt="",wt=0;wt<yt.length;wt++){var St=yt.charAt(wt);ot("math",main,st,St,bt=String.fromCharCode(55349,56320+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56372+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56424+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56580+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56736+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56788+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56840+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56944+wt)),ot("text",main,"textord",St,bt),wt<26&&(ot("math",main,st,St,bt=String.fromCharCode(55349,56632+wt)),ot("text",main,"textord",St,bt),ot("math",main,st,St,bt=String.fromCharCode(55349,56476+wt)),ot("text",main,"textord",St,bt))}ot("math",main,st,"k",bt=String.fromCharCode(55349,56668)),ot("text",main,"textord","k",bt);for(var xt=0;xt<10;xt++){var _t=xt.toString();ot("math",main,st,_t,bt=String.fromCharCode(55349,57294+xt)),ot("text",main,"textord",_t,bt),ot("math",main,st,_t,bt=String.fromCharCode(55349,57314+xt)),ot("text",main,"textord",_t,bt),ot("math",main,st,_t,bt=String.fromCharCode(55349,57324+xt)),ot("text",main,"textord",_t,bt),ot("math",main,st,_t,bt=String.fromCharCode(55349,57334+xt)),ot("text",main,"textord",_t,bt)}for(var Tt=0;Tt<"".length;Tt++){var Et="".charAt(Tt);ot("math",main,st,Et,Et),ot("text",main,"textord",Et,Et)}ot("text",main,"textord","",""),ot("text",main,"textord","",""),ot("text",main,"textord","",""),ot("text",main,"textord","",""),ot("text",main,"textord","",""),ot("text",main,"textord","",""),ot("text",main,"textord","","");var It=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathdefault","textit","Math-Italic"],["mathdefault","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],At=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ct=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],kt=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Nt=function(t,style){return style.size<2?t:Ct[t-1][style.size-1]},Dt=function(){function t(data){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=data.style,this.color=data.color,this.size=data.size||t.BASESIZE,this.textSize=data.textSize||this.size,this.phantom=!!data.phantom,this.font=data.font||"",this.fontFamily=data.fontFamily||"",this.fontWeight=data.fontWeight||"",this.fontShape=data.fontShape||"",this.sizeMultiplier=kt[this.size-1],this.maxSize=data.maxSize,this.minRuleThickness=data.minRuleThickness,this._fontMetrics=void 0}var e=t.prototype;return e.extend=function(e){var data={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(data[n]=e[n]);return new t(data)},e.havingStyle=function(style){return this.style===style?this:this.extend({style:style,size:Nt(this.textSize,style)})},e.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},e.havingSize=function(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:kt[t-1]})},e.havingBaseStyle=function(style){style=style||this.style.text();var e=Nt(t.BASESIZE,style);return this.size===e&&this.textSize===t.BASESIZE&&this.style===style?this:this.extend({style:style,size:e})},e.havingBaseSizing=function(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})},e.withColor=function(t){return this.extend({color:t})},e.withPhantom=function(){return this.extend({phantom:!0})},e.withFont=function(t){return this.extend({font:t})},e.withTextFontFamily=function(t){return this.extend({fontFamily:t,font:""})},e.withTextFontWeight=function(t){return this.extend({fontWeight:t,font:""})},e.withTextFontShape=function(t){return this.extend({fontShape:t,font:""})},e.sizingClasses=function(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]},e.baseSizingClasses=function(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]},e.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!J[e=t>=5?0:t>=3?1:2]){var n=J[e]={cssEmPerMu:Y.quad[e]/18};for(var r in Y)Y.hasOwnProperty(r)&&(n[r]=Y[r][e])}return J[e]}(this.size)),this._fontMetrics},e.getColor=function(){return this.phantom?"transparent":this.color},t}();Dt.BASESIZE=6;var Mt=Dt,Ot={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Rt={ex:!0,em:!0,mu:!0},Pt=function(t){return"string"!=typeof t&&(t=t.unit),t in Ot||t in Rt||"ex"===t},Lt=function(t,e){var n;if(t.unit in Ot)n=Ot[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)n=e.fontMetrics().cssEmPerMu;else{var r;if(r=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)n=r.fontMetrics().xHeight;else{if("em"!==t.unit)throw new l("Invalid unit: '"+t.unit+"'");n=r.fontMetrics().quad}r!==e&&(n*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*n,e.maxSize)},qt=["\\imath","","\\jmath","","\\pounds","\\mathsterling","\\textsterling",""],Bt=function(t,e,n){return nt[n][t]&&nt[n][t].replace&&(t=nt[n][t].replace),{value:t,metrics:$(t,e,n)}},Ft=function(t,e,n,r,o){var c,l=Bt(t,e,n),h=l.metrics;if(t=l.value,h){var f=h.italic;("text"===n||r&&"mathit"===r.font)&&(f=0),c=new j(t,h.height,h.depth,f,h.skew,h.width,o)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+t+"' in style '"+e+"' and mode '"+n+"'"),c=new j(t,0,0,0,0,0,o);if(r){c.maxFontSize=r.sizeMultiplier,r.style.isTight()&&c.classes.push("mtight");var d=r.getColor();d&&(c.style.color=d)}return c},zt=function(t,e){if(R(t.classes)!==R(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;for(var style in t.style)if(t.style.hasOwnProperty(style)&&t.style[style]!==e.style[style])return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;return!0},Vt=function(t){for(var e=0,n=0,r=0,i=0;i<t.children.length;i++){var o=t.children[i];o.height>e&&(e=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}t.height=e,t.depth=n,t.maxFontSize=r},Ut=function(t,e,n,style){var span=new F(t,e,n,style);return Vt(span),span},jt=function(t,e,n,style){return new F(t,e,n,style)},Wt=function(t){var e=new O(t);return Vt(e),e},Gt=function(t,e,n){var r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}return r+"-"+("textbf"===e&&"textit"===n?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Qt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ht={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Kt={fontMap:Qt,makeSymbol:Ft,mathsym:function(t,e,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&Bt(t,"Main-Bold",e).metrics?Ft(t,"Main-Bold",e,n,r.concat(["mathbf"])):"\\"===t||"main"===nt[e][t].font?Ft(t,"Main-Regular",e,n,r):Ft(t,"AMS-Regular",e,n,r.concat(["amsrm"]))},makeSpan:Ut,makeSvgSpan:jt,makeLineSpan:function(t,e,n){var line=Ut([t],[],e);return line.height=Math.max(n||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),line.style.borderBottomWidth=line.height+"em",line.maxFontSize=1,line},makeAnchor:function(t,e,n,r){var o=new z(t,e,n,r);return Vt(o),o},makeFragment:Wt,wrapFragment:function(t,e){return t instanceof O?Ut([],[t],e):t},makeVList:function(t,e){for(var n=function(t){if("individualShift"===t.positionType){for(var e=t.children,n=[e[0]],r=-e[0].shift-e[0].elem.depth,o=r,i=1;i<e.length;i++){var c=-e[i].shift-o-e[i].elem.depth,l=c-(e[i-1].elem.height+e[i-1].elem.depth);o+=c,n.push({type:"kern",size:l}),n.push(e[i])}return{children:n,depth:r}}var h;if("top"===t.positionType){for(var f=t.positionData,d=0;d<t.children.length;d++){var m=t.children[d];f-="kern"===m.type?m.size:m.elem.height+m.elem.depth}h=f}else if("bottom"===t.positionType)h=-t.positionData;else{var y=t.children[0];if("elem"!==y.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)h=-y.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");h=-y.elem.depth}}return{children:t.children,depth:h}}(t),r=n.children,o=n.depth,c=0,i=0;i<r.length;i++){var l=r[i];if("elem"===l.type){var h=l.elem;c=Math.max(c,h.maxFontSize,h.height)}}c+=2;var f=Ut(["pstrut"],[]);f.style.height=c+"em";for(var d=[],m=o,y=o,v=o,w=0;w<r.length;w++){var S=r[w];if("kern"===S.type)v+=S.size;else{var x=S.elem,_=S.wrapperClasses||[],style=S.wrapperStyle||{},T=Ut(_,[f,x],void 0,style);T.style.top=-c-v-x.depth+"em",S.marginLeft&&(T.style.marginLeft=S.marginLeft),S.marginRight&&(T.style.marginRight=S.marginRight),d.push(T),v+=x.height+x.depth}m=Math.min(m,v),y=Math.max(y,v)}var E,I=Ut(["vlist"],d);if(I.style.height=y+"em",m<0){var A=Ut([],[]),C=Ut(["vlist"],[A]);C.style.height=-m+"em";var k=Ut(["vlist-s"],[new j("")]);E=[Ut(["vlist-r"],[I,k]),Ut(["vlist-r"],[C])]}else E=[Ut(["vlist-r"],[I])];var N=Ut(["vlist-t"],E);return 2===E.length&&N.classes.push("vlist-t2"),N.height=y,N.depth=-m,N},makeOrd:function(t,e,n){var r,o=t.mode,text=t.text,c=["mord"],h="math"===o||"text"===o&&e.font,f=h?e.font:e.fontFamily;if(55349===text.charCodeAt(0)){var d=function(t,e){var n=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,r="math"===e?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[It[i][2],It[i][r]]}if(120782<=n&&n<=120831){var o=Math.floor((n-120782)/10);return[At[o][2],At[o][r]]}if(120485===n||120486===n)return[It[0][2],It[0][r]];if(120486<n&&n<120782)return["",""];throw new l("Unsupported character: "+t)}(text,o),m=d[0],v=d[1];return Ft(text,m,o,e,c.concat(v))}if(f){var w,S;if("boldsymbol"===f||"mathnormal"===f){var x="boldsymbol"===f?function(t,e,n,r){return Bt(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(text,o):(r=text,y.contains(qt,r)?{fontName:"Main-Italic",fontClass:"mathit"}:/[0-9]/.test(r.charAt(0))?{fontName:"Caligraphic-Regular",fontClass:"mathcal"}:{fontName:"Math-Italic",fontClass:"mathdefault"});w=x.fontName,S=[x.fontClass]}else y.contains(qt,text)?(w="Main-Italic",S=["mathit"]):h?(w=Qt[f].fontName,S=[f]):(w=Gt(f,e.fontWeight,e.fontShape),S=[f,e.fontWeight,e.fontShape]);if(Bt(text,w,o).metrics)return Ft(text,w,o,e,c.concat(S));if(lt.hasOwnProperty(text)&&"Typewriter"===w.substr(0,10)){for(var _=[],i=0;i<text.length;i++)_.push(Ft(text[i],w,o,e,c.concat(S)));return Wt(_)}}if("mathord"===n){var T=function(t,e,n,r){return/[0-9]/.test(t.charAt(0))||y.contains(qt,t)?{fontName:"Main-Italic",fontClass:"mathit"}:{fontName:"Math-Italic",fontClass:"mathdefault"}}(text);return Ft(text,T.fontName,o,e,c.concat([T.fontClass]))}if("textord"===n){var E=nt[o][text]&&nt[o][text].font;if("ams"===E){var I=Gt("amsrm",e.fontWeight,e.fontShape);return Ft(text,I,o,e,c.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==E&&E){var A=Gt(E,e.fontWeight,e.fontShape);return Ft(text,A,o,e,c.concat(A,e.fontWeight,e.fontShape))}var C=Gt("textrm",e.fontWeight,e.fontShape);return Ft(text,C,o,e,c.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:function(t,e){var n=Ut(["mspace"],[],e),r=Lt(t,e);return n.style.marginRight=r+"em",n},staticSvg:function(t,e){var n=Ht[t],r=n[0],o=n[1],c=n[2],path=new G(r),l=new W([path],{width:o+"em",height:c+"em",style:"width:"+o+"em",viewBox:"0 0 "+1e3*o+" "+1e3*c,preserveAspectRatio:"xMinYMin"}),span=jt(["overlay"],[l],e);return span.height=c,span.style.height=c+"em",span.style.width=o+"em",span},svgData:Ht,tryCombineChars:function(t){for(var i=0;i<t.length-1;i++){var e=t[i],n=t[i+1];e instanceof j&&n instanceof j&&zt(e,n)&&(e.text+=n.text,e.height=Math.max(e.height,n.height),e.depth=Math.max(e.depth,n.depth),e.italic=n.italic,t.splice(i+1,1),i--)}return t}};function Yt(t,e){var n=Xt(t,e);if(!n)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return n}function Xt(t,e){return t&&t.type===e?t:null}function $t(t,e){var n=function(t,e){return t&&"atom"===t.type&&t.family===e?t:null}(t,e);if(!n)throw new Error('Expected node of type "atom" and family "'+e+'", but got '+(t?"atom"===t.type?"atom of family "+t.family:"node of type "+t.type:String(t)));return n}function Jt(t){var e=Zt(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Zt(t){return t&&("atom"===t.type||tt.hasOwnProperty(t.type))?t:null}var te={number:3,unit:"mu"},ee={number:4,unit:"mu"},ne={number:5,unit:"mu"},re={mord:{mop:te,mbin:ee,mrel:ne,minner:te},mop:{mord:te,mop:te,mrel:ne,minner:te},mbin:{mord:ee,mop:ee,mopen:ee,minner:ee},mrel:{mord:ne,mop:ne,mopen:ne,minner:ne},mopen:{},mclose:{mop:te,mbin:ee,mrel:ne,minner:te},mpunct:{mord:te,mop:te,mrel:ne,mopen:te,mclose:te,mpunct:te,minner:te},minner:{mord:te,mop:te,mbin:ee,mrel:ne,mopen:te,mpunct:te,minner:te}},oe={mord:{mop:te},mop:{mord:te,mop:te},mbin:{},mrel:{},mopen:{},mclose:{mop:te},mpunct:{},minner:{mop:te}},ie={},ae={},se={};function ue(t){for(var e=t.type,n=t.names,r=t.props,o=t.handler,c=t.htmlBuilder,l=t.mathmlBuilder,data={type:e,numArgs:r.numArgs,argTypes:r.argTypes,greediness:void 0===r.greediness?1:r.greediness,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,handler:o},i=0;i<n.length;++i)ie[n[i]]=data;e&&(c&&(ae[e]=c),l&&(se[e]=l))}function ce(t){ue({type:t.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:t.htmlBuilder,mathmlBuilder:t.mathmlBuilder})}var le=function(t){var e=Xt(t,"ordgroup");return e?e.body:[t]},he=Kt.makeSpan,fe=["leftmost","mbin","mopen","mrel","mop","mpunct"],pe=["rightmost","mrel","mclose","mpunct"],de={display:C.DISPLAY,text:C.TEXT,script:C.SCRIPT,scriptscript:C.SCRIPTSCRIPT},me={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ye=function(t,e,n,r){void 0===r&&(r=[null,null]);for(var o=[],i=0;i<t.length;i++){var output=Se(t[i],e);if(output instanceof O){var c=output.children;o.push.apply(o,c)}else o.push(output)}if(!n)return o;var l=e;if(1===t.length){var h=Xt(t[0],"sizing")||Xt(t[0],"styling");h&&("sizing"===h.type?l=e.havingSize(h.size):"styling"===h.type&&(l=e.havingStyle(de[h.style])))}var f=he([r[0]||"leftmost"],[],e),d=he([r[1]||"rightmost"],[],e);return ge(o,(function(t,e){var n=e.classes[0],r=t.classes[0];"mbin"===n&&y.contains(pe,r)?e.classes[0]="mord":"mbin"===r&&y.contains(fe,n)&&(t.classes[0]="mord")}),{node:f},d),ge(o,(function(t,e){var n=be(e),r=be(t),o=n&&r?t.hasClass("mtight")?oe[n][r]:re[n][r]:null;if(o)return Kt.makeGlue(o,l)}),{node:f},d),o},ge=function t(e,n,r,o){o&&e.push(o);for(var i=0;i<e.length;i++){var c=e[i],l=ve(c);if(l)t(l.children,n,r);else if("mspace"!==c.classes[0]){var h=n(c,r.node);h&&(r.insertAfter?r.insertAfter(h):(e.unshift(h),i++)),r.node=c,r.insertAfter=function(t){return function(n){e.splice(t+1,0,n),i++}}(i)}}o&&e.pop()},ve=function(t){return t instanceof O||t instanceof z?t:null},be=function(t,e){return t?(e&&(t=function t(e,n){var r=ve(e);if(r){var o=r.children;if(o.length){if("right"===n)return t(o[o.length-1],"right");if("left"===n)return t(o[0],"left")}}return e}(t,e)),me[t.classes[0]]||null):null},we=function(t,e){var n=["nulldelimiter"].concat(t.baseSizingClasses());return he(e.concat(n))},Se=function(t,e,n){if(!t)return he();if(ae[t.type]){var r=ae[t.type](t,e);if(n&&e.size!==n.size){r=he(e.sizingClasses(n),[r],e);var o=e.sizeMultiplier/n.sizeMultiplier;r.height*=o,r.depth*=o}return r}throw new l("Got group of unknown type: '"+t.type+"'")};function xe(t,e){var body=he(["base"],t,e),n=he(["strut"]);return n.style.height=body.height+body.depth+"em",n.style.verticalAlign=-body.depth+"em",body.children.unshift(n),body}function _e(t,e){var n=null;1===t.length&&"tag"===t[0].type&&(n=t[0].tag,t=t[0].body);for(var r,o=ye(t,e,!0),c=[],l=[],i=0;i<o.length;i++)if(l.push(o[i]),o[i].hasClass("mbin")||o[i].hasClass("mrel")||o[i].hasClass("allowbreak")){for(var h=!1;i<o.length-1&&o[i+1].hasClass("mspace")&&!o[i+1].hasClass("newline");)i++,l.push(o[i]),o[i].hasClass("nobreak")&&(h=!0);h||(c.push(xe(l,e)),l=[])}else o[i].hasClass("newline")&&(l.pop(),l.length>0&&(c.push(xe(l,e)),l=[]),c.push(o[i]));l.length>0&&c.push(xe(l,e)),n&&((r=xe(ye(n,e,!0))).classes=["tag"],c.push(r));var f=he(["katex-html"],c);if(f.setAttribute("aria-hidden","true"),r){var d=r.children[0];d.style.height=f.height+f.depth+"em",d.style.verticalAlign=-f.depth+"em"}return f}function Te(t){return new O(t)}var Ee=function(){function t(t,e){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=t,this.attributes={},this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.getAttribute=function(t){return this.attributes[t]},e.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},e.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=y.escape(this.attributes[e]),t+='"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">"},e.toText=function(){return this.children.map((function(t){return t.toText()})).join("")},t}(),Ie=function(){function t(text){this.text=void 0,this.text=text}var e=t.prototype;return e.toNode=function(){return document.createTextNode(this.text)},e.toMarkup=function(){return y.escape(this.toText())},e.toText=function(){return this.text},t}(),Ae={MathNode:Ee,TextNode:Ie,SpaceNode:function(){function t(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?"":t>=.1666&&t<=.1667?"":t>=.2222&&t<=.2223?"":t>=.2777&&t<=.2778?"":t>=-.05556&&t<=-.05555?"":t>=-.1667&&t<=-.1666?"":t>=-.2223&&t<=-.2222?"":t>=-.2778&&t<=-.2777?"":null}var e=t.prototype;return e.toNode=function(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",this.width+"em"),t},e.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},e.toText=function(){return this.character?this.character:" "},t}(),newDocumentFragment:Te},Ce=function(text,t,e){return!nt[t][text]||!nt[t][text].replace||55349===text.charCodeAt(0)||lt.hasOwnProperty(text)&&e&&(e.fontFamily&&"tt"===e.fontFamily.substr(4,2)||e.font&&"tt"===e.font.substr(4,2))||(text=nt[t][text].replace),new Ae.TextNode(text)},ke=function(body){return 1===body.length?body[0]:new Ae.MathNode("mrow",body)},Ne=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var n=e.font;if(!n||"mathnormal"===n)return null;var r=t.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var text=t.text;return y.contains(["\\imath","\\jmath"],text)?null:(nt[r][text]&&nt[r][text].replace&&(text=nt[r][text].replace),$(text,Kt.fontMap[n].fontName,r)?Kt.fontMap[n].variant:null)},De=function(t,e,n){if(1===t.length){var r=Oe(t[0],e);return n&&r instanceof Ee&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var o,c=[],i=0;i<t.length;i++){var l=Oe(t[i],e);if(l instanceof Ee&&o instanceof Ee){if("mtext"===l.type&&"mtext"===o.type&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){var h;(h=o.children).push.apply(h,l.children);continue}if("mn"===l.type&&"mn"===o.type){var f;(f=o.children).push.apply(f,l.children);continue}if("mi"===l.type&&1===l.children.length&&"mn"===o.type){var d=l.children[0];if(d instanceof Ie&&"."===d.text){var m;(m=o.children).push.apply(m,l.children);continue}}else if("mi"===o.type&&1===o.children.length){var y=o.children[0];if(y instanceof Ie&&""===y.text&&("mo"===l.type||"mi"===l.type||"mn"===l.type)){var v=l.children[0];v instanceof Ie&&v.text.length>0&&(v.text=v.text.slice(0,1)+""+v.text.slice(1),c.pop())}}}c.push(l),o=l}return c},Me=function(t,e,n){return ke(De(t,e,n))},Oe=function(t,e){if(!t)return new Ae.MathNode("mrow");if(se[t.type])return se[t.type](t,e);throw new l("Got group of unknown type: '"+t.type+"'")};function Re(t,e,n,r){var o,c=De(t,n);o=1===c.length&&c[0]instanceof Ee&&y.contains(["mrow","mtable"],c[0].type)?c[0]:new Ae.MathNode("mrow",c);var l=new Ae.MathNode("annotation",[new Ae.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var h=new Ae.MathNode("semantics",[o,l]),f=new Ae.MathNode("math",[h]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML");var d=r?"katex":"katex-mathml";return Kt.makeSpan([d],[f])}var Pe=function(t){return new Mt({style:t.displayMode?C.DISPLAY:C.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Le=function(t,e){if(e.displayMode){var n=["katex-display"];e.leqno&&n.push("leqno"),e.fleqn&&n.push("fleqn"),t=Kt.makeSpan(n,[t])}return t},qe=function(t,e,n){var r,o=Pe(n);if("mathml"===n.output)return Re(t,e,o,!0);if("html"===n.output){var c=_e(t,o);r=Kt.makeSpan(["katex"],[c])}else{var l=Re(t,e,o,!1),h=_e(t,o);r=Kt.makeSpan(["katex"],[l,h])}return Le(r,n)},Be={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:""},Fe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ze=function(t,label,e,n){var img,r=t.height+t.depth+2*e;if(/fbox|color/.test(label)){if(img=Kt.makeSpan(["stretchy",label],[],n),"fbox"===label){var o=n.color&&n.getColor();o&&(img.style.borderColor=o)}}else{var c=[];/^[bx]cancel$/.test(label)&&c.push(new Q({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(label)&&c.push(new Q({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new W(c,{width:"100%",height:r+"em"});img=Kt.makeSvgSpan([],[l],n)}return img.height=r,img.style.height=r+"em",img},Ve=function(label){var t=new Ae.MathNode("mo",[new Ae.TextNode(Be[label.substr(1)])]);return t.setAttribute("stretchy","true"),t},Ue=function(t,e){var n=function(){var n=4e5,label=t.label.substr(1);if(y.contains(["widehat","widecheck","widetilde","utilde"],label)){var r,o,c,l="ordgroup"===(v=t.base).type?v.body.length:1;if(l>5)"widehat"===label||"widecheck"===label?(r=420,n=2364,c=.42,o=label+"4"):(r=312,n=2340,c=.34,o="tilde4");else{var h=[1,1,2,2,3,3][l];"widehat"===label||"widecheck"===label?(n=[0,1062,2364,2364,2364][h],r=[0,239,300,360,420][h],c=[0,.24,.3,.3,.36,.42][h],o=label+h):(n=[0,600,1033,2339,2340][h],r=[0,260,286,306,312][h],c=[0,.26,.286,.3,.306,.34][h],o="tilde"+h)}var path=new G(o),f=new W([path],{width:"100%",height:c+"em",viewBox:"0 0 "+n+" "+r,preserveAspectRatio:"none"});return{span:Kt.makeSvgSpan([],[f],e),minWidth:0,height:c}}var d,m,v,w=[],data=Fe[label],S=data[0],x=data[1],_=data[2],T=_/1e3,E=S.length;if(1===E)d=["hide-tail"],m=[data[3]];else if(2===E)d=["halfarrow-left","halfarrow-right"],m=["xMinYMin","xMaxYMin"];else{if(3!==E)throw new Error("Correct katexImagesData or update code here to support\n                    "+E+" children.");d=["brace-left","brace-center","brace-right"],m=["xMinYMin","xMidYMin","xMaxYMin"]}for(var i=0;i<E;i++){var I=new G(S[i]),A=new W([I],{width:"400em",height:T+"em",viewBox:"0 0 "+n+" "+_,preserveAspectRatio:m[i]+" slice"}),C=Kt.makeSvgSpan([d[i]],[A],e);if(1===E)return{span:C,minWidth:x,height:T};C.style.height=T+"em",w.push(C)}return{span:Kt.makeSpan(["stretchy"],w,e),minWidth:x,height:T}}(),span=n.span,r=n.minWidth,o=n.height;return span.height=o,span.style.height=o+"em",r>0&&(span.style.minWidth=r+"em"),span},je=function(t,e){var base,n,r,o=Xt(t,"supsub");o?(base=(n=Yt(o.base,"accent")).base,o.base=base,r=function(t){if(t instanceof F)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(Se(o,e)),o.base=n):base=(n=Yt(t,"accent")).base;var body=Se(base,e.havingCrampedStyle()),c=0;if(n.isShifty&&y.isCharacterBox(base)){var l=y.getBaseElem(base);c=H(Se(l,e.havingCrampedStyle())).skew}var h,f=Math.min(body.height,e.fontMetrics().xHeight);if(n.isStretchy)h=Ue(n,e),h=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+2*c+"em)",marginLeft:2*c+"em"}:void 0}]},e);else{var d,m;"\\vec"===n.label?(d=Kt.staticSvg("vec",e),m=Kt.svgData.vec[1]):((d=H(d=Kt.makeOrd({mode:n.mode,text:n.label},e,"textord"))).italic=0,m=d.width),h=Kt.makeSpan(["accent-body"],[d]);var v="\\textcircled"===n.label;v&&(h.classes.push("accent-full"),f=body.height);var w=c;v||(w-=m/2),h.style.left=w+"em","\\textcircled"===n.label&&(h.style.top=".2em"),h=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"kern",size:-f},{type:"elem",elem:h}]},e)}var S=Kt.makeSpan(["mord","accent"],[h],e);return r?(r.children[0]=S,r.height=Math.max(S.height,r.height),r.classes[0]="mord",r):S},We=function(t,e){var n=t.isStretchy?Ve(t.label):new Ae.MathNode("mo",[Ce(t.label,t.mode)]),r=new Ae.MathNode("mover",[Oe(t.base,e),n]);return r.setAttribute("accent","true"),r},Ge=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(t){return"\\"+t})).join("|"));ue({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(t,e){var base=e[0],n=!Ge.test(t.funcName),r=!n||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:r,base:base}},htmlBuilder:je,mathmlBuilder:We}),ue({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var base=e[0];return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:!1,isShifty:!0,base:base}},htmlBuilder:je,mathmlBuilder:We}),ue({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(t,e){var n=t.parser,r=t.funcName,base=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:base}},htmlBuilder:function(t,e){var n=Se(t.base,e),r=Ue(t,e),o="\\utilde"===t.label?.12:0,c=Kt.makeVList({positionType:"bottom",positionData:r.height+o,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:o},{type:"elem",elem:n}]},e);return Kt.makeSpan(["mord","accentunder"],[c],e)},mathmlBuilder:function(t,e){var n=Ve(t.label),r=new Ae.MathNode("munder",[Oe(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var Qe=function(t){var e=new Ae.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ue({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,n){var r=t.parser,o=t.funcName;return{type:"xArrow",mode:r.mode,label:o,body:e[0],below:n[0]}},htmlBuilder:function(t,e){var n,style=e.style,r=e.havingStyle(style.sup()),o=Kt.wrapFragment(Se(t.body,r,e),e);o.classes.push("x-arrow-pad"),t.below&&(r=e.havingStyle(style.sub()),(n=Kt.wrapFragment(Se(t.below,r,e),e)).classes.push("x-arrow-pad"));var c,l=Ue(t,e),h=-e.fontMetrics().axisHeight+.5*l.height,f=-e.fontMetrics().axisHeight-.5*l.height-.111;if((o.depth>.25||"\\xleftequilibrium"===t.label)&&(f-=o.depth),n){var d=-e.fontMetrics().axisHeight+n.height+.5*l.height+.111;c=Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:f},{type:"elem",elem:l,shift:h},{type:"elem",elem:n,shift:d}]},e)}else c=Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:f},{type:"elem",elem:l,shift:h}]},e);return c.children[0].children[0].children[1].classes.push("svg-align"),Kt.makeSpan(["mrel","x-arrow"],[c],e)},mathmlBuilder:function(t,e){var n,r=Ve(t.label);if(t.body){var o=Qe(Oe(t.body,e));if(t.below){var c=Qe(Oe(t.below,e));n=new Ae.MathNode("munderover",[r,c,o])}else n=new Ae.MathNode("mover",[r,o])}else if(t.below){var l=Qe(Oe(t.below,e));n=new Ae.MathNode("munder",[r,l])}else n=Qe(),n=new Ae.MathNode("mover",[r,n]);return n}}),ue({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){for(var n=t.parser,r=Yt(e[0],"ordgroup").body,o="",i=0;i<r.length;i++)o+=Yt(r[i],"textord").text;var code=parseInt(o);if(isNaN(code))throw new l("\\@char has non-numeric argument "+o);return{type:"textord",mode:n.mode,text:String.fromCharCode(code)}}});var He=function(t,e){var n=ye(t.body,e.withColor(t.color),!1);return Kt.makeFragment(n)},Ke=function(t,e){var n=De(t.body,e.withColor(t.color)),r=new Ae.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};ue({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(t,e){var n=t.parser,r=Yt(e[0],"color-token").color,body=e[1];return{type:"color",mode:n.mode,color:r,body:le(body)}},htmlBuilder:He,mathmlBuilder:Ke}),ue({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(t,e){var n=t.parser,r=t.breakOnTokenText,o=Yt(e[0],"color-token").color;n.gullet.macros.set("\\current@color",o);var body=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:o,body:body}},htmlBuilder:He,mathmlBuilder:Ke}),ue({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e,n){var r=t.parser,o=t.funcName,c=n[0],l="\\cr"===o,h=!1;return l||(h=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:r.mode,newLine:h,newRow:l,size:c&&Yt(c,"size").value}},htmlBuilder:function(t,e){if(t.newRow)throw new l("\\cr valid only within a tabular/array environment");var span=Kt.makeSpan(["mspace"],[],e);return t.newLine&&(span.classes.push("newline"),t.size&&(span.style.marginTop=Lt(t.size,e)+"em")),span},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",Lt(t.size,e)+"em")),n}});var Ye=function(symbol,t,e){var n=$(nt.math[symbol]&&nt.math[symbol].replace||symbol,t,e);if(!n)throw new Error("Unsupported symbol "+symbol+" and font size "+t+".");return n},Xe=function(t,e,n,r){var o=n.havingBaseStyle(e),span=Kt.makeSpan(r.concat(o.sizingClasses(n)),[t],n),c=o.sizeMultiplier/n.sizeMultiplier;return span.height*=c,span.depth*=c,span.maxFontSize=o.sizeMultiplier,span},$e=function(span,t,style){var e=t.havingBaseStyle(style),n=(1-t.sizeMultiplier/e.sizeMultiplier)*t.fontMetrics().axisHeight;span.classes.push("delimcenter"),span.style.top=n+"em",span.height-=n,span.depth+=n},Je=function(t,e,n,r,o,c){var l=function(t,e,n,r){return Kt.makeSymbol(t,"Size"+e+"-Regular",n,r)}(t,e,o,r),span=Xe(Kt.makeSpan(["delimsizing","size"+e],[l],r),C.TEXT,r,c);return n&&$e(span,r,C.TEXT),span},Ze=function(symbol,t,e){var n;return n="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:Kt.makeSpan(["delimsizinginner",n],[Kt.makeSpan([],[Kt.makeSymbol(symbol,t,e)])])}},tn={type:"kern",size:-.005},en=function(t,e,n,r,o,c){var l,h,f,d;l=f=d=t,h=null;var m="Size1-Regular";"\\uparrow"===t?f=d="":"\\Uparrow"===t?f=d="":"\\downarrow"===t?l=f="":"\\Downarrow"===t?l=f="":"\\updownarrow"===t?(l="\\uparrow",f="",d="\\downarrow"):"\\Updownarrow"===t?(l="\\Uparrow",f="",d="\\Downarrow"):"["===t||"\\lbrack"===t?(l="",f="",d="",m="Size4-Regular"):"]"===t||"\\rbrack"===t?(l="",f="",d="",m="Size4-Regular"):"\\lfloor"===t||""===t?(f=l="",d="",m="Size4-Regular"):"\\lceil"===t||""===t?(l="",f=d="",m="Size4-Regular"):"\\rfloor"===t||""===t?(f=l="",d="",m="Size4-Regular"):"\\rceil"===t||""===t?(l="",f=d="",m="Size4-Regular"):"("===t||"\\lparen"===t?(l="",f="",d="",m="Size4-Regular"):")"===t||"\\rparen"===t?(l="",f="",d="",m="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(l="",h="",d="",f="",m="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(l="",h="",d="",f="",m="Size4-Regular"):"\\lgroup"===t||""===t?(l="",d="",f="",m="Size4-Regular"):"\\rgroup"===t||""===t?(l="",d="",f="",m="Size4-Regular"):"\\lmoustache"===t||""===t?(l="",d="",f="",m="Size4-Regular"):"\\rmoustache"!==t&&""!==t||(l="",d="",f="",m="Size4-Regular");var y=Ye(l,m,o),v=y.height+y.depth,w=Ye(f,m,o),S=w.height+w.depth,x=Ye(d,m,o),_=x.height+x.depth,T=0,E=1;if(null!==h){var I=Ye(h,m,o);T=I.height+I.depth,E=2}var A=v+_+T,k=Math.max(0,Math.ceil((e-A)/(E*S))),N=A+k*E*S,D=r.fontMetrics().axisHeight;n&&(D*=r.sizeMultiplier);var M=N/2-D,O=.005*(k+1)-S,R=[];if(R.push(Ze(d,m,o)),null===h)for(var i=0;i<k;i++)R.push(tn),R.push(Ze(f,m,o));else{for(var P=0;P<k;P++)R.push(tn),R.push(Ze(f,m,o));R.push({type:"kern",size:O}),R.push(Ze(f,m,o)),R.push(tn),R.push(Ze(h,m,o));for(var L=0;L<k;L++)R.push(tn),R.push(Ze(f,m,o))}R.push({type:"kern",size:O}),R.push(Ze(f,m,o)),R.push(tn),R.push(Ze(l,m,o));var B=r.havingBaseStyle(C.TEXT),F=Kt.makeVList({positionType:"bottom",positionData:M,children:R},B);return Xe(Kt.makeSpan(["delimsizing","mult"],[F],B),C.TEXT,r,c)},nn=function(t,e,n,r,o){var path=function(t,e,n){e*=1e3;var path="";switch(t){case"sqrtMain":path=function(t,e){return"M95,"+(622+t+e)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize1":path=function(t,e){return"M263,"+(601+t+e)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize2":path=function(t,e){return"M983 "+(10+t+e)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize3":path=function(t,e){return"M424,"+(2398+t+e)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" "+e+"\nh400000v"+(40+t)+"h-400000z"}(e,80);break;case"sqrtSize4":path=function(t,e){return"M473,"+(2713+t+e)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}(e,80);break;case"sqrtTall":path=function(t,e,n){return"M702 "+(t+e)+"H400000"+(40+t)+"\nH742v"+(n-54-e-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+e+"H400000v"+(40+t)+"H742z"}(e,80,n)}return path}(t,r,n),c=new G(t,path),svg=new W([c],{width:"400em",height:e+"em",viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Kt.makeSvgSpan(["hide-tail"],[svg],o)},rn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],on=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],an=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sn=[0,1.2,1.8,2.4,3],un=[{type:"small",style:C.SCRIPTSCRIPT},{type:"small",style:C.SCRIPT},{type:"small",style:C.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],cn=[{type:"small",style:C.SCRIPTSCRIPT},{type:"small",style:C.SCRIPT},{type:"small",style:C.TEXT},{type:"stack"}],ln=[{type:"small",style:C.SCRIPTSCRIPT},{type:"small",style:C.SCRIPT},{type:"small",style:C.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],hn=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},fn=function(t,e,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var o=Ye(t,hn(n[i]),"math"),c=o.height+o.depth;if("small"===n[i].type&&(c*=r.havingBaseStyle(n[i].style).sizeMultiplier),c>e)return n[i]}return n[n.length-1]},pn=function(t,e,n,r,o,c){var l;"<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),l=y.contains(an,t)?un:y.contains(rn,t)?ln:cn;var h=fn(t,e,l,r);return"small"===h.type?function(t,style,e,n,r,o){var text=Kt.makeSymbol(t,"Main-Regular",r,n),span=Xe(text,style,n,o);return e&&$e(span,n,style),span}(t,h.style,n,r,o,c):"large"===h.type?Je(t,h.size,n,r,o,c):en(t,e,n,r,o,c)},dn=function(t,e){var span,n,r=e.havingBaseSizing(),o=fn("\\surd",t*r.sizeMultiplier,ln,r),c=r.sizeMultiplier,l=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),h=0,f=0,d=0;return"small"===o.type?(t<1?c=1:t<1.4&&(c=.7),f=(1+l)/c,(span=nn("sqrtMain",h=(1+l+.08)/c,d=1e3+1e3*l+80,l,e)).style.minWidth="0.853em",n=.833/c):"large"===o.type?(d=1080*sn[o.size],f=(sn[o.size]+l)/c,h=(sn[o.size]+l+.08)/c,(span=nn("sqrtSize"+o.size,h,d,l,e)).style.minWidth="1.02em",n=1/c):(h=t+l+.08,f=t+l,d=Math.floor(1e3*t+l)+80,(span=nn("sqrtTall",h,d,l,e)).style.minWidth="0.742em",n=1.056),span.height=f,span.style.height=h+"em",{span:span,advanceWidth:n,ruleWidth:(e.fontMetrics().sqrtRuleThickness+l)*c}},mn=function(t,e,n,r,o){if("<"===t||"\\lt"===t||""===t?t="\\langle":">"!==t&&"\\gt"!==t&&""!==t||(t="\\rangle"),y.contains(rn,t)||y.contains(an,t))return Je(t,e,!1,n,r,o);if(y.contains(on,t))return en(t,sn[e],!1,n,r,o);throw new l("Illegal delimiter: '"+t+"'")},yn=pn,gn=function(t,e,n,r,o,c){var l=r.fontMetrics().axisHeight*r.sizeMultiplier,h=5/r.fontMetrics().ptPerEm,f=Math.max(e-l,n+l),d=Math.max(f/500*901,2*f-h);return pn(t,d,!0,r,o,c)},vn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},bn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function wn(t,e){var n=Zt(t);if(n&&y.contains(bn,n.text))return n;throw new l("Invalid delimiter: '"+(n?n.text:JSON.stringify(t))+"' after '"+e.funcName+"'",t)}function Sn(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ue({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(t,e){var n=wn(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:vn[t.funcName].size,mclass:vn[t.funcName].mclass,delim:n.text}},htmlBuilder:function(t,e){return"."===t.delim?Kt.makeSpan([t.mclass]):mn(t.delim,t.size,e,t.mode,[t.mclass])},mathmlBuilder:function(t){var e=[];"."!==t.delim&&e.push(Ce(t.delim,t.mode));var n=new Ae.MathNode("mo",e);return"mopen"===t.mclass||"mclose"===t.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n}}),ue({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(t,e){var n=t.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new l("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:wn(e[0],t).text,color:n}}}),ue({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(t,e){var n=wn(e[0],t),r=t.parser;++r.leftrightDepth;var body=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=Yt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:body,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:function(t,e){Sn(t);for(var n,r,o=ye(t.body,e,!0,["mopen","mclose"]),c=0,l=0,h=!1,i=0;i<o.length;i++)o[i].isMiddle?h=!0:(c=Math.max(o[i].height,c),l=Math.max(o[i].depth,l));if(c*=e.sizeMultiplier,l*=e.sizeMultiplier,n="."===t.left?we(e,["mopen"]):gn(t.left,c,l,e,t.mode,["mopen"]),o.unshift(n),h)for(var f=1;f<o.length;f++){var d=o[f].isMiddle;d&&(o[f]=gn(d.delim,c,l,d.options,t.mode,[]))}if("."===t.right)r=we(e,["mclose"]);else{var m=t.rightColor?e.withColor(t.rightColor):e;r=gn(t.right,c,l,m,t.mode,["mclose"])}return o.push(r),Kt.makeSpan(["minner"],o,e)},mathmlBuilder:function(t,e){Sn(t);var n=De(t.body,e);if("."!==t.left){var r=new Ae.MathNode("mo",[Ce(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==t.right){var o=new Ae.MathNode("mo",[Ce(t.right,t.mode)]);o.setAttribute("fence","true"),t.rightColor&&o.setAttribute("mathcolor",t.rightColor),n.push(o)}return ke(n)}}),ue({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(t,e){var n=wn(e[0],t);if(!t.parser.leftrightDepth)throw new l("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:function(t,e){var n;if("."===t.delim)n=we(e,[]);else{n=mn(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:function(t,e){var n="\\vert"===t.delim||"|"===t.delim?Ce("|","text"):Ce(t.delim,t.mode),r=new Ae.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var xn=function(t,e){var img,n,r=Kt.wrapFragment(Se(t.body,e),e),label=t.label.substr(1),o=e.sizeMultiplier,c=0,l=y.isCharacterBox(t.body);if("sout"===label)(img=Kt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/o,c=-.5*e.fontMetrics().xHeight;else{/cancel/.test(label)?l||r.classes.push("cancel-pad"):r.classes.push("boxpad");var h=0,f=0;/box/.test(label)?(f=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),h=e.fontMetrics().fboxsep+("colorbox"===label?0:f)):h=l?.2:0,img=ze(r,label,h,e),/fbox|boxed|fcolorbox/.test(label)&&(img.style.borderStyle="solid",img.style.borderWidth=f+"em"),c=r.depth+h,t.backgroundColor&&(img.style.backgroundColor=t.backgroundColor,t.borderColor&&(img.style.borderColor=t.borderColor))}return n=t.backgroundColor?Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:img,shift:c},{type:"elem",elem:r,shift:0}]},e):Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:img,shift:c,wrapperClasses:/cancel/.test(label)?["svg-align"]:[]}]},e),/cancel/.test(label)&&(n.height=r.height,n.depth=r.depth),/cancel/.test(label)&&!l?Kt.makeSpan(["mord","cancel-lap"],[n],e):Kt.makeSpan(["mord"],[n],e)},_n=function(t,e){var n=0,r=new Ae.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Oe(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===t.label){var o=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+o+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};ue({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(t,e,n){var r=t.parser,o=t.funcName,c=Yt(e[0],"color-token").color,body=e[1];return{type:"enclose",mode:r.mode,label:o,backgroundColor:c,body:body}},htmlBuilder:xn,mathmlBuilder:_n}),ue({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(t,e,n){var r=t.parser,o=t.funcName,c=Yt(e[0],"color-token").color,l=Yt(e[1],"color-token").color,body=e[2];return{type:"enclose",mode:r.mode,label:o,backgroundColor:l,borderColor:c,body:body}},htmlBuilder:xn,mathmlBuilder:_n}),ue({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\fbox",body:e[0]}}}),ue({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(t,e,n){var r=t.parser,o=t.funcName,body=e[0];return{type:"enclose",mode:r.mode,label:o,body:body}},htmlBuilder:xn,mathmlBuilder:_n});var Tn={};function En(t){for(var e=t.type,n=t.names,r=t.props,o=t.handler,c=t.htmlBuilder,l=t.mathmlBuilder,data={type:e,numArgs:r.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:o},i=0;i<n.length;++i)Tn[n[i]]=data;c&&(ae[e]=c),l&&(se[e]=l)}function In(t){var e=[];t.consumeSpaces();for(var n=t.fetch().text;"\\hline"===n||"\\hdashline"===n;)t.consume(),e.push("\\hdashline"===n),t.consumeSpaces(),n=t.fetch().text;return e}function An(t,e,style){var n=e.hskipBeforeAndAfter,r=e.addJot,o=e.cols,c=e.arraystretch,h=e.colSeparationType;if(t.gullet.beginGroup(),t.gullet.macros.set("\\\\","\\cr"),!c){var f=t.gullet.expandMacroAsText("\\arraystretch");if(null==f)c=1;else if(!(c=parseFloat(f))||c<0)throw new l("Invalid \\arraystretch: "+f)}t.gullet.beginGroup();var d=[],body=[d],m=[],y=[];for(y.push(In(t));;){var v=t.parseExpression(!1,"\\cr");t.gullet.endGroup(),t.gullet.beginGroup(),v={type:"ordgroup",mode:t.mode,body:v},style&&(v={type:"styling",mode:t.mode,style:style,body:[v]}),d.push(v);var w=t.fetch().text;if("&"===w)t.consume();else{if("\\end"===w){1===d.length&&"styling"===v.type&&0===v.body[0].body.length&&body.pop(),y.length<body.length+1&&y.push([]);break}if("\\cr"!==w)throw new l("Expected & or \\\\ or \\cr or \\end",t.nextToken);var S=Yt(t.parseFunction(),"cr");m.push(S.size),y.push(In(t)),d=[],body.push(d)}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:r,arraystretch:c,body:body,cols:o,rowGaps:m,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:h}}function Cn(t){return"d"===t.substr(0,1)?"display":"text"}var kn=function(t,e){var n,r,o=t.body.length,c=t.hLinesBeforeRow,h=0,body=new Array(o),f=[],d=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),m=1/e.fontMetrics().ptPerEm,v=5*m;t.colSeparationType&&"small"===t.colSeparationType&&(v=e.havingStyle(C.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var w=12*m,S=3*m,x=t.arraystretch*w,_=.7*x,T=.3*x,E=0;function I(t){for(var i=0;i<t.length;++i)i>0&&(E+=.25),f.push({pos:E,isDashed:t[i]})}for(I(c[0]),n=0;n<t.body.length;++n){var A=t.body[n],k=_,N=T;h<A.length&&(h=A.length);var D=new Array(A.length);for(r=0;r<A.length;++r){var M=Se(A[r],e);N<M.depth&&(N=M.depth),k<M.height&&(k=M.height),D[r]=M}var O=t.rowGaps[n],R=0;O&&(R=Lt(O,e))>0&&(N<(R+=T)&&(N=R),R=0),t.addJot&&(N+=S),D.height=k,D.depth=N,E+=k,D.pos=E,E+=N+R,body[n]=D,I(c[n+1])}var P,L,B=E/2+e.fontMetrics().axisHeight,F=t.cols||[],z=[];for(r=0,L=0;r<h||L<F.length;++r,++L){for(var V=F[L]||{},U=!0;"separator"===V.type;){if(U||((P=Kt.makeSpan(["arraycolsep"],[])).style.width=e.fontMetrics().doubleRuleSep+"em",z.push(P)),"|"!==V.separator&&":"!==V.separator)throw new l("Invalid separator type: "+V.separator);var j="|"===V.separator?"solid":"dashed",W=Kt.makeSpan(["vertical-separator"],[],e);W.style.height=E+"em",W.style.borderRightWidth=d+"em",W.style.borderRightStyle=j,W.style.margin="0 -"+d/2+"em",W.style.verticalAlign=-(E-B)+"em",z.push(W),V=F[++L]||{},U=!1}if(!(r>=h)){var G=void 0;(r>0||t.hskipBeforeAndAfter)&&0!==(G=y.deflt(V.pregap,v))&&((P=Kt.makeSpan(["arraycolsep"],[])).style.width=G+"em",z.push(P));var col=[];for(n=0;n<o;++n){var Q=body[n],H=Q[r];if(H){var K=Q.pos-B;H.depth=Q.depth,H.height=Q.height,col.push({type:"elem",elem:H,shift:K})}}col=Kt.makeVList({positionType:"individualShift",children:col},e),col=Kt.makeSpan(["col-align-"+(V.align||"c")],[col]),z.push(col),(r<h-1||t.hskipBeforeAndAfter)&&0!==(G=y.deflt(V.postgap,v))&&((P=Kt.makeSpan(["arraycolsep"],[])).style.width=G+"em",z.push(P))}}if(body=Kt.makeSpan(["mtable"],z),f.length>0){for(var line=Kt.makeLineSpan("hline",e,d),Y=Kt.makeLineSpan("hdashline",e,d),X=[{type:"elem",elem:body,shift:0}];f.length>0;){var $=f.pop(),J=$.pos-B;$.isDashed?X.push({type:"elem",elem:Y,shift:J}):X.push({type:"elem",elem:line,shift:J})}body=Kt.makeVList({positionType:"individualShift",children:X},e)}return Kt.makeSpan(["mord"],[body],e)},Nn={c:"center ",l:"left ",r:"right "},Dn=function(t,e){var table=new Ae.MathNode("mtable",t.body.map((function(t){return new Ae.MathNode("mtr",t.map((function(t){return new Ae.MathNode("mtd",[Oe(t,e)])})))}))),n=.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0);table.setAttribute("rowspacing",n+"em");var r="",o="";if(t.cols){var c=t.cols,l="",h=!1,f=0,d=c.length;"separator"===c[0].type&&(r+="top ",f=1),"separator"===c[c.length-1].type&&(r+="bottom ",d-=1);for(var i=f;i<d;i++)"align"===c[i].type?(o+=Nn[c[i].align],h&&(l+="none "),h=!0):"separator"===c[i].type&&h&&(l+="|"===c[i].separator?"solid ":"dashed ",h=!1);table.setAttribute("columnalign",o.trim()),/[sd]/.test(l)&&table.setAttribute("columnlines",l.trim())}if("align"===t.colSeparationType){for(var m=t.cols||[],y="",v=1;v<m.length;v++)y+=v%2?"0em ":"1em ";table.setAttribute("columnspacing",y.trim())}else"alignat"===t.colSeparationType?table.setAttribute("columnspacing","0em"):"small"===t.colSeparationType?table.setAttribute("columnspacing","0.2778em"):table.setAttribute("columnspacing","1em");var w="",S=t.hLinesBeforeRow;r+=S[0].length>0?"left ":"",r+=S[S.length-1].length>0?"right ":"";for(var x=1;x<S.length-1;x++)w+=0===S[x].length?"none ":S[x][0]?"dashed ":"solid ";return/[sd]/.test(w)&&table.setAttribute("rowlines",w.trim()),""!==r&&(table=new Ae.MathNode("menclose",[table])).setAttribute("notation",r.trim()),t.arraystretch&&t.arraystretch<1&&(table=new Ae.MathNode("mstyle",[table])).setAttribute("scriptlevel","1"),table},Mn=function(t,e){var n,r=[],o=An(t.parser,{cols:r,addJot:!0},"display"),c=0,h={type:"ordgroup",mode:t.mode,body:[]},f=Xt(e[0],"ordgroup");if(f){for(var d="",i=0;i<f.body.length;i++)d+=Yt(f.body[i],"textord").text;n=Number(d),c=2*n}var m=!c;o.body.forEach((function(t){for(var e=1;e<t.length;e+=2){var r=Yt(t[e],"styling");Yt(r.body[0],"ordgroup").body.unshift(h)}if(m)c<t.length&&(c=t.length);else{var o=t.length/2;if(n<o)throw new l("Too many math in a row: expected "+n+", but got "+o,t[0])}}));for(var y=0;y<c;++y){var v="r",w=0;y%2==1?v="l":y>0&&m&&(w=1),r[y]={type:"align",align:v,pregap:w,postgap:0}}return o.colSeparationType=m?"align":"alignat",o};En({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(t,e){var n={cols:(Zt(e[0])?[e[0]]:Yt(e[0],"ordgroup").body).map((function(t){var e=Jt(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new l("Unknown column alignment: "+e,t)})),hskipBeforeAndAfter:!0};return An(t.parser,n,Cn(t.envName))},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName],n=An(t.parser,{hskipBeforeAndAfter:!1},Cn(t.envName));return e?{type:"leftright",mode:t.mode,body:[n],left:e[0],right:e[1],rightColor:void 0}:n},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(t){var e=An(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["subarray"],props:{numArgs:1},handler:function(t,e){var n=(Zt(e[0])?[e[0]]:Yt(e[0],"ordgroup").body).map((function(t){var e=Jt(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new l("Unknown column alignment: "+e,t)}));if(n.length>1)throw new l("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=An(t.parser,r,"script")).body[0].length>1)throw new l("{subarray} can contain only one column");return r},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["cases","dcases"],props:{numArgs:0},handler:function(t){var e=An(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Cn(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:"\\{",right:".",rightColor:void 0}},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["aligned"],props:{numArgs:0},handler:Mn,htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["gathered"],props:{numArgs:0},handler:function(t){return An(t.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:kn,mathmlBuilder:Dn}),En({type:"array",names:["alignedat"],props:{numArgs:1},handler:Mn,htmlBuilder:kn,mathmlBuilder:Dn}),ue({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(t,e){throw new l(t.funcName+" valid only within array environment")}});var On=Tn;ue({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(t,e){var n=t.parser,r=t.funcName,o=e[0];if("ordgroup"!==o.type)throw new l("Invalid environment name",o);for(var c="",i=0;i<o.body.length;++i)c+=Yt(o.body[i],"textord").text;if("\\begin"===r){if(!On.hasOwnProperty(c))throw new l("No such environment: "+c,o);var h=On[c],f=n.parseArguments("\\begin{"+c+"}",h),d=f.args,m=f.optArgs,y={mode:n.mode,envName:c,parser:n},v=h.handler(y,d,m);n.expect("\\end",!1);var w=n.nextToken,S=Yt(n.parseFunction(),"environment");if(S.name!==c)throw new l("Mismatch: \\begin{"+c+"} matched by \\end{"+S.name+"}",w);return v}return{type:"environment",mode:n.mode,name:c,nameGroup:o}}});var Rn=Kt.makeSpan;function Pn(t,e){var n=ye(t.body,e,!0);return Rn([t.mclass],n,e)}function Ln(t,e){var n,r=De(t.body,e);return"minner"===t.mclass?Ae.newDocumentFragment(r):("mord"===t.mclass?t.isCharacterBox?(n=r[0]).type="mi":n=new Ae.MathNode("mi",r):(t.isCharacterBox?(n=r[0]).type="mo":n=new Ae.MathNode("mo",r),"mbin"===t.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===t.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"!==t.mclass&&"mclose"!==t.mclass||(n.attributes.lspace="0em",n.attributes.rspace="0em")),n)}ue({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(t,e){var n=t.parser,r=t.funcName,body=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.substr(5),body:le(body),isCharacterBox:y.isCharacterBox(body)}},htmlBuilder:Pn,mathmlBuilder:Ln});var qn=function(t){var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};ue({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(t,e){return{type:"mclass",mode:t.parser.mode,mclass:qn(e[0]),body:[e[1]],isCharacterBox:y.isCharacterBox(e[1])}}}),ue({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(t,e){var n,r=t.parser,o=t.funcName,c=e[1],l=e[0];n="\\stackrel"!==o?qn(c):"mrel";var h={type:"op",mode:c.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==o,body:le(c)},f={type:"supsub",mode:l.mode,base:h,sup:"\\underset"===o?null:l,sub:"\\underset"===o?l:null};return{type:"mclass",mode:r.mode,mclass:n,body:[f],isCharacterBox:y.isCharacterBox(f)}},htmlBuilder:Pn,mathmlBuilder:Ln});var Bn=function(t,e){var n=t.font,r=e.withFont(n);return Se(t.body,r)},Fn=function(t,e){var n=t.font,r=e.withFont(n);return Oe(t.body,r)},zn={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ue({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(t,e){var n=t.parser,r=t.funcName,body=e[0],o=r;return o in zn&&(o=zn[o]),{type:"font",mode:n.mode,font:o.slice(1),body:body}},htmlBuilder:Bn,mathmlBuilder:Fn}),ue({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(t,e){var n=t.parser,body=e[0],r=y.isCharacterBox(body);return{type:"mclass",mode:n.mode,mclass:qn(body),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:body}],isCharacterBox:r}}}),ue({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,o=t.breakOnTokenText,c=n.mode,body=n.parseExpression(!0,o);return{type:"font",mode:c,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:body}}},htmlBuilder:Bn,mathmlBuilder:Fn});var Vn=function(t,e){var style=e;return"display"===t?style=style.id>=C.SCRIPT.id?style.text():C.DISPLAY:"text"===t&&style.size===C.DISPLAY.size?style=C.TEXT:"script"===t?style=C.SCRIPT:"scriptscript"===t&&(style=C.SCRIPTSCRIPT),style},Un=function(t,e){var n,style=Vn(t.size,e.style),r=style.fracNum(),o=style.fracDen();n=e.havingStyle(r);var c=Se(t.numer,n,e);if(t.continued){var l=8.5/e.fontMetrics().ptPerEm,h=3.5/e.fontMetrics().ptPerEm;c.height=c.height<l?l:c.height,c.depth=c.depth<h?h:c.depth}n=e.havingStyle(o);var f,d,m,y,v,w,S,x,_,T,E=Se(t.denom,n,e);if(t.hasBarLine?(t.barSize?(d=Lt(t.barSize,e),f=Kt.makeLineSpan("frac-line",e,d)):f=Kt.makeLineSpan("frac-line",e),d=f.height,m=f.height):(f=null,d=0,m=e.fontMetrics().defaultRuleThickness),style.size===C.DISPLAY.size||"display"===t.size?(y=e.fontMetrics().num1,v=d>0?3*m:7*m,w=e.fontMetrics().denom1):(d>0?(y=e.fontMetrics().num2,v=m):(y=e.fontMetrics().num3,v=3*m),w=e.fontMetrics().denom2),f){var I=e.fontMetrics().axisHeight;y-c.depth-(I+.5*d)<v&&(y+=v-(y-c.depth-(I+.5*d))),I-.5*d-(E.height-w)<v&&(w+=v-(I-.5*d-(E.height-w)));var A=-(I-.5*d);S=Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:E,shift:w},{type:"elem",elem:f,shift:A},{type:"elem",elem:c,shift:-y}]},e)}else{var k=y-c.depth-(E.height-w);k<v&&(y+=.5*(v-k),w+=.5*(v-k)),S=Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:E,shift:w},{type:"elem",elem:c,shift:-y}]},e)}return n=e.havingStyle(style),S.height*=n.sizeMultiplier/e.sizeMultiplier,S.depth*=n.sizeMultiplier/e.sizeMultiplier,x=style.size===C.DISPLAY.size?e.fontMetrics().delim1:e.fontMetrics().delim2,_=null==t.leftDelim?we(e,["mopen"]):yn(t.leftDelim,x,!0,e.havingStyle(style),t.mode,["mopen"]),T=t.continued?Kt.makeSpan([]):null==t.rightDelim?we(e,["mclose"]):yn(t.rightDelim,x,!0,e.havingStyle(style),t.mode,["mclose"]),Kt.makeSpan(["mord"].concat(n.sizingClasses(e)),[_,Kt.makeSpan(["mfrac"],[S]),T],e)},jn=function(t,e){var n=new Ae.MathNode("mfrac",[Oe(t.numer,e),Oe(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var r=Lt(t.barSize,e);n.setAttribute("linethickness",r+"em")}}else n.setAttribute("linethickness","0px");var style=Vn(t.size,e.style);if(style.size!==e.style.size){n=new Ae.MathNode("mstyle",[n]);var o=style.size===C.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(null!=t.leftDelim||null!=t.rightDelim){var c=[];if(null!=t.leftDelim){var l=new Ae.MathNode("mo",[new Ae.TextNode(t.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),c.push(l)}if(c.push(n),null!=t.rightDelim){var h=new Ae.MathNode("mo",[new Ae.TextNode(t.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),c.push(h)}return ke(c)}return n};ue({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(t,e){var n,r=t.parser,o=t.funcName,c=e[0],l=e[1],h=null,f=null,d="auto";switch(o){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,h="(",f=")";break;case"\\\\bracefrac":n=!1,h="\\{",f="\\}";break;case"\\\\brackfrac":n=!1,h="[",f="]";break;default:throw new Error("Unrecognized genfrac command")}switch(o){case"\\cfrac":case"\\dfrac":case"\\dbinom":d="display";break;case"\\tfrac":case"\\tbinom":d="text"}return{type:"genfrac",mode:r.mode,continued:"\\cfrac"===o,numer:c,denom:l,hasBarLine:n,leftDelim:h,rightDelim:f,size:d,barSize:null}},htmlBuilder:Un,mathmlBuilder:jn}),ue({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(t){var e,n=t.parser,r=t.funcName,o=t.token;switch(r){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:e,token:o}}});var Wn=["display","text","script","scriptscript"],Gn=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};ue({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(t,e){var n=t.parser,r=e[4],o=e[5],c=Xt(e[0],"atom");c&&(c=$t(e[0],"open"));var l=c?Gn(c.text):null,h=Xt(e[1],"atom");h&&(h=$t(e[1],"close"));var f,d=h?Gn(h.text):null,m=Yt(e[2],"size"),y=null;f=!!m.isBlank||(y=m.value).number>0;var v="auto",w=Xt(e[3],"ordgroup");if(w){if(w.body.length>0){var S=Yt(w.body[0],"textord");v=Wn[Number(S.text)]}}else w=Yt(e[3],"textord"),v=Wn[Number(w.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:o,continued:!1,hasBarLine:f,barSize:y,leftDelim:l,rightDelim:d,size:v}},htmlBuilder:Un,mathmlBuilder:jn}),ue({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(t,e){var n=t.parser,r=(t.funcName,t.token);return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Yt(e[0],"size").value,token:r}}}),ue({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(t,e){var n=t.parser,r=(t.funcName,e[0]),o=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(Yt(e[1],"infix").size),c=e[2],l=o.number>0;return{type:"genfrac",mode:n.mode,numer:r,denom:c,continued:!1,hasBarLine:l,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Un,mathmlBuilder:jn});var Qn=function(t,e){var n,r,style=e.style,o=Xt(t,"supsub");o?(n=o.sup?Se(o.sup,e.havingStyle(style.sup()),e):Se(o.sub,e.havingStyle(style.sub()),e),r=Yt(o.base,"horizBrace")):r=Yt(t,"horizBrace");var c,body=Se(r.base,e.havingBaseStyle(C.DISPLAY)),l=Ue(r,e);if(r.isOver?(c=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:body},{type:"kern",size:.1},{type:"elem",elem:l}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(c=Kt.makeVList({positionType:"bottom",positionData:body.depth+.1+l.height,children:[{type:"elem",elem:l},{type:"kern",size:.1},{type:"elem",elem:body}]},e)).children[0].children[0].children[0].classes.push("svg-align"),n){var h=Kt.makeSpan(["mord",r.isOver?"mover":"munder"],[c],e);c=r.isOver?Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:n}]},e):Kt.makeVList({positionType:"bottom",positionData:h.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:h}]},e)}return Kt.makeSpan(["mord",r.isOver?"mover":"munder"],[c],e)};ue({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(t,e){var n=t.parser,r=t.funcName;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:Qn,mathmlBuilder:function(t,e){var n=Ve(t.label);return new Ae.MathNode(t.isOver?"mover":"munder",[Oe(t.base,e),n])}}),ue({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(t,e){var n=t.parser,body=e[1],r=Yt(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:n.mode,href:r,body:le(body)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:function(t,e){var n=ye(t.body,e,!1);return Kt.makeAnchor(t.href,[],n,e)},mathmlBuilder:function(t,e){var n=Me(t.body,e);return n instanceof Ee||(n=new Ee("mrow",[n])),n.setAttribute("href",t.href),n}}),ue({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=Yt(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var o=[],i=0;i<r.length;i++){var c=r[i];"~"===c&&(c="\\textasciitilde"),o.push({type:"textord",mode:"text",text:c})}var body={type:"text",mode:n.mode,font:"\\texttt",body:o};return{type:"href",mode:n.mode,href:r,body:le(body)}}}),ue({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(t,e){return{type:"htmlmathml",mode:t.parser.mode,html:le(e[0]),mathml:le(e[1])}},htmlBuilder:function(t,e){var n=ye(t.html,e,!1);return Kt.makeFragment(n)},mathmlBuilder:function(t,e){return Me(t.mathml,e)}});var Hn=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new l("Invalid size: '"+t+"' in \\includegraphics");var data={number:+(e[1]+e[2]),unit:e[3]};if(!Pt(data))throw new l("Invalid unit: '"+data.unit+"' in \\includegraphics.");return data};ue({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(t,e,n){var r=t.parser,o={number:0,unit:"em"},c={number:.9,unit:"em"},h={number:0,unit:"em"},f="";if(n[0])for(var d=Yt(n[0],"raw").string.split(","),i=0;i<d.length;i++){var m=d[i].split("=");if(2===m.length){var y=m[1].trim();switch(m[0].trim()){case"alt":f=y;break;case"width":o=Hn(y);break;case"height":c=Hn(y);break;case"totalheight":h=Hn(y);break;default:throw new l("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var v=Yt(e[0],"url").url;return""===f&&(f=(f=(f=v).replace(/^.*[\\/]/,"")).substring(0,f.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:r.mode,alt:f,width:o,height:c,totalheight:h,src:v}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(t,e){var n=Lt(t.height,e),r=0;t.totalheight.number>0&&(r=Lt(t.totalheight,e)-n,r=Number(r.toFixed(2)));var o=0;t.width.number>0&&(o=Lt(t.width,e));var style={height:n+r+"em"};o>0&&(style.width=o+"em"),r>0&&(style.verticalAlign=-r+"em");var c=new V(t.src,t.alt,style);return c.height=n,c.depth=r,c},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Lt(t.height,e),o=0;if(t.totalheight.number>0&&(o=(o=Lt(t.totalheight,e)-r).toFixed(2),n.setAttribute("valign","-"+o+"em")),n.setAttribute("height",r+o+"em"),t.width.number>0){var c=Lt(t.width,e);n.setAttribute("width",c+"em")}return n.setAttribute("src",t.src),n}}),ue({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,o=Yt(e[0],"size");if(n.settings.strict){var c="m"===r[1],l="mu"===o.value.unit;c?(l||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+o.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):l&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:o.value}},htmlBuilder:function(t,e){return Kt.makeGlue(t.dimension,e)},mathmlBuilder:function(t,e){var n=Lt(t.dimension,e);return new Ae.SpaceNode(n)}}),ue({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,body=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:body}},htmlBuilder:function(t,e){var n;"clap"===t.alignment?(n=Kt.makeSpan([],[Se(t.body,e)]),n=Kt.makeSpan(["inner"],[n],e)):n=Kt.makeSpan(["inner"],[Se(t.body,e)]);var r=Kt.makeSpan(["fix"],[]),o=Kt.makeSpan([t.alignment],[n,r],e),c=Kt.makeSpan(["strut"]);return c.style.height=o.height+o.depth+"em",c.style.verticalAlign=-o.depth+"em",o.children.unshift(c),o=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o}]},e),Kt.makeSpan(["mord"],[o],e)},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mpadded",[Oe(t.body,e)]);if("rlap"!==t.alignment){var r="llap"===t.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),ue({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var n=t.funcName,r=t.parser,o=r.mode;r.switchMode("math");var c="\\("===n?"\\)":"$",body=r.parseExpression(!1,c);return r.expect(c),r.switchMode(o),{type:"styling",mode:r.mode,style:"text",body:body}}}),ue({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){throw new l("Mismatched "+t.funcName)}});var Kn=function(t,e){switch(e.style.size){case C.DISPLAY.size:return t.display;case C.TEXT.size:return t.text;case C.SCRIPT.size:return t.script;case C.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};ue({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(t,e){return{type:"mathchoice",mode:t.parser.mode,display:le(e[0]),text:le(e[1]),script:le(e[2]),scriptscript:le(e[3])}},htmlBuilder:function(t,e){var body=Kn(t,e),n=ye(body,e,!1);return Kt.makeFragment(n)},mathmlBuilder:function(t,e){var body=Kn(t,e);return Me(body,e)}});var Yn=function(base,t,e,n,style,r,o){var sub,sup,c;if(base=Kt.makeSpan([],[base]),t){var l=Se(t,n.havingStyle(style.sup()),n);sup={elem:l,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-l.depth)}}if(e){var h=Se(e,n.havingStyle(style.sub()),n);sub={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}if(sup&&sub){var f=n.fontMetrics().bigOpSpacing5+sub.elem.height+sub.elem.depth+sub.kern+base.depth+o;c=Kt.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:sub.elem,marginLeft:-r+"em"},{type:"kern",size:sub.kern},{type:"elem",elem:base},{type:"kern",size:sup.kern},{type:"elem",elem:sup.elem,marginLeft:r+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(sub){var d=base.height-o;c=Kt.makeVList({positionType:"top",positionData:d,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:sub.elem,marginLeft:-r+"em"},{type:"kern",size:sub.kern},{type:"elem",elem:base}]},n)}else{if(!sup)return base;var m=base.depth+o;c=Kt.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:base},{type:"kern",size:sup.kern},{type:"elem",elem:sup.elem,marginLeft:r+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}return Kt.makeSpan(["mop","op-limits"],[c],n)},Xn=["\\smallint"],$n=function(t,e){var n,r,o,c=!1,l=Xt(t,"supsub");l?(n=l.sup,r=l.sub,o=Yt(l.base,"op"),c=!0):o=Yt(t,"op");var base,style=e.style,h=!1;if(style.size===C.DISPLAY.size&&o.symbol&&!y.contains(Xn,o.name)&&(h=!0),o.symbol){var f=h?"Size2-Regular":"Size1-Regular",d="";if("\\oiint"!==o.name&&"\\oiiint"!==o.name||(d=o.name.substr(1),o.name="oiint"===d?"\\iint":"\\iiint"),base=Kt.makeSymbol(o.name,f,"math",e,["mop","op-symbol",h?"large-op":"small-op"]),d.length>0){var m=base.italic,v=Kt.staticSvg(d+"Size"+(h?"2":"1"),e);base=Kt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:base,shift:0},{type:"elem",elem:v,shift:h?.08:0}]},e),o.name="\\"+d,base.classes.unshift("mop"),base.italic=m}}else if(o.body){var w=ye(o.body,e,!0);1===w.length&&w[0]instanceof j?(base=w[0]).classes[0]="mop":base=Kt.makeSpan(["mop"],Kt.tryCombineChars(w),e)}else{for(var output=[],i=1;i<o.name.length;i++)output.push(Kt.mathsym(o.name[i],o.mode,e));base=Kt.makeSpan(["mop"],output,e)}var S=0,x=0;return(base instanceof j||"\\oiint"===o.name||"\\oiiint"===o.name)&&!o.suppressBaseShift&&(S=(base.height-base.depth)/2-e.fontMetrics().axisHeight,x=base.italic),c?Yn(base,n,r,e,style,x,S):(S&&(base.style.position="relative",base.style.top=S+"em"),base)},Jn=function(t,e){var n;if(t.symbol)n=new Ee("mo",[Ce(t.name,t.mode)]),y.contains(Xn,t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new Ee("mo",De(t.body,e));else{n=new Ee("mi",[new Ie(t.name.slice(1))]);var r=new Ee("mo",[Ce("","text")]);n=t.parentIsSupSub?new Ee("mo",[n,r]):Te([n,r])}return n},Zn={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ue({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:function(t,e){var n=t.parser,r=t.funcName;return 1===r.length&&(r=Zn[r]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:$n,mathmlBuilder:Jn}),ue({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(t,e){var n=t.parser,body=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:le(body)}},htmlBuilder:$n,mathmlBuilder:Jn});var er={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ue({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(t){var e=t.parser,n=t.funcName;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:$n,mathmlBuilder:Jn}),ue({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(t){var e=t.parser,n=t.funcName;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:$n,mathmlBuilder:Jn}),ue({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler:function(t){var e=t.parser,n=t.funcName;return 1===n.length&&(n=er[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:$n,mathmlBuilder:Jn});var nr=function(t,e){var n,r,o,base,c=!1,l=Xt(t,"supsub");if(l?(n=l.sup,r=l.sub,o=Yt(l.base,"operatorname"),c=!0):o=Yt(t,"operatorname"),o.body.length>0){for(var body=o.body.map((function(t){var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t})),h=ye(body,e.withFont("mathrm"),!0),i=0;i<h.length;i++){var f=h[i];f instanceof j&&(f.text=f.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}base=Kt.makeSpan(["mop"],h,e)}else base=Kt.makeSpan(["mop"],[],e);return c?Yn(base,n,r,e,e.style,0,0):base};function rr(t,e,n){for(var r=ye(t,e,!1),o=e.sizeMultiplier/n.sizeMultiplier,i=0;i<r.length;i++){var c=r[i].classes.indexOf("sizing");c<0?Array.prototype.push.apply(r[i].classes,e.sizingClasses(n)):r[i].classes[c+1]==="reset-size"+e.size&&(r[i].classes[c+1]="reset-size"+n.size),r[i].height*=o,r[i].depth*=o}return Kt.makeFragment(r)}ue({type:"operatorname",names:["\\operatorname","\\operatorname*"],props:{numArgs:1},handler:function(t,e){var n=t.parser,r=t.funcName,body=e[0];return{type:"operatorname",mode:n.mode,body:le(body),alwaysHandleSupSub:"\\operatorname*"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:nr,mathmlBuilder:function(t,e){for(var n=De(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var o=n[i];if(o instanceof Ae.SpaceNode);else if(o instanceof Ae.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var c=o.children[0];1===o.children.length&&c instanceof Ae.TextNode?c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var l=n.map((function(t){return t.toText()})).join("");n=[new Ae.TextNode(l)]}var h=new Ae.MathNode("mi",n);h.setAttribute("mathvariant","normal");var f=new Ae.MathNode("mo",[Ce("","text")]);return t.parentIsSupSub?new Ae.MathNode("mo",[h,f]):Ae.newDocumentFragment([h,f])}}),ce({type:"ordgroup",htmlBuilder:function(t,e){return t.semisimple?Kt.makeFragment(ye(t.body,e,!1)):Kt.makeSpan(["mord"],ye(t.body,e,!0),e)},mathmlBuilder:function(t,e){return Me(t.body,e,!0)}}),ue({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(t,e){var n=t.parser,body=e[0];return{type:"overline",mode:n.mode,body:body}},htmlBuilder:function(t,e){var n=Se(t.body,e.havingCrampedStyle()),line=Kt.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,o=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:line},{type:"kern",size:r}]},e);return Kt.makeSpan(["mord","overline"],[o],e)},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mo",[new Ae.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ae.MathNode("mover",[Oe(t.body,e),n]);return r.setAttribute("accent","true"),r}}),ue({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var n=t.parser,body=e[0];return{type:"phantom",mode:n.mode,body:le(body)}},htmlBuilder:function(t,e){var n=ye(t.body,e.withPhantom(),!1);return Kt.makeFragment(n)},mathmlBuilder:function(t,e){var n=De(t.body,e);return new Ae.MathNode("mphantom",n)}}),ue({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var n=t.parser,body=e[0];return{type:"hphantom",mode:n.mode,body:body}},htmlBuilder:function(t,e){var n=Kt.makeSpan([],[Se(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var i=0;i<n.children.length;i++)n.children[i].height=0,n.children[i].depth=0;return n=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),Kt.makeSpan(["mord"],[n],e)},mathmlBuilder:function(t,e){var n=De(le(t.body),e),r=new Ae.MathNode("mphantom",n),o=new Ae.MathNode("mpadded",[r]);return o.setAttribute("height","0px"),o.setAttribute("depth","0px"),o}}),ue({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var n=t.parser,body=e[0];return{type:"vphantom",mode:n.mode,body:body}},htmlBuilder:function(t,e){var n=Kt.makeSpan(["inner"],[Se(t.body,e.withPhantom())]),r=Kt.makeSpan(["fix"],[]);return Kt.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:function(t,e){var n=De(le(t.body),e),r=new Ae.MathNode("mphantom",n),o=new Ae.MathNode("mpadded",[r]);return o.setAttribute("width","0px"),o}}),ue({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(t,e){var n=t.parser,r=Yt(e[0],"size").value,body=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:body}},htmlBuilder:function(t,e){var body=Se(t.body,e),n=Lt(t.dy,e);return Kt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:body}]},e)},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mpadded",[Oe(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}}),ue({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(t,e,n){var r=t.parser,o=n[0],c=Yt(e[0],"size"),l=Yt(e[1],"size");return{type:"rule",mode:r.mode,shift:o&&Yt(o,"size").value,width:c.value,height:l.value}},htmlBuilder:function(t,e){var n=Kt.makeSpan(["mord","rule"],[],e),r=Lt(t.width,e),o=Lt(t.height,e),c=t.shift?Lt(t.shift,e):0;return n.style.borderRightWidth=r+"em",n.style.borderTopWidth=o+"em",n.style.bottom=c+"em",n.width=r,n.height=o+c,n.depth=-c,n.maxFontSize=1.125*o*e.sizeMultiplier,n},mathmlBuilder:function(t,e){var n=Lt(t.width,e),r=Lt(t.height,e),o=t.shift?Lt(t.shift,e):0,c=e.color&&e.getColor()||"black",l=new Ae.MathNode("mspace");l.setAttribute("mathbackground",c),l.setAttribute("width",n+"em"),l.setAttribute("height",r+"em");var h=new Ae.MathNode("mpadded",[l]);return o>=0?h.setAttribute("height","+"+o+"em"):(h.setAttribute("height",o+"em"),h.setAttribute("depth","+"+-o+"em")),h.setAttribute("voffset",o+"em"),h}});var or=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ue({type:"sizing",names:or,props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.breakOnTokenText,r=t.funcName,o=t.parser,body=o.parseExpression(!1,n);return{type:"sizing",mode:o.mode,size:or.indexOf(r)+1,body:body}},htmlBuilder:function(t,e){var n=e.havingSize(t.size);return rr(t.body,n,e)},mathmlBuilder:function(t,e){var n=e.havingSize(t.size),r=De(t.body,n),o=new Ae.MathNode("mstyle",r);return o.setAttribute("mathsize",n.sizeMultiplier+"em"),o}}),ue({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(t,e,n){var r=t.parser,o=!1,c=!1,l=n[0]&&Yt(n[0],"ordgroup");if(l)for(var h="",i=0;i<l.body.length;++i)if("t"===(h=l.body[i].text))o=!0;else{if("b"!==h){o=!1,c=!1;break}c=!0}else o=!0,c=!0;var body=e[0];return{type:"smash",mode:r.mode,body:body,smashHeight:o,smashDepth:c}},htmlBuilder:function(t,e){var n=Kt.makeSpan([],[Se(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].depth=0;var o=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return Kt.makeSpan(["mord"],[o],e)},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mpadded",[Oe(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}}),ue({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,n){var r=t.parser,o=n[0],body=e[0];return{type:"sqrt",mode:r.mode,body:body,index:o}},htmlBuilder:function(t,e){var n=Se(t.body,e.havingCrampedStyle());0===n.height&&(n.height=e.fontMetrics().xHeight),n=Kt.wrapFragment(n,e);var r=e.fontMetrics().defaultRuleThickness,o=r;e.style.id<C.TEXT.id&&(o=e.fontMetrics().xHeight);var c=r+o/4,l=n.height+n.depth+c+r,h=dn(l,e),img=h.span,f=h.ruleWidth,d=h.advanceWidth,m=img.height-f;m>n.height+n.depth+c&&(c=(c+m-n.height-n.depth)/2);var y=img.height-n.height-c-f;n.style.paddingLeft=d+"em";var body=Kt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+y)},{type:"elem",elem:img},{type:"kern",size:f}]},e);if(t.index){var v=e.havingStyle(C.SCRIPTSCRIPT),w=Se(t.index,v,e),S=.6*(body.height-body.depth),x=Kt.makeVList({positionType:"shift",positionData:-S,children:[{type:"elem",elem:w}]},e),_=Kt.makeSpan(["root"],[x]);return Kt.makeSpan(["mord","sqrt"],[_,body],e)}return Kt.makeSpan(["mord","sqrt"],[body],e)},mathmlBuilder:function(t,e){var body=t.body,n=t.index;return n?new Ae.MathNode("mroot",[Oe(body,e),Oe(n,e)]):new Ae.MathNode("msqrt",[Oe(body,e)])}});var ir={display:C.DISPLAY,text:C.TEXT,script:C.SCRIPT,scriptscript:C.SCRIPTSCRIPT};ue({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var n=t.breakOnTokenText,r=t.funcName,o=t.parser,body=o.parseExpression(!0,n),style=r.slice(1,r.length-5);return{type:"styling",mode:o.mode,style:style,body:body}},htmlBuilder:function(t,e){var n=ir[t.style],r=e.havingStyle(n).withFont("");return rr(t.body,r,e)},mathmlBuilder:function(t,e){var n=ir[t.style],r=e.havingStyle(n),o=De(t.body,r),c=new Ae.MathNode("mstyle",o),l={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return c.setAttribute("scriptlevel",l[0]),c.setAttribute("displaystyle",l[1]),c}}),ce({type:"supsub",htmlBuilder:function(t,e){var n=function(t,e){var base=t.base;return base?"op"===base.type?base.limits&&(e.style.size===C.DISPLAY.size||base.alwaysHandleSupSub)?$n:null:"operatorname"===base.type?base.alwaysHandleSupSub&&(e.style.size===C.DISPLAY.size||base.limits)?nr:null:"accent"===base.type?y.isCharacterBox(base.base)?je:null:"horizBrace"===base.type&&!t.sub===base.isOver?Qn:null:null}(t,e);if(n)return n(t,e);var r,o,c,l=t.base,h=t.sup,f=t.sub,base=Se(l,e),d=e.fontMetrics(),m=0,v=0,w=l&&y.isCharacterBox(l);if(h){var S=e.havingStyle(e.style.sup());r=Se(h,S,e),w||(m=base.height-S.fontMetrics().supDrop*S.sizeMultiplier/e.sizeMultiplier)}if(f){var x=e.havingStyle(e.style.sub());o=Se(f,x,e),w||(v=base.depth+x.fontMetrics().subDrop*x.sizeMultiplier/e.sizeMultiplier)}c=e.style===C.DISPLAY?d.sup1:e.style.cramped?d.sup3:d.sup2;var _,T=e.sizeMultiplier,E=.5/d.ptPerEm/T+"em",I=null;if(o){var A=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(base instanceof j||A)&&(I=-base.italic+"em")}if(r&&o){m=Math.max(m,c,r.depth+.25*d.xHeight),v=Math.max(v,d.sub2);var k=4*d.defaultRuleThickness;if(m-r.depth-(o.height-v)<k){v=k-(m-r.depth)+o.height;var N=.8*d.xHeight-(m-r.depth);N>0&&(m+=N,v-=N)}var D=[{type:"elem",elem:o,shift:v,marginRight:E,marginLeft:I},{type:"elem",elem:r,shift:-m,marginRight:E}];_=Kt.makeVList({positionType:"individualShift",children:D},e)}else if(o){v=Math.max(v,d.sub1,o.height-.8*d.xHeight);var M=[{type:"elem",elem:o,marginLeft:I,marginRight:E}];_=Kt.makeVList({positionType:"shift",positionData:v,children:M},e)}else{if(!r)throw new Error("supsub must have either sup or sub.");m=Math.max(m,c,r.depth+.25*d.xHeight),_=Kt.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:r,marginRight:E}]},e)}var O=be(base,"right")||"mord";return Kt.makeSpan([O],[base,Kt.makeSpan(["msupsub"],[_])],e)},mathmlBuilder:function(t,e){var n,r=!1,o=Xt(t.base,"horizBrace");o&&!!t.sup===o.isOver&&(r=!0,n=o.isOver),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);var c,l=[Oe(t.base,e)];if(t.sub&&l.push(Oe(t.sub,e)),t.sup&&l.push(Oe(t.sup,e)),r)c=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;c=h&&"op"===h.type&&h.limits&&e.style===C.DISPLAY||h&&"operatorname"===h.type&&h.alwaysHandleSupSub&&(e.style===C.DISPLAY||h.limits)?"munderover":"msubsup"}else{var f=t.base;c=f&&"op"===f.type&&f.limits&&(e.style===C.DISPLAY||f.alwaysHandleSupSub)||f&&"operatorname"===f.type&&f.alwaysHandleSupSub&&(f.limits||e.style===C.DISPLAY)?"munder":"msub"}else{var base=t.base;c=base&&"op"===base.type&&base.limits&&(e.style===C.DISPLAY||base.alwaysHandleSupSub)||base&&"operatorname"===base.type&&base.alwaysHandleSupSub&&(base.limits||e.style===C.DISPLAY)?"mover":"msup"}return new Ae.MathNode(c,l)}}),ce({type:"atom",htmlBuilder:function(t,e){return Kt.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mo",[Ce(t.text,t.mode)]);if("bin"===t.family){var r=Ne(t,e);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===t.family?n.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||n.setAttribute("stretchy","false");return n}});var ar={mi:"italic",mn:"normal",mtext:"normal"};ce({type:"mathord",htmlBuilder:function(t,e){return Kt.makeOrd(t,e,"mathord")},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mi",[Ce(t.text,t.mode,e)]),r=Ne(t,e)||"italic";return r!==ar[n.type]&&n.setAttribute("mathvariant",r),n}}),ce({type:"textord",htmlBuilder:function(t,e){return Kt.makeOrd(t,e,"textord")},mathmlBuilder:function(t,e){var n,text=Ce(t.text,t.mode,e),r=Ne(t,e)||"normal";return n="text"===t.mode?new Ae.MathNode("mtext",[text]):/[0-9]/.test(t.text)?new Ae.MathNode("mn",[text]):"\\prime"===t.text?new Ae.MathNode("mo",[text]):new Ae.MathNode("mi",[text]),r!==ar[n.type]&&n.setAttribute("mathvariant",r),n}});var sr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},ur={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ce({type:"spacing",htmlBuilder:function(t,e){if(ur.hasOwnProperty(t.text)){var n=ur[t.text].className||"";if("text"===t.mode){var r=Kt.makeOrd(t,e,"textord");return r.classes.push(n),r}return Kt.makeSpan(["mspace",n],[Kt.mathsym(t.text,t.mode,e)],e)}if(sr.hasOwnProperty(t.text))return Kt.makeSpan(["mspace",sr[t.text]],[],e);throw new l('Unknown type of space "'+t.text+'"')},mathmlBuilder:function(t,e){if(!ur.hasOwnProperty(t.text)){if(sr.hasOwnProperty(t.text))return new Ae.MathNode("mspace");throw new l('Unknown type of space "'+t.text+'"')}return new Ae.MathNode("mtext",[new Ae.TextNode("")])}});var cr=function(){var t=new Ae.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};ce({type:"tag",mathmlBuilder:function(t,e){var table=new Ae.MathNode("mtable",[new Ae.MathNode("mtr",[cr(),new Ae.MathNode("mtd",[Me(t.body,e)]),cr(),new Ae.MathNode("mtd",[Me(t.tag,e)])])]);return table.setAttribute("width","100%"),table}});var lr={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},fr={"\\textbf":"textbf","\\textmd":"textmd"},pr={"\\textit":"textit","\\textup":"textup"},dr=function(t,e){var n=t.font;return n?lr[n]?e.withTextFontFamily(lr[n]):fr[n]?e.withTextFontWeight(fr[n]):e.withTextFontShape(pr[n]):e};ue({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0},handler:function(t,e){var n=t.parser,r=t.funcName,body=e[0];return{type:"text",mode:n.mode,body:le(body),font:r}},htmlBuilder:function(t,e){var n=dr(t,e),r=ye(t.body,n,!0);return Kt.makeSpan(["mord","text"],Kt.tryCombineChars(r),n)},mathmlBuilder:function(t,e){var n=dr(t,e);return Me(t.body,n)}}),ue({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"underline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var n=Se(t.body,e),line=Kt.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,o=Kt.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:r},{type:"elem",elem:line},{type:"kern",size:3*r},{type:"elem",elem:n}]},e);return Kt.makeSpan(["mord","underline"],[o],e)},mathmlBuilder:function(t,e){var n=new Ae.MathNode("mo",[new Ae.TextNode("")]);n.setAttribute("stretchy","true");var r=new Ae.MathNode("munder",[Oe(t.body,e),n]);return r.setAttribute("accentunder","true"),r}}),ue({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(t,e,n){throw new l("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(t,e){for(var text=mr(t),body=[],n=e.havingStyle(e.style.text()),i=0;i<text.length;i++){var r=text[i];"~"===r&&(r="\\textasciitilde"),body.push(Kt.makeSymbol(r,"Typewriter-Regular",t.mode,n,["mord","texttt"]))}return Kt.makeSpan(["mord","text"].concat(n.sizingClasses(e)),Kt.tryCombineChars(body),n)},mathmlBuilder:function(t,e){var text=new Ae.TextNode(mr(t)),n=new Ae.MathNode("mtext",[text]);return n.setAttribute("mathvariant","monospace"),n}});var mr=function(t){return t.body.replace(/ /g,t.star?"":"")},yr=ie,gr=new RegExp("^(\\\\[a-zA-Z@]+)[ \r\n\t]*$"),vr=new RegExp("[-]+$"),wr=function(){function t(input,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=input,this.settings=t,this.tokenRegex=new RegExp("([ \r\n\t]+)|([!-\\[\\]---][-]*|[\ud800-\udbff][\udc00-\udfff][-]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\operatorname\\*|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14}}var e=t.prototype;return e.setCatcode=function(t,code){this.catcodes[t]=code},e.lex=function(){var input=this.input,t=this.tokenRegex.lastIndex;if(t===input.length)return new o("EOF",new r(this,t,t));var e=this.tokenRegex.exec(input);if(null===e||e.index!==t)throw new l("Unexpected character: '"+input[t]+"'",new o(input[t],new r(this,t,t+1)));var text=e[2]||" ";if(14===this.catcodes[text]){var n=input.indexOf("\n",this.tokenRegex.lastIndex);return-1===n?(this.tokenRegex.lastIndex=input.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=n+1,this.lex()}var c=text.match(gr);return c&&(text=c[1]),new o(text,new r(this,t,this.tokenRegex.lastIndex))},t}(),Sr=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}var e=t.prototype;return e.beginGroup=function(){this.undefStack.push({})},e.endGroup=function(){if(0===this.undefStack.length)throw new l("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])},e.has=function(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)},e.get=function(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]},e.set=function(t,e,n){if(void 0===n&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var r=this.undefStack[this.undefStack.length-1];r&&!r.hasOwnProperty(t)&&(r[t]=this.current[t])}this.current[t]=e},t}(),xr={},_r=xr;function Tr(t,body){xr[t]=body}Tr("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),Tr("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),Tr("\\@ifnextchar",(function(t){var e=t.consumeArgs(3),n=t.future();return 1===e[0].length&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),Tr("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Tr("\\TextOrMath",(function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));var Er={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Tr("\\char",(function(t){var base,e=t.popToken(),n="";if("'"===e.text)base=8,e=t.popToken();else if('"'===e.text)base=16,e=t.popToken();else if("`"===e.text)if("\\"===(e=t.popToken()).text[0])n=e.text.charCodeAt(1);else{if("EOF"===e.text)throw new l("\\char` missing argument");n=e.text.charCodeAt(0)}else base=10;if(base){if(null==(n=Er[e.text])||n>=base)throw new l("Invalid base-"+base+" digit "+e.text);for(var r;null!=(r=Er[t.future().text])&&r<base;)n*=base,n+=r,t.popToken()}return"\\@char{"+n+"}"}));var Ir=function(t,e){var n=t.consumeArgs(1)[0];if(1!==n.length)throw new l("\\gdef's first argument must be a macro name");var r=n[0].text,o=0;for(n=t.consumeArgs(1)[0];1===n.length&&"#"===n[0].text;){if(1!==(n=t.consumeArgs(1)[0]).length)throw new l('Invalid argument number length "'+n.length+'"');if(!/^[1-9]$/.test(n[0].text))throw new l('Invalid argument number "'+n[0].text+'"');if(o++,parseInt(n[0].text)!==o)throw new l('Argument number "'+n[0].text+'" out of order');n=t.consumeArgs(1)[0]}return t.macros.set(r,{tokens:n,numArgs:o},e),""};Tr("\\gdef",(function(t){return Ir(t,!0)})),Tr("\\def",(function(t){return Ir(t,!1)})),Tr("\\global",(function(t){var e=t.consumeArgs(1)[0];if(1!==e.length)throw new l("Invalid command after \\global");var n=e[0].text;if("\\def"===n)return Ir(t,!0);throw new l("Invalid command '"+n+"' after \\global")}));var Ar=function(t,e,n){var r=t.consumeArgs(1)[0];if(1!==r.length)throw new l("\\newcommand's first argument must be a macro name");var o=r[0].text,c=t.isDefined(o);if(c&&!e)throw new l("\\newcommand{"+o+"} attempting to redefine "+o+"; use \\renewcommand");if(!c&&!n)throw new l("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var h=0;if(1===(r=t.consumeArgs(1)[0]).length&&"["===r[0].text){for(var f="",d=t.expandNextToken();"]"!==d.text&&"EOF"!==d.text;)f+=d.text,d=t.expandNextToken();if(!f.match(/^\s*[0-9]+\s*$/))throw new l("Invalid number of arguments: "+f);h=parseInt(f),r=t.consumeArgs(1)[0]}return t.macros.set(o,{tokens:r,numArgs:h}),""};Tr("\\newcommand",(function(t){return Ar(t,!1,!0)})),Tr("\\renewcommand",(function(t){return Ar(t,!0,!1)})),Tr("\\providecommand",(function(t){return Ar(t,!0,!0)})),Tr("\\bgroup","{"),Tr("\\egroup","}"),Tr("\\lq","`"),Tr("\\rq","'"),Tr("\\aa","\\r a"),Tr("\\AA","\\r A"),Tr("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),Tr("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Tr("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),Tr("","\\mathscr{B}"),Tr("","\\mathscr{E}"),Tr("","\\mathscr{F}"),Tr("","\\mathscr{H}"),Tr("","\\mathscr{I}"),Tr("","\\mathscr{L}"),Tr("","\\mathscr{M}"),Tr("","\\mathscr{R}"),Tr("","\\mathfrak{C}"),Tr("","\\mathfrak{H}"),Tr("","\\mathfrak{Z}"),Tr("\\Bbbk","\\Bbb{k}"),Tr("","\\cdotp"),Tr("\\llap","\\mathllap{\\textrm{#1}}"),Tr("\\rlap","\\mathrlap{\\textrm{#1}}"),Tr("\\clap","\\mathclap{\\textrm{#1}}"),Tr("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Tr("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),Tr("\\ne","\\neq"),Tr("","\\neq"),Tr("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),Tr("","\\notin"),Tr("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),Tr("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),Tr("","\\perp"),Tr("","\\mathclose{!\\mkern-0.8mu!}"),Tr("","\\notni"),Tr("","\\ulcorner"),Tr("","\\urcorner"),Tr("","\\llcorner"),Tr("","\\lrcorner"),Tr("","\\copyright"),Tr("","\\textregistered"),Tr("","\\textregistered"),Tr("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Tr("","\\vdots"),Tr("\\varGamma","\\mathit{\\Gamma}"),Tr("\\varDelta","\\mathit{\\Delta}"),Tr("\\varTheta","\\mathit{\\Theta}"),Tr("\\varLambda","\\mathit{\\Lambda}"),Tr("\\varXi","\\mathit{\\Xi}"),Tr("\\varPi","\\mathit{\\Pi}"),Tr("\\varSigma","\\mathit{\\Sigma}"),Tr("\\varUpsilon","\\mathit{\\Upsilon}"),Tr("\\varPhi","\\mathit{\\Phi}"),Tr("\\varPsi","\\mathit{\\Psi}"),Tr("\\varOmega","\\mathit{\\Omega}"),Tr("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Tr("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Tr("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Tr("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Tr("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Tr("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var Cr={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Tr("\\dots",(function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in Cr?e=Cr[n]:("\\not"===n.substr(0,4)||n in nt.math&&y.contains(["bin","rel"],nt.math[n].group))&&(e="\\dotsb"),e}));var kr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Tr("\\dotso",(function(t){return t.future().text in kr?"\\ldots\\,":"\\ldots"})),Tr("\\dotsc",(function(t){var e=t.future().text;return e in kr&&","!==e?"\\ldots\\,":"\\ldots"})),Tr("\\cdots",(function(t){return t.future().text in kr?"\\@cdots\\,":"\\@cdots"})),Tr("\\dotsb","\\cdots"),Tr("\\dotsm","\\cdots"),Tr("\\dotsi","\\!\\cdots"),Tr("\\dotsx","\\ldots\\,"),Tr("\\DOTSI","\\relax"),Tr("\\DOTSB","\\relax"),Tr("\\DOTSX","\\relax"),Tr("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Tr("\\,","\\tmspace+{3mu}{.1667em}"),Tr("\\thinspace","\\,"),Tr("\\>","\\mskip{4mu}"),Tr("\\:","\\tmspace+{4mu}{.2222em}"),Tr("\\medspace","\\:"),Tr("\\;","\\tmspace+{5mu}{.2777em}"),Tr("\\thickspace","\\;"),Tr("\\!","\\tmspace-{3mu}{.1667em}"),Tr("\\negthinspace","\\!"),Tr("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Tr("\\negthickspace","\\tmspace-{5mu}{.277em}"),Tr("\\enspace","\\kern.5em "),Tr("\\enskip","\\hskip.5em\\relax"),Tr("\\quad","\\hskip1em\\relax"),Tr("\\qquad","\\hskip2em\\relax"),Tr("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Tr("\\tag@paren","\\tag@literal{({#1})}"),Tr("\\tag@literal",(function(t){if(t.macros.get("\\df@tag"))throw new l("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),Tr("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Tr("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Tr("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Tr("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Tr("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),Tr("\\\\","\\newline"),Tr("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Nr=K["Main-Regular"]["T".charCodeAt(0)][1]-.7*K["Main-Regular"]["A".charCodeAt(0)][1]+"em";Tr("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Nr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),Tr("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Nr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),Tr("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Tr("\\@hspace","\\hskip #1\\relax"),Tr("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Tr("\\ordinarycolon",":"),Tr("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Tr("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Tr("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Tr("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Tr("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Tr("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Tr("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Tr("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Tr("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Tr("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Tr("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Tr("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Tr("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Tr("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Tr("","\\dblcolon"),Tr("","\\eqcolon"),Tr("","\\coloneqq"),Tr("","\\eqqcolon"),Tr("","\\Coloneqq"),Tr("\\ratio","\\vcentcolon"),Tr("\\coloncolon","\\dblcolon"),Tr("\\colonequals","\\coloneqq"),Tr("\\coloncolonequals","\\Coloneqq"),Tr("\\equalscolon","\\eqqcolon"),Tr("\\equalscoloncolon","\\Eqqcolon"),Tr("\\colonminus","\\coloneq"),Tr("\\coloncolonminus","\\Coloneq"),Tr("\\minuscolon","\\eqcolon"),Tr("\\minuscoloncolon","\\Eqcolon"),Tr("\\coloncolonapprox","\\Colonapprox"),Tr("\\coloncolonsim","\\Colonsim"),Tr("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Tr("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Tr("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Tr("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Tr("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),Tr("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Tr("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Tr("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),Tr("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),Tr("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),Tr("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),Tr("\\nleqq","\\html@mathml{\\@nleqq}{}"),Tr("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),Tr("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),Tr("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),Tr("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),Tr("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),Tr("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),Tr("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),Tr("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),Tr("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),Tr("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Tr("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),Tr("","\\llbracket"),Tr("","\\rrbracket"),Tr("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Tr("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),Tr("","\\lBrace"),Tr("","\\rBrace"),Tr("\\darr","\\downarrow"),Tr("\\dArr","\\Downarrow"),Tr("\\Darr","\\Downarrow"),Tr("\\lang","\\langle"),Tr("\\rang","\\rangle"),Tr("\\uarr","\\uparrow"),Tr("\\uArr","\\Uparrow"),Tr("\\Uarr","\\Uparrow"),Tr("\\N","\\mathbb{N}"),Tr("\\R","\\mathbb{R}"),Tr("\\Z","\\mathbb{Z}"),Tr("\\alef","\\aleph"),Tr("\\alefsym","\\aleph"),Tr("\\Alpha","\\mathrm{A}"),Tr("\\Beta","\\mathrm{B}"),Tr("\\bull","\\bullet"),Tr("\\Chi","\\mathrm{X}"),Tr("\\clubs","\\clubsuit"),Tr("\\cnums","\\mathbb{C}"),Tr("\\Complex","\\mathbb{C}"),Tr("\\Dagger","\\ddagger"),Tr("\\diamonds","\\diamondsuit"),Tr("\\empty","\\emptyset"),Tr("\\Epsilon","\\mathrm{E}"),Tr("\\Eta","\\mathrm{H}"),Tr("\\exist","\\exists"),Tr("\\harr","\\leftrightarrow"),Tr("\\hArr","\\Leftrightarrow"),Tr("\\Harr","\\Leftrightarrow"),Tr("\\hearts","\\heartsuit"),Tr("\\image","\\Im"),Tr("\\infin","\\infty"),Tr("\\Iota","\\mathrm{I}"),Tr("\\isin","\\in"),Tr("\\Kappa","\\mathrm{K}"),Tr("\\larr","\\leftarrow"),Tr("\\lArr","\\Leftarrow"),Tr("\\Larr","\\Leftarrow"),Tr("\\lrarr","\\leftrightarrow"),Tr("\\lrArr","\\Leftrightarrow"),Tr("\\Lrarr","\\Leftrightarrow"),Tr("\\Mu","\\mathrm{M}"),Tr("\\natnums","\\mathbb{N}"),Tr("\\Nu","\\mathrm{N}"),Tr("\\Omicron","\\mathrm{O}"),Tr("\\plusmn","\\pm"),Tr("\\rarr","\\rightarrow"),Tr("\\rArr","\\Rightarrow"),Tr("\\Rarr","\\Rightarrow"),Tr("\\real","\\Re"),Tr("\\reals","\\mathbb{R}"),Tr("\\Reals","\\mathbb{R}"),Tr("\\Rho","\\mathrm{P}"),Tr("\\sdot","\\cdot"),Tr("\\sect","\\S"),Tr("\\spades","\\spadesuit"),Tr("\\sub","\\subset"),Tr("\\sube","\\subseteq"),Tr("\\supe","\\supseteq"),Tr("\\Tau","\\mathrm{T}"),Tr("\\thetasym","\\vartheta"),Tr("\\weierp","\\wp"),Tr("\\Zeta","\\mathrm{Z}"),Tr("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Tr("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Tr("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Tr("\\blue","\\textcolor{##6495ed}{#1}"),Tr("\\orange","\\textcolor{##ffa500}{#1}"),Tr("\\pink","\\textcolor{##ff00af}{#1}"),Tr("\\red","\\textcolor{##df0030}{#1}"),Tr("\\green","\\textcolor{##28ae7b}{#1}"),Tr("\\gray","\\textcolor{gray}{#1}"),Tr("\\purple","\\textcolor{##9d38bd}{#1}"),Tr("\\blueA","\\textcolor{##ccfaff}{#1}"),Tr("\\blueB","\\textcolor{##80f6ff}{#1}"),Tr("\\blueC","\\textcolor{##63d9ea}{#1}"),Tr("\\blueD","\\textcolor{##11accd}{#1}"),Tr("\\blueE","\\textcolor{##0c7f99}{#1}"),Tr("\\tealA","\\textcolor{##94fff5}{#1}"),Tr("\\tealB","\\textcolor{##26edd5}{#1}"),Tr("\\tealC","\\textcolor{##01d1c1}{#1}"),Tr("\\tealD","\\textcolor{##01a995}{#1}"),Tr("\\tealE","\\textcolor{##208170}{#1}"),Tr("\\greenA","\\textcolor{##b6ffb0}{#1}"),Tr("\\greenB","\\textcolor{##8af281}{#1}"),Tr("\\greenC","\\textcolor{##74cf70}{#1}"),Tr("\\greenD","\\textcolor{##1fab54}{#1}"),Tr("\\greenE","\\textcolor{##0d923f}{#1}"),Tr("\\goldA","\\textcolor{##ffd0a9}{#1}"),Tr("\\goldB","\\textcolor{##ffbb71}{#1}"),Tr("\\goldC","\\textcolor{##ff9c39}{#1}"),Tr("\\goldD","\\textcolor{##e07d10}{#1}"),Tr("\\goldE","\\textcolor{##a75a05}{#1}"),Tr("\\redA","\\textcolor{##fca9a9}{#1}"),Tr("\\redB","\\textcolor{##ff8482}{#1}"),Tr("\\redC","\\textcolor{##f9685d}{#1}"),Tr("\\redD","\\textcolor{##e84d39}{#1}"),Tr("\\redE","\\textcolor{##bc2612}{#1}"),Tr("\\maroonA","\\textcolor{##ffbde0}{#1}"),Tr("\\maroonB","\\textcolor{##ff92c6}{#1}"),Tr("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Tr("\\maroonD","\\textcolor{##ca337c}{#1}"),Tr("\\maroonE","\\textcolor{##9e034e}{#1}"),Tr("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Tr("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Tr("\\purpleC","\\textcolor{##aa87ff}{#1}"),Tr("\\purpleD","\\textcolor{##7854ab}{#1}"),Tr("\\purpleE","\\textcolor{##543b78}{#1}"),Tr("\\mintA","\\textcolor{##f5f9e8}{#1}"),Tr("\\mintB","\\textcolor{##edf2df}{#1}"),Tr("\\mintC","\\textcolor{##e0e5cc}{#1}"),Tr("\\grayA","\\textcolor{##f6f7f7}{#1}"),Tr("\\grayB","\\textcolor{##f0f1f2}{#1}"),Tr("\\grayC","\\textcolor{##e3e5e6}{#1}"),Tr("\\grayD","\\textcolor{##d6d8da}{#1}"),Tr("\\grayE","\\textcolor{##babec2}{#1}"),Tr("\\grayF","\\textcolor{##888d93}{#1}"),Tr("\\grayG","\\textcolor{##626569}{#1}"),Tr("\\grayH","\\textcolor{##3b3e40}{#1}"),Tr("\\grayI","\\textcolor{##21242c}{#1}"),Tr("\\kaBlue","\\textcolor{##314453}{#1}"),Tr("\\kaGreen","\\textcolor{##71B307}{#1}");var Dr={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Mr=function(){function t(input,t,e){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(input),this.macros=new Sr(_r,t.macros),this.mode=e,this.stack=[]}var e=t.prototype;return e.feed=function(input){this.lexer=new wr(input,this.settings)},e.switchMode=function(t){this.mode=t},e.beginGroup=function(){this.macros.beginGroup()},e.endGroup=function(){this.macros.endGroup()},e.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},e.popToken=function(){return this.future(),this.stack.pop()},e.pushToken=function(t){this.stack.push(t)},e.pushTokens=function(t){var e;(e=this.stack).push.apply(e,t)},e.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},e.consumeArgs=function(t){for(var e=[],i=0;i<t;++i){this.consumeSpaces();var n=this.popToken();if("{"===n.text){for(var r=[],o=1;0!==o;){var c=this.popToken();if(r.push(c),"{"===c.text)++o;else if("}"===c.text)--o;else if("EOF"===c.text)throw new l("End of input in macro argument",n)}r.pop(),r.reverse(),e[i]=r}else{if("EOF"===n.text)throw new l("End of input expecting macro argument");e[i]=[n]}}return e},e.expandOnce=function(){var t=this.popToken(),e=t.text,n=this._getExpansion(e);if(null==n)return this.pushToken(t),t;if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new l("Too many expansions: infinite loop or need to increase maxExpand setting");var r=n.tokens;if(n.numArgs)for(var o=this.consumeArgs(n.numArgs),i=(r=r.slice()).length-1;i>=0;--i){var c=r[i];if("#"===c.text){if(0===i)throw new l("Incomplete placeholder at end of macro body",c);if("#"===(c=r[--i]).text)r.splice(i+1,1);else{if(!/^[1-9]$/.test(c.text))throw new l("Not a valid argument number",c);var h;(h=r).splice.apply(h,[i,2].concat(o[+c.text-1]))}}}return this.pushTokens(r),r},e.expandAfterFuture=function(){return this.expandOnce(),this.future()},e.expandNextToken=function(){for(;;){var t=this.expandOnce();if(t instanceof o){if("\\relax"!==t.text)return this.stack.pop();this.stack.pop()}}throw new Error},e.expandMacro=function(t){if(this.macros.get(t)){var output=[],e=this.stack.length;for(this.pushToken(new o(t));this.stack.length>e;)this.expandOnce()instanceof o&&output.push(this.stack.pop());return output}},e.expandMacroAsText=function(t){var e=this.expandMacro(t);return e?e.map((function(t){return t.text})).join(""):e},e._getExpansion=function(t){var e=this.macros.get(t);if(null==e)return e;var n="function"==typeof e?e(this):e;if("string"==typeof n){var r=0;if(-1!==n.indexOf("#"))for(var o=n.replace(/##/g,"");-1!==o.indexOf("#"+(r+1));)++r;for(var c=new wr(n,this.settings),l=[],h=c.lex();"EOF"!==h.text;)l.push(h),h=c.lex();return l.reverse(),{tokens:l,numArgs:r}}return n},e.isDefined=function(t){return this.macros.has(t)||yr.hasOwnProperty(t)||nt.math.hasOwnProperty(t)||nt.text.hasOwnProperty(t)||Dr.hasOwnProperty(t)},t}(),Or={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"}},Rr={"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"b","":"c","":"c","":"c","":"c","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"k","":"k","":"l","":"l","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"p","":"p","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"B","":"C","":"C","":"C","":"C","":"D","":"D","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"K","":"K","":"L","":"L","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"P","":"P","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Pr=function(){function t(input,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Mr(input,t,this.mode),this.settings=t,this.leftrightDepth=0}var e=t.prototype;return e.expect=function(text,t){if(void 0===t&&(t=!0),this.fetch().text!==text)throw new l("Expected '"+text+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()},e.consume=function(){this.nextToken=null},e.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},e.switchMode=function(t){this.mode=t,this.gullet.switchMode(t)},e.parse=function(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");var t=this.parseExpression(!1);return this.expect("EOF"),this.gullet.endGroup(),t},e.parseExpression=function(e,n){for(var body=[];;){"math"===this.mode&&this.consumeSpaces();var r=this.fetch();if(-1!==t.endOfExpression.indexOf(r.text))break;if(n&&r.text===n)break;if(e&&yr[r.text]&&yr[r.text].infix)break;var o=this.parseAtom(n);if(!o)break;body.push(o)}return"text"===this.mode&&this.formLigatures(body),this.handleInfixNodes(body)},e.handleInfixNodes=function(body){for(var t,e=-1,i=0;i<body.length;i++){var n=Xt(body[i],"infix");if(n){if(-1!==e)throw new l("only one infix operator per group",n.token);e=i,t=n.replaceWith}}if(-1!==e&&t){var r,o,c=body.slice(0,e),h=body.slice(e+1);return r=1===c.length&&"ordgroup"===c[0].type?c[0]:{type:"ordgroup",mode:this.mode,body:c},o=1===h.length&&"ordgroup"===h[0].type?h[0]:{type:"ordgroup",mode:this.mode,body:h},["\\\\abovefrac"===t?this.callFunction(t,[r,body[e],o],[]):this.callFunction(t,[r,o],[])]}return body},e.handleSupSubscript=function(e){var n=this.fetch(),symbol=n.text;this.consume();var r=this.parseGroup(e,!1,t.SUPSUB_GREEDINESS,void 0,void 0,!0);if(!r)throw new l("Expected group after '"+symbol+"'",n);return r},e.formatUnsupportedCmd=function(text){for(var t=[],i=0;i<text.length;i++)t.push({type:"textord",mode:"text",text:text[i]});var e={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[e]}},e.parseAtom=function(t){var e,n,base=this.parseGroup("atom",!1,null,t);if("text"===this.mode)return base;for(;;){this.consumeSpaces();var r=this.fetch();if("\\limits"===r.text||"\\nolimits"===r.text){var o=Xt(base,"op");if(o){var c="\\limits"===r.text;o.limits=c,o.alwaysHandleSupSub=!0}else{if(!(o=Xt(base,"operatorname"))||!o.alwaysHandleSupSub)throw new l("Limit controls must follow a math operator",r);var h="\\limits"===r.text;o.limits=h}this.consume()}else if("^"===r.text){if(e)throw new l("Double superscript",r);e=this.handleSupSubscript("superscript")}else if("_"===r.text){if(n)throw new l("Double subscript",r);n=this.handleSupSubscript("subscript")}else{if("'"!==r.text)break;if(e)throw new l("Double superscript",r);var f={type:"textord",mode:this.mode,text:"\\prime"},d=[f];for(this.consume();"'"===this.fetch().text;)d.push(f),this.consume();"^"===this.fetch().text&&d.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:d}}}return e||n?{type:"supsub",mode:this.mode,base:base,sup:e,sub:n}:base},e.parseFunction=function(t,e,n){var r=this.fetch(),o=r.text,c=yr[o];if(!c)return null;if(this.consume(),null!=n&&c.greediness<=n)throw new l("Got function '"+o+"' with no arguments"+(e?" as "+e:""),r);if("text"===this.mode&&!c.allowedInText)throw new l("Can't use function '"+o+"' in text mode",r);if("math"===this.mode&&!1===c.allowedInMath)throw new l("Can't use function '"+o+"' in math mode",r);var h=this.parseArguments(o,c),f=h.args,d=h.optArgs;return this.callFunction(o,f,d,r,t)},e.callFunction=function(t,e,n,r,o){var c={funcName:t,parser:this,token:r,breakOnTokenText:o},h=yr[t];if(h&&h.handler)return h.handler(c,e,n);throw new l("No function handler for "+t)},e.parseArguments=function(t,e){var n=e.numArgs+e.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=e.greediness,o=[],c=[],i=0;i<n;i++){var h=e.argTypes&&e.argTypes[i],f=i<e.numOptionalArgs,d=i>0&&!f||0===i&&!f&&"math"===this.mode,m=this.parseGroupOfType("argument to '"+t+"'",h,f,r,d);if(!m){if(f){c.push(null);continue}throw new l("Expected group after '"+t+"'",this.fetch())}(f?c:o).push(m)}return{args:o,optArgs:c}},e.parseGroupOfType=function(t,e,n,r,o){switch(e){case"color":return o&&this.consumeSpaces(),this.parseColorGroup(n);case"size":return o&&this.consumeSpaces(),this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n,o);case"math":case"text":return this.parseGroup(t,n,r,void 0,e,o);case"hbox":var c=this.parseGroup(t,n,r,void 0,"text",o);return c?{type:"styling",mode:c.mode,body:[c],style:"text"}:c;case"raw":if(o&&this.consumeSpaces(),n&&"{"===this.fetch().text)return null;var h=this.parseStringGroup("raw",n,!0);if(h)return{type:"raw",mode:"text",string:h.text};throw new l("Expected raw group",this.fetch());case"original":case null:case void 0:return this.parseGroup(t,n,r,void 0,void 0,o);default:throw new l("Unknown group type as "+t,this.fetch())}},e.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},e.parseStringGroup=function(t,e,n){var r=e?"[":"{",o=e?"]":"}",c=this.fetch();if(c.text!==r){if(e)return null;if(n&&"EOF"!==c.text&&/[^{}[\]]/.test(c.text))return this.consume(),c}var h=this.mode;this.mode="text",this.expect(r);for(var f,d="",m=this.fetch(),y=0,v=m;(f=this.fetch()).text!==o||n&&y>0;){switch(f.text){case"EOF":throw new l("Unexpected end of input in "+t,m.range(v,d));case r:y++;break;case o:y--}d+=(v=f).text,this.consume()}return this.expect(o),this.mode=h,m.range(v,d)},e.parseRegexGroup=function(t,e){var n=this.mode;this.mode="text";for(var r,o=this.fetch(),c=o,h="";"EOF"!==(r=this.fetch()).text&&t.test(h+r.text);)h+=(c=r).text,this.consume();if(""===h)throw new l("Invalid "+e+": '"+o.text+"'",o);return this.mode=n,o.range(c,h)},e.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(!e)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!n)throw new l("Invalid color: '"+e.text+"'",e);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}},e.parseSizeGroup=function(t){var e,n=!1;if(!(e=t||"{"===this.fetch().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new l("Invalid size: '"+e.text+"'",e);var data={number:+(r[1]+r[2]),unit:r[3]};if(!Pt(data))throw new l("Invalid unit: '"+data.unit+"'",e);return{type:"size",mode:this.mode,value:data,isBlank:n}},e.parseUrlGroup=function(t,e){this.gullet.lexer.setCatcode("%",13);var n=this.parseStringGroup("url",t,!0);if(this.gullet.lexer.setCatcode("%",14),!n)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}},e.parseGroup=function(e,n,o,c,h,f){var d=this.mode;h&&this.switchMode(h),f&&this.consumeSpaces();var m,y=this.fetch(),text=y.text;if(n?"["===text:"{"===text||"\\begingroup"===text){this.consume();var v=t.endOfGroup[text];this.gullet.beginGroup();var w=this.parseExpression(!1,v),S=this.fetch();this.expect(v),this.gullet.endGroup(),m={type:"ordgroup",mode:this.mode,loc:r.range(y,S),body:w,semisimple:"\\begingroup"===text||void 0}}else if(n)m=null;else if(null==(m=this.parseFunction(c,e,o)||this.parseSymbol())&&"\\"===text[0]&&!Dr.hasOwnProperty(text)){if(this.settings.throwOnError)throw new l("Undefined control sequence: "+text,y);m=this.formatUnsupportedCmd(text),this.consume()}return h&&this.switchMode(d),m},e.formLigatures=function(t){for(var e=t.length-1,i=0;i<e;++i){var a=t[i],n=a.text;"-"===n&&"-"===t[i+1].text&&(i+1<e&&"-"===t[i+2].text?(t.splice(i,3,{type:"textord",mode:"text",loc:r.range(a,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:r.range(a,t[i+1]),text:"--"}),e-=1)),"'"!==n&&"`"!==n||t[i+1].text!==n||(t.splice(i,2,{type:"textord",mode:"text",loc:r.range(a,t[i+1]),text:n+n}),e-=1)}},e.parseSymbol=function(){var t=this.fetch(),text=t.text;if(/^\\verb[^a-zA-Z]/.test(text)){this.consume();var e=text.slice(5),n="*"===e.charAt(0);if(n&&(e=e.slice(1)),e.length<2||e.charAt(0)!==e.slice(-1))throw new l("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:e=e.slice(1,-1),star:n}}Rr.hasOwnProperty(text[0])&&!nt[this.mode][text[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+text[0]+'" used in math mode',t),text=Rr[text[0]]+text.substr(1));var symbol,o=vr.exec(text);if(o&&("i"===(text=text.substring(0,o.index))?text="":"j"===text&&(text="")),nt[this.mode][text]){this.settings.strict&&"math"===this.mode&&"".indexOf(text)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+text[0]+'" used in math mode',t);var s,c=nt[this.mode][text].group,h=r.range(t);if(Z.hasOwnProperty(c)){var f=c;s={type:"atom",mode:this.mode,family:f,loc:h,text:text}}else s={type:c,mode:this.mode,loc:h,text:text};symbol=s}else{if(!(text.charCodeAt(0)>=128))return null;this.settings.strict&&(D(text.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+text[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+text[0]+'" ('+text.charCodeAt(0)+")",t)),symbol={type:"textord",mode:"text",loc:r.range(t),text:text}}if(this.consume(),o)for(var i=0;i<o[0].length;i++){var d=o[0][i];if(!Or[d])throw new l("Unknown accent ' "+d+"'",t);var m=Or[d][this.mode];if(!m)throw new l("Accent "+d+" unsupported in "+this.mode+" mode",t);symbol={type:"accent",mode:this.mode,loc:r.range(t),label:m,isStretchy:!1,isShifty:!0,base:symbol}}return symbol},t}();Pr.endOfExpression=["}","\\endgroup","\\end","\\right","&"],Pr.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},Pr.SUPSUB_GREEDINESS=1;var Lr=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Pr(t,e);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(n.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new l("\\tag works only in display equations");n.gullet.feed("\\df@tag"),r=[{type:"tag",mode:"text",body:r,tag:n.parse()}]}return r},qr=function(t,e,n){e.textContent="";var r=Fr(t,n).toNode();e.appendChild(r)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),qr=function(){throw new l("KaTeX doesn't work in quirks mode.")});var Br=function(t,e,n){if(n.throwOnError||!(t instanceof l))throw t;var r=Kt.makeSpan(["katex-error"],[new j(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+n.errorColor),r},Fr=function(t,e){var n=new v(e);try{var r=Lr(t,n);return qe(r,t,n)}catch(e){return Br(e,t,n)}},zr={version:"0.11.1",render:qr,renderToString:function(t,e){return Fr(t,e).toMarkup()},ParseError:l,__parse:function(t,e){var n=new v(e);return Lr(t,n)},__renderToDomTree:Fr,__renderToHTMLTree:function(t,e){var n=new v(e);try{return function(t,e,n){var r=_e(t,Pe(n)),o=Kt.makeSpan(["katex"],[r]);return Le(o,n)}(Lr(t,n),0,n)}catch(e){return Br(e,t,n)}},__setFontMetrics:function(t,e){K[t]=e},__defineSymbol:ot,__defineMacro:Tr,__domTree:{Span:F,Anchor:z,SymbolNode:j,SvgNode:W,PathNode:G,LineNode:Q}};e.default=zr}]).default},t.exports=r()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(125),o=n(127);r(o,{getPolyfill:n(133),implementation:o,shim:n(243)}),t.exports=o},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(126),c=Object.keys,l=c?function(t){return c(t)}:n(220),h=Object.keys;l.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(object){return o(object)?h(r.call(object)):h(object)}):Object.keys=l;return Object.keys||l},t.exports=l},function(t,e,n){"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,c=Object.prototype.toString,l=n(126),h=Object.prototype.propertyIsEnumerable,f=!h.call({toString:null},"toString"),d=h.call((function(){}),"prototype"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=function(t){var e=t.constructor;return e&&e.prototype===t},v={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!v["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{y(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(object){var t=null!==object&&"object"==typeof object,e="[object Function]"===c.call(object),n=l(object),r=t&&"[object String]"===c.call(object),h=[];if(!t&&!e&&!n)throw new TypeError("Object.keys called on a non-object");var v=d&&e;if(r&&object.length>0&&!o.call(object,0))for(var i=0;i<object.length;++i)h.push(String(i));if(n&&object.length>0)for(var S=0;S<object.length;++S)h.push(String(S));else for(var x in object)v&&"prototype"===x||!o.call(object,x)||h.push(String(x));if(f)for(var _=function(t){if("undefined"==typeof window||!w)return y(t);try{return y(t)}catch(t){return!1}}(object),T=0;T<m.length;++T)_&&"constructor"===m[T]||!o.call(object,m[T])||h.push(m[T]);return h}}t.exports=r},function(t,e,n){"use strict";var r=n(13)("%TypeError%"),o=n(225),c=n(227),l=n(229),h=n(236),f=n(237),d=n(129),m=n(239),y=n(59);t.exports=function(t,e,n){if("Object"!==y(t))throw new r("Assertion failed: Type(O) is not Object");if(!d(e))throw new r("Assertion failed: IsPropertyKey(P) is not true");var v=l(t,e),w=!v||f(t);return!(v&&(!v["[[Writable]]"]||!v["[[Configurable]]"])||!w)&&o(h,m,c,t,e,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})}},function(t,e,n){"use strict";(function(e){var r=e.Symbol,o=n(223);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&o())))}}).call(this,n(21))},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,c=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==c.call(e))throw new TypeError(r+e);for(var n,l=o.call(arguments,1),h=function(){if(this instanceof n){var r=e.apply(this,l.concat(o.call(arguments)));return Object(r)===r?r:this}return e.apply(t,l.concat(o.call(arguments)))},f=Math.max(0,e.length-l.length),d=[],i=0;i<f;i++)d.push("$"+i);if(n=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(h),e.prototype){var m=function(){};m.prototype=e.prototype,n.prototype=new m,m.prototype=null}return n}},function(t,e,n){"use strict";var r=n(13)("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1})}catch(t){r=null}var o=n(75)("Object.prototype.propertyIsEnumerable");t.exports=function(t,e,n,c,l,desc){if(!r){if(!t(desc))return!1;if(!desc["[[Configurable]]"]||!desc["[[Writable]]"])return!1;if(l in c&&o(c,l)!==!!desc["[[Enumerable]]"])return!1;var h=desc["[[Value]]"];return c[l]=h,e(c[l],h)}return r(c,l,n(desc)),!0}},function(t,e,n){"use strict";var r=n(98),o=n(13)("%Function%"),c=o.apply,l=o.call;t.exports=function(){return r.apply(l,arguments)},t.exports.apply=function(){return r.apply(c,arguments)}},function(t,e,n){"use strict";var r=n(128),o=n(59);t.exports=function(t){if(void 0===t)return t;r(o,"Property Descriptor","Desc",t);var e={};return"[[Value]]"in t&&(e.value=t["[[Value]]"]),"[[Writable]]"in t&&(e.writable=t["[[Writable]]"]),"[[Get]]"in t&&(e.get=t["[[Get]]"]),"[[Set]]"in t&&(e.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(e.enumerable=t["[[Enumerable]]"]),"[[Configurable]]"in t&&(e.configurable=t["[[Configurable]]"]),e}},function(t,e,n){"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}},function(t,e,n){"use strict";var r=n(13),o=n(230),c=r("%TypeError%"),l=n(75)("Object.prototype.propertyIsEnumerable"),h=n(58),f=n(231),d=n(129),m=n(232),y=n(234),v=n(59);t.exports=function(t,e){if("Object"!==v(t))throw new c("Assertion failed: O must be an Object");if(!d(e))throw new c("Assertion failed: P must be a Property Key");if(h(t,e)){if(!o){var n=f(t)&&"length"===e,r=m(t)&&"lastIndex"===e;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":l(t,e),"[[Value]]":t[e],"[[Writable]]":!0}}return y(o(t,e))}}},function(t,e,n){"use strict";var r=n(13)("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length")}catch(t){r=null}t.exports=r},function(t,e,n){"use strict";var r=n(13)("%Array%"),o=!r.isArray&&n(75)("Object.prototype.toString");t.exports=r.isArray||function(t){return"[object Array]"===o(t)}},function(t,e,n){"use strict";var r=n(13)("%Symbol.match%",!0),o=n(233),c=n(130);t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(r){var e=t[r];if(void 0!==e)return c(e)}return o(t)}},function(t,e,n){"use strict";var r=n(58),o=RegExp.prototype.exec,c=Object.getOwnPropertyDescriptor,l=Object.prototype.toString,h="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!h)return"[object RegExp]"===l.call(t);var e=c(t,"lastIndex");return!(!e||!r(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,o.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var r=n(58),o=n(13)("%TypeError%"),c=n(59),l=n(130),h=n(131);t.exports=function(t){if("Object"!==c(t))throw new o("ToPropertyDescriptor requires an object");var desc={};if(r(t,"enumerable")&&(desc["[[Enumerable]]"]=l(t.enumerable)),r(t,"configurable")&&(desc["[[Configurable]]"]=l(t.configurable)),r(t,"value")&&(desc["[[Value]]"]=t.value),r(t,"writable")&&(desc["[[Writable]]"]=l(t.writable)),r(t,"get")){var e=t.get;if(void 0!==e&&!h(e))throw new TypeError("getter must be a function");desc["[[Get]]"]=e}if(r(t,"set")){var n=t.set;if(void 0!==n&&!h(n))throw new o("setter must be a function");desc["[[Set]]"]=n}if((r(desc,"[[Get]]")||r(desc,"[[Set]]"))&&(r(desc,"[[Value]]")||r(desc,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return desc}},function(t,e,n){"use strict";var r=Function.prototype.toString,o=/^\s*class\b/,c=function(t){try{var e=r.call(t);return o.test(e)}catch(t){return!1}},l=Object.prototype.toString,h="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(h)return function(t){try{return!c(t)&&(r.call(t),!0)}catch(t){return!1}}(t);if(c(t))return!1;var e=l.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){"use strict";var r=n(58),o=n(128),c=n(59);t.exports=function(t){return void 0!==t&&(o(c,"Property Descriptor","Desc",t),!(!r(t,"[[Value]]")&&!r(t,"[[Writable]]")))}},function(t,e,n){"use strict";var r=n(13)("%Object%"),o=n(238),c=r.preventExtensions,l=r.isExtensible;t.exports=c?function(t){return!o(t)&&l(t)}:function(t){return!o(t)}},function(t,e,n){"use strict";t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=n(240);t.exports=function(t,e){return t===e?0!==t||1/t==1/e:r(t)&&r(e)}},function(t,e,n){"use strict";t.exports=Number.isNaN||function(a){return a!=a}},function(t,e,n){"use strict";var r=n(13)("%TypeError%");t.exports=function(t,e){if(null==t)throw new r(e||"Cannot call method on "+t);return t}},function(t,e,n){"use strict";var r=n(13)("%Object%"),o=n(132);t.exports=function(t){return o(t),r(t)}},function(t,e,n){"use strict";var r=n(133),o=n(125);t.exports=function(){var t=r();return o(Object,{getOwnPropertyDescriptors:t},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==t}}),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.With=function(e){return t},t}();e.VuexModule=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.internalGetter=function(t,e){return function(e){var n=e.split(".");switch(n.length){case 1:return t[n[0]];case 2:return t[n[0]][n[1]];case 3:return t[n[0]][n[1]][n[2]];case 4:return t[n[0]][n[1]][n[2]][n[3]];case 5:return t[n[0]][n[1]][n[2]][n[3]][n[4]];case 6:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]];case 7:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]];case 8:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]];case 9:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]];case 10:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]];case 11:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]][n[10]];case 12:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]][n[10]][n[11]]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getter=function(t,e){void 0===t.__decorator_getter_names__?t.__decorator_getter_names__=[e]:t.__decorator_getter_names__.push(e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return l})),n.d(e,"__decorate",(function(){return h})),n.d(e,"__param",(function(){return f})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return m})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return v})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return S})),n.d(e,"__spread",(function(){return x})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return E})),n.d(e,"__asyncDelegator",(function(){return I})),n.d(e,"__asyncValues",(function(){return A})),n.d(e,"__makeTemplateObject",(function(){return C})),n.d(e,"__importStar",(function(){return k})),n.d(e,"__importDefault",(function(){return N}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function f(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function h(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,h)}f((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function v(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function x(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(S(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(t){h(q[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function h(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function I(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return l})),n.d(e,"__decorate",(function(){return h})),n.d(e,"__param",(function(){return f})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return m})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return v})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return S})),n.d(e,"__spread",(function(){return x})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return E})),n.d(e,"__asyncDelegator",(function(){return I})),n.d(e,"__asyncValues",(function(){return A})),n.d(e,"__makeTemplateObject",(function(){return C})),n.d(e,"__importStar",(function(){return k})),n.d(e,"__importDefault",(function(){return N}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function f(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function h(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,h)}f((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function v(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function x(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(S(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(t){h(q[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function h(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function I(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n(250)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=(r=n(137))&&"object"==typeof r&&"default"in r?r.default:r,l=n(139),h=n(251),f=n(138),d=n(252),m=c.SDK_VERSION,y=new l.Logger("@firebase/firestore");function v(){return y.logLevel===l.LogLevel.DEBUG?o.DEBUG:y.logLevel===l.LogLevel.SILENT?o.SILENT:o.ERROR}function w(t){switch(t){case o.DEBUG:y.logLevel=l.LogLevel.DEBUG;break;case o.ERROR:y.logLevel=l.LogLevel.ERROR;break;case o.SILENT:y.logLevel=l.LogLevel.SILENT;break;default:y.error("Firestore ("+m+"): Invalid value passed to `setLogLevel`")}}function S(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(y.logLevel<=l.LogLevel.DEBUG){var o=n.map(_);y.debug.apply(y,["Firestore ("+m+") ["+t+"]: "+e].concat(o))}}function x(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(y.logLevel<=l.LogLevel.ERROR){var r=e.map(_);y.error.apply(y,["Firestore ("+m+"): "+t].concat(r))}}function _(t){if("string"==typeof t)return t;var e=I.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function T(t){var e="FIRESTORE ("+m+") INTERNAL ASSERTION FAILED: "+t;throw x(e),new Error(e)}function E(t,e){t||T(e)}!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(o||(o={}));var I=function(){function t(){}return t.setPlatform=function(e){t.platform&&T("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||T("Platform not set"),t.platform},t}();function A(){return I.getPlatform().emptyByteString}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=function(t){function e(code,e){var n=t.call(this,e)||this;return n.code=code,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return h.__extends(e,t),e}(Error);function N(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new k(C.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return void 0!==t?t:e}function O(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function R(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P(t){for(var e in E(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e){if(0!==e.length)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+nt(e.length,"argument")+".")}function B(t,e,n){if(e.length!==n)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires "+nt(n,"argument")+", but was called with "+nt(e.length,"argument")+".")}function F(t,e,n){if(e.length<n)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires at least "+nt(n,"argument")+", but was called with "+nt(e.length,"argument")+".")}function z(t,e,n,r){if(e.length<n||e.length>r)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+nt(e.length,"argument")+".")}function V(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+nt(r,"element")+".")}function U(t,e,n,r){Y(t,e,et(n)+" argument",r)}function j(t,e,n,r){void 0!==r&&U(t,e,n,r)}function W(t,e,n,r){Y(t,e,n+" option",r)}function G(t,e,n,r){void 0!==r&&W(t,e,n,r)}function Q(t,e,n,r,o){void 0!==r&&function(t,e,n,r,o){if(!(r instanceof Array))throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+$(r));for(var i=0;i<r.length;++i)if(!o(r[i]))throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+i+" was: "+$(r[i]))}(t,e,n,r,o)}function H(t,e,n,input,r){void 0!==input&&function(t,e,n,input,r){for(var o=[],c=0,l=r;c<l.length;c++){var h=l[c];if(h===input)return;o.push($(h))}var f=$(input);throw new k(C.INVALID_ARGUMENT,"Invalid value "+f+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,input,r)}function K(t,e,n,r){if(!e.some((function(element){return element===r})))throw new k(C.INVALID_ARGUMENT,"Invalid value "+$(r)+" provided to function "+t+"() for its "+et(n)+" argument. Acceptable values: "+e.join(", "))}function Y(t,e,n,input){if(!("object"===e?X(input):"non-empty string"===e?"string"==typeof input&&""!==input:typeof input===e)){var r=$(input);throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function X(input){return"object"==typeof input&&null!==input&&(Object.getPrototypeOf(input)===Object.prototype||null===Object.getPrototypeOf(input))}function $(input){if(void 0===input)return"undefined";if(null===input)return"null";if("string"==typeof input)return input.length>20&&(input=input.substring(0,20)+"..."),JSON.stringify(input);if("number"==typeof input||"boolean"==typeof input)return""+input;if("object"==typeof input){if(input instanceof Array)return"an array";var t=function(input){if(input.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(input.constructor.toString());if(t&&t.length>1)return t[1]}return null}(input);return t?"a custom "+t+" object":"an object"}return"function"==typeof input?"a function":T("Unknown wrong type: "+typeof input)}function J(t,e,n){if(void 0===n)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+et(e)+" argument, but it was undefined.")}function Z(t,e,n){R(e,(function(e,r){if(n.indexOf(e)<0)throw new k(C.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function tt(t,e,n,r){var o=$(r);return new k(C.INVALID_ARGUMENT,"Function "+t+"() requires its "+et(n)+" argument to be a "+e+", but it was: "+o)}function et(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function nt(t,e){return t+" "+e+(1===t?"":"s")}var ot=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",i=0;i<20;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return E(20===e.length,"Invalid auto ID: "+e),e},t}();function it(t,e){return t<e?-1:t>e?1:0}function at(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].isEqual(e[i]))return!1;return!0}function st(s){return s+"\0"}function ut(){if("undefined"==typeof Uint8Array)throw new k(C.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ct(){if(!I.getPlatform().base64Available)throw new k(C.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lt,ht=function(){function t(t){ct(),this._binaryString=t}return t.fromBase64String=function(e){B("Blob.fromBase64String",arguments,1),U("Blob.fromBase64String","string",1,e),ct();try{var n=I.getPlatform().atob(e);return new t(n)}catch(t){throw new k(C.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(B("Blob.fromUint8Array",arguments,1),ut(),!(e instanceof Uint8Array))throw tt("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return B("Blob.toBase64",arguments,0),ct(),I.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){B("Blob.toUint8Array",arguments,0),ut();for(var t=new Uint8Array(this._binaryString.length),i=0;i<this._binaryString.length;i++)t[i]=this._binaryString.charCodeAt(i);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return it(this._binaryString,t._binaryString)},t}(),ft=N(ht,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),pt=function(t,e,n,r,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=o},mt=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return it(this.projectId,t.projectId)||it(this.database,t.database)},t}(),yt=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),gt=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&T("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&T("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,E(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return E(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return E(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return E(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0},t.prototype.forEach=function(t){for(var i=this.offset,e=this.limit();i<e;i++)t(this.segments[i])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(path){if(path.indexOf("//")>=0)throw new k(C.INVALID_ARGUMENT,"Invalid path ("+path+"). Paths must not contain // in them.");return new e(path.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(gt),bt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return bt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(path){for(var t=[],n="",i=0,r=function(){if(0===n.length)throw new k(C.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;i<path.length;){var c=path[i];if("\\"===c){if(i+1===path.length)throw new k(C.INVALID_ARGUMENT,"Path has trailing escape character: "+path);var l=path[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new k(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+path);n+=l,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(n+=c,i++):(r(),i++)}if(r(),o)throw new k(C.INVALID_ARGUMENT,"Unterminated ` in path: "+path);return new e(t)},e.EMPTY_PATH=new e([]),e}(gt),St=function(){function t(path){this.path=path,E(t.isDocumentKey(path),"Invalid DocumentKey with an odd number of segments: "+path.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===vt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return vt.comparator(t.path,e.path)},t.isDocumentKey=function(path){return path.length%2==0},t.fromSegments=function(e){return new t(new vt(e.slice()))},t.fromPathString=function(path){return new t(vt.fromString(path))},t.EMPTY=new t(new vt([])),t}(),xt=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction"}(lt||(lt={}));var _t=function(){function t(t,e,n,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,o,c){var l=new t(e,n,Date.now()+r,o,c);return l.start(r),l},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new k(C.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Tt=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw x("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),E(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var o=_t.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(o),o},t.prototype.verifyNotFailed=function(){this.failure&&T("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){E(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){E(t===lt.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(a,b){return a.targetTimeMs-b.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var o=r[n];if(o.skipDelay(),t!==lt.All&&o.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);E(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}();function Et(path){for(var t="",i=0;i<path.length;i++)t.length>0&&(t=At(t)),t=It(path.get(i),t);return At(t)}function It(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function At(t){return t+""}function Ct(path){var t=path.length;if(E(t>=2,"Invalid path "+path),2===t)return E(""===path.charAt(0)&&""===path.charAt(1),"Non-empty path "+path+" had length 2"),vt.EMPTY_PATH;for(var e=t-2,n=[],r="",o=0;o<t;){var c=path.indexOf("",o);switch((c<0||c>e)&&T('Invalid encoded resource path: "'+path+'"'),path.charAt(c+1)){case"":var l=path.substring(o,c),h=void 0;0===r.length?h=l:(h=r+=l,r=""),n.push(h);break;case"":r+=path.substring(o,c),r+="\0";break;case"":r+=path.substring(o,c+1);break;default:T('Invalid encoded resource path: "'+path+'"')}o=c+2}return new vt(n)}var kt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new k(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new k(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new k(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new k(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?it(this.nanoseconds,t.nanoseconds):it(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),Nt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new kt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new kt(0,0)),t}(),Dt=function(){function t(t,e){this.comparator=t,this.root=e||Ot.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Mt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Mt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Mt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Mt(this.root,t,this.comparator,!0)},t}(),Mt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){E(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ot=function(){function t(e,n,r,o,c){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=o?o:t.EMPTY,this.right=null!=c?c:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,o,c){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,o=n(t,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(e,o.key)){if(o.right.isEmpty())return t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw T("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw T("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw T("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw T("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw T("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw T("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw T("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw T("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,o){return this},t.prototype.insert=function(t,e,n){return new Ot(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Ot.EMPTY=new Rt;var Pt=function(){function t(t){this.comparator=t,this.data=new Dt(this.comparator)}return t.fromMapKeys=function(map){var e=new t(map.comparator);return map.forEach((function(t){e=e.add(t)})),e},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Lt(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Lt(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(data){var e=new t(this.comparator);return e.data=data,e},t}(),Lt=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),qt=new Dt(St.comparator);function Bt(){return qt}function Ft(){return Bt()}var zt=new Dt(St.comparator);function Vt(){return zt}var Ut=new Dt(St.comparator);function jt(){return Ut}var Wt=new Pt(St.comparator);function Gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Wt,r=0,o=t;r<o.length;r++){var c=o[r];n=n.add(c)}return n}var Qt=new Pt(it);function Ht(){return Qt}var Kt=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,E(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&E(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;E(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var c=r[i];e=o.applyToRemoteDocument(e,c)}}return e},t.prototype.applyToLocalView=function(t,e){e&&E(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(h=r[n]).key.isEqual(t)&&(e=h.applyToLocalView(e,e,this.localWriteTime))}for(var o=e,c=0,l=this.mutations;c<l.length;c++){var h;(h=l[c]).key.isEqual(t)&&(e=h.applyToLocalView(e,o,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var o=e.applyToLocalView(r.key,t.get(r.key));o&&(n=n.insert(r.key,o))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Gt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&at(this.mutations,t.mutations)&&at(this.baseMutations,t.baseMutations)},t}(),Yt=function(){function t(t,e,n,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=o}return t.from=function(e,n,r,o){E(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var c=jt(),l=e.mutations,i=0;i<l.length;i++)c=c.insert(l[i].key,r[i].version);return new t(e,n,r,o,c)},t}(),Xt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&T("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,o){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,o)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,o)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,o=0,c=!1;e.forEach((function(element){++r,element.next((function(){++o,c&&o===r&&t()}),(function(t){return n(t)}))})),c=!0,o===r&&t()}))},t.or=function(e){for(var p=t.resolve(!1),n=function(e){p=p.next((function(n){return n?t.resolve(n):e()}))},r=0,o=e;r<o.length;r++){n(o[r])}return p},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,s){r.push(e.call(n,t,s))})),this.waitFor(r)},t}(),$t=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,o){return E(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,o)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ee(t).iterate({index:dn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=te(n),re(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=te(e),re(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,r){var o=this,c=ne(t),l=ee(t);return l.add({}).next((function(h){E("number"==typeof h,"Auto-generated key is not a number");var f=new Kt(h,e,n,r),d=o.serializer.toDbMutationBatch(o.userId,f);o.documentKeysByBatchId[h]=f.keys();for(var m=[],y=0,v=r;y<v.length;y++){var w=v[y],S=mn.key(o.userId,w.key.path,h);m.push(l.put(d)),m.push(c.put(S,mn.PLACEHOLDER)),m.push(o.indexManager.addToCollectionParentIndex(t,w.key.path.popLast()))}return Xt.waitFor(m).next((function(){return f}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ee(t).get(e).next((function(t){return t?(E(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Xt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]),c=null;return ee(t).iterate({index:dn.userMutationsIndex,range:o},(function(t,e,o){e.userId===n.userId&&(E(e.batchId>=r,"Should have found mutation after "+r),c=n.serializer.fromDbMutationBatch(e)),o.done()})).next((function(){return c}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ee(t).iterate({index:dn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ee(t).loadAll(dn.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=mn.prefixForPath(this.userId,e.path),o=IDBKeyRange.lowerBound(r),c=[];return ne(t).iterate({range:o},(function(r,o,l){var h=r[0],f=r[1],d=r[2],path=Ct(f);if(h===n.userId&&e.path.isEqual(path))return ee(t).get(d).next((function(t){if(!t)throw T("Dangling document-mutation reference found: "+r+" which points to "+d);E(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+d),c.push(n.serializer.fromDbMutationBatch(t))}));l.done()})).next((function(){return c}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pt(it),o=[];return e.forEach((function(e){var c=mn.prefixForPath(n.userId,e.path),l=IDBKeyRange.lowerBound(c),h=ne(t).iterate({range:l},(function(t,o,c){var l=t[0],h=t[1],f=t[2],path=Ct(h);l===n.userId&&e.path.isEqual(path)?r=r.add(f):c.done()}));o.push(h)})),Xt.waitFor(o).next((function(){return n.lookupMutationBatches(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;E(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),E(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,o=r.length+1,c=mn.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(c),h=new Pt(it);return ne(t).iterate({range:l},(function(t,e,c){var l=t[0],f=t[1],d=t[2],path=Ct(f);l===n.userId&&r.isPrefixOf(path)?path.length===o&&(h=h.add(d)):c.done()})).next((function(){return n.lookupMutationBatches(t,h)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],o=[];return e.forEach((function(e){o.push(ee(t).get(e).next((function(t){if(null===t)throw T("Dangling document-mutation reference found, which points to "+e);E(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),Xt.waitFor(o).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Zt(t.simpleDbTransaction,this.userId,e).next((function(r){return n.removeCachedMutationKeys(e.batchId),Xt.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Xt.resolve();var r=IDBKeyRange.lowerBound(mn.prefixForUser(e.userId)),o=[];return ne(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var path=Ct(t[1]);o.push(path)}else r.done()})).next((function(){E(0===o.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map((function(p){return p.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return Jt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return re(t).get(this.userId).next((function(t){return t||new pn(e.userId,-1,"")}))},t}();function Jt(t,e,n){var r=mn.prefixForPath(e,n.path),o=r[1],c=IDBKeyRange.lowerBound(r),l=!1;return ne(t).iterate({range:c,keysOnly:!0},(function(t,n,r){var c=t[0],h=t[1];t[2];c===e&&h===o&&(l=!0),r.done()})).next((function(){return l}))}function Zt(t,e,n){var r=t.store(dn.store),o=t.store(mn.store),c=[],l=IDBKeyRange.only(n.batchId),h=0,f=r.iterate({range:l},(function(t,e,n){return h++,n.delete()}));c.push(f.next((function(){E(1===h,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var d=[],m=0,y=n.mutations;m<y.length;m++){var v=y[m],w=mn.key(e,v.key.path,n.batchId);c.push(o.delete(w)),d.push(v.key)}return Xt.waitFor(c).next((function(){return d}))}function te(e){return e instanceof Uint8Array?(E("YES"===t.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ee(t){return jn.getStore(t,dn.store)}function ne(t){return jn.getStore(t,mn.store)}function re(t){return jn.getStore(t,pn.store)}var oe;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(oe||(oe={}));var ie=function(){function t(t,e){this.generatorId=t,E((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){E((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(oe.QueryCache,2)},t.forSyncEngine=function(){return new t(oe.SyncEngine)},t}(),ae="SimpleDb",se=function(){function e(t){this.db=t,12.2===e.getIOSVersion(f.getUA())&&x("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return E(e.isAvailable(),"IndexedDB not supported in current environment."),S(ae,"Opening database:",t),new Xt((function(o,c){var l=window.indexedDB.open(t,n);l.onsuccess=function(t){var n=t.target.result;o(new e(n))},l.onblocked=function(){c(new k(C.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(t){var e=t.target.error;"VersionError"===e.name?c(new k(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(e)},l.onupgradeneeded=function(e){S(ae,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,o=new ce(l.transaction);r.createOrUpgrade(n,o,e.oldVersion,cn).next((function(){S(ae,"Database upgrade to version "+cn+" complete")}))}})).toPromise()},e.delete=function(t){return S(ae,"Removing database:",t),he(window.indexedDB.deleteDatabase(t)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===t.env.USE_MOCK_PERSISTENCE;var n=f.getUA(),r=e.getIOSVersion(n),o=0<r&&r<10,c=e.getAndroidVersion(n),l=0<c&&c<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||o||l)},e.getStore=function(t,e){return t.store(e)},e.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,n){var r=ce.open(this.db,t,e),o=n(r).catch((function(t){return r.abort(t),Xt.reject(t)})).toPromise();return o.catch((function(){})),r.completionPromise.then((function(){return o}))},e.prototype.close=function(){this.db.close()},e}(),ue=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return he(this.dbCursor.delete())},t}(),ce=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new xt,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=pe(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(S(ae,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return E(!!e,"Object store not part of transaction: "+t),new le(e)},t}(),le=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(S(ae,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(S(ae,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),he(n)},t.prototype.add=function(t){return S(ae,"ADD",this.store.name,t,t),he(this.store.add(t))},t.prototype.get=function(t){var e=this;return he(this.store.get(t)).next((function(n){return void 0===n&&(n=null),S(ae,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return S(ae,"DELETE",this.store.name,t),he(this.store.delete(t))},t.prototype.count=function(){return S(ae,"COUNT",this.store.name),he(this.store.count())},t.prototype.loadAll=function(t,e){var cursor=this.cursor(this.options(t,e)),n=[];return this.iterateCursor(cursor,(function(t,e){n.push(e)})).next((function(){return n}))},t.prototype.deleteAll=function(t,e){S(ae,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var cursor=this.cursor(n);return this.iterateCursor(cursor,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var cursor=this.cursor(n);return this.iterateCursor(cursor,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Xt((function(n,r){e.onerror=function(t){var e=pe(t.target.error);r(e)},e.onsuccess=function(e){var cursor=e.target.result;cursor?t(cursor.primaryKey,cursor.value).next((function(t){t?cursor.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new Xt((function(r,o){t.onerror=function(t){o(t.target.error)},t.onsuccess=function(t){var cursor=t.target.result;if(cursor){var o=new ue(cursor),c=e(cursor.primaryKey,cursor.value,o);if(c instanceof Xt){var l=c.catch((function(t){return o.done(),Xt.reject(t)}));n.push(l)}o.isDone?r():null===o.skipToKey?cursor.continue():cursor.continue(o.skipToKey)}else r()}})).next((function(){return Xt.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(E(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function he(t){return new Xt((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=pe(t.target.error);n(e)}}))}var fe=!1;function pe(t){var e=se.getIOSVersion(f.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new k("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fe||(fe=!0,setTimeout((function(){throw r}),0)),r}}return t}var de=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=ie.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return Nt.fromTimestamp(new kt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return ge(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(o){return o.highestListenSequenceNumber=e,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),r.saveMetadata(t,o)}))},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)}))}))},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return me(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return E(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,o=0,c=[];return me(t).iterate((function(l,h){var f=r.serializer.fromDbTarget(h);f.sequenceNumber<=e&&void 0===n[f.targetId]&&(o++,c.push(r.removeQueryData(t,f)))})).next((function(){return Xt.waitFor(c)})).next((function(){return o}))},t.prototype.forEachTarget=function(t,e){var n=this;return me(t).iterate((function(t,r){var o=n.serializer.fromDbTarget(r);e(o)}))},t.prototype.retrieveMetadata=function(t){return ye(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,jn.getStore(n,xn.store)).put(xn.key,e);var n},t.prototype.saveQueryData=function(t,e){return me(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),c=null;return me(t).iterate({range:o,index:wn.queryTargetsIndexName},(function(t,r,o){var l=n.serializer.fromDbTarget(r);e.isEqual(l.query)&&(c=l,o.done())})).next((function(){return c}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,o=[],c=ve(t);return e.forEach((function(e){var path=Et(e.path);o.push(c.put(new Sn(n,path))),o.push(r.referenceDelegate.addReference(t,e))})),Xt.waitFor(o)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,o=ve(t);return Xt.forEach(e,(function(e){var path=Et(e.path);return Xt.waitFor([o.delete([n,path]),r.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ve(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ve(t),o=Gt();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var path=Ct(t[1]),r=new St(path);o=o.add(r)})).next((function(){return o}))},t.prototype.containsKey=function(t,e){var path=Et(e.path),n=IDBKeyRange.bound([path],[st(path)],!1,!0),r=0;return ve(t).iterate({index:Sn.documentTargetsIndex,keysOnly:!0,range:n},(function(t,e,n){var o=t[0];t[1];0!==o&&(r++,n.done())})).next((function(){return r>0}))},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return me(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();function me(t){return jn.getStore(t,wn.store)}function ye(t){return se.getStore(t,xn.store).get(xn.key).next((function(t){return E(null!==t,"Missing metadata row."),t}))}function ge(t){return ye(t).next((function(t){return t.highestListenSequenceNumber}))}function ve(t){return jn.getStore(t,Sn.store)}var be,we=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new Pt(wt.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Se=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),xe=function(t,e){this.version=t,this.transformResults=e};!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(be||(be={}));var _e,Te,Ee=function(){function t(t,e){this.updateTime=t,this.exists=e,E(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ke&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ke:(E(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return!(e=this.updateTime,n=t.updateTime,(null!=e?!n||!e.isEqual(n):e!==n)||this.exists!==t.exists);var e,n},t.NONE=new t,t}(),Ie=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&E(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Ke?t.version:Nt.MIN},t}(),Ae=function(t){function e(e,n,r){var o=t.call(this)||this;return o.key=e,o.value=n,o.precondition=r,o.type=be.Set,o}return h.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),E(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Ke(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ie.getPostMutationVersion(t);return new Ke(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Ie),Ce=function(t){function e(e,data,n,r){var o=t.call(this)||this;return o.key=e,o.data=data,o.fieldMask=n,o.precondition=r,o.type=be.Patch,o}return h.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),E(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Xe(this.key,e.version);var n=this.patchDocument(t);return new Ke(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Ie.getPostMutationVersion(t),o=this.patchDocument(t);return new Ke(this.key,r,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var data;return data=t instanceof Ke?t.data():Ge.EMPTY,this.patchObject(data)},e.prototype.patchObject=function(data){var t=this;return this.fieldMask.fields.forEach((function(e){if(!e.isEmpty()){var n=t.data.field(e);data=null!==n?data.set(e,n):data.delete(e)}})),data},e}(Ie),ke=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=be.Transform,r.precondition=Ee.exists(!0),r}return h.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),E(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Xe(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),o=e.version,c=this.transformObject(n.data(),r);return new Ke(this.key,o,{hasCommittedMutations:!0},c)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),o=this.localTransformResults(n,t,e),c=this.transformObject(r.data(),o);return new Ke(this.key,r.version,{hasLocalMutations:!0},c)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var o=r[n],c=t instanceof Ke?t.field(o.field):void 0,l=o.transform.computeBaseValue(c||null);null!=l&&(e=null==e?Ge.EMPTY.set(o.field,l):e.set(o.field,l))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&at(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){E(t instanceof Ke,"Unknown MaybeDocument type "+t);var e=t;return E(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];E(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<e.length;i++){var r=this.fieldTransforms[i],o=r.transform,c=null;t instanceof Ke&&(c=t.field(r.field)),n.push(o.applyToRemoteDocument(c,e[i]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],o=0,c=this.fieldTransforms;o<c.length;o++){var l=c[o],h=l.transform,f=null;e instanceof Ke&&(f=e.field(l.field)),null===f&&n instanceof Ke&&(f=n.field(l.field)),r.push(h.applyToLocalView(f,t))}return r},e.prototype.transformObject=function(data,t){E(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=0;i<this.fieldTransforms.length;i++){var e=this.fieldTransforms[i].field;data=data.set(e,t[i])}return data},e}(Ie),Ne=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=be.Delete,r}return h.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),E(null==e.transformResults,"Transform results received by DeleteMutation."),new Ye(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&E(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ye(this.key,Nt.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Ie);!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(_e||(_e={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(Te||(Te={}));var De=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Te.Estimate,n);case"previous":return new t(Te.Previous,n);case"none":case void 0:return new t(Te.Default,n);default:return T("fromSnapshotOptions() called with invalid options.")}},t}(),Me=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return E(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),it(this.typeOrder,t.typeOrder)},t}(),Oe=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=_e.NullValue,e.internalValue=null,e}return h.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Me),Re=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.BooleanValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?it(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Me),Pe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.NumberValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e}(Me);function Le(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Le(this.internalValue,t.internalValue)},e}(Pe),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Le(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Pe),Fe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.StringValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?it(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Me),ze=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.TimestampValue,n}return h.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Ve?-1:this.defaultCompareTo(t)},e}(Me),Ve=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=_e.TimestampValue,r}return h.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Te.Estimate?new ze(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Te.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof ze?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Me),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.BlobValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Me),je=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=_e.RefValue,r}return h.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:St.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Me),We=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.GeoPointValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Me),Ge=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.ObjectValue,n}return h.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext();if(o.key!==c.key||!o.value.isEqual(c.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext(),l=it(o.key,c.key)||o.value.compareTo(c.value);if(l)return l}return it(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(path,t){if(E(!path.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===path.length)return this.setChild(path.firstSegment(),t);var n=this.child(path.firstSegment());n instanceof e||(n=e.EMPTY);var r=n.set(path.popFirst(),t);return this.setChild(path.firstSegment(),r)},e.prototype.delete=function(path){if(E(!path.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===path.length)return new e(this.internalValue.remove(path.firstSegment()));var t=this.child(path.firstSegment());if(t instanceof e){var n=t.delete(path.popFirst());return new e(this.internalValue.insert(path.firstSegment(),n))}return this},e.prototype.contains=function(path){return null!==this.field(path)},e.prototype.field=function(path){E(!path.isEmpty(),"Can't get field of empty path");var t=this;return path.forEach((function(n){t=t instanceof e?t.internalValue.get(n):null})),t},e.prototype.fieldMask=function(){var t=new Pt(wt.comparator);return this.internalValue.forEach((function(n,r){var o=new wt([n]);if(r instanceof e){var c=r.fieldMask().fields;c.isEmpty()?t=t.add(o):c.forEach((function(e){t=t.add(o.child(e))}))}else t=t.add(o)})),we.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Dt(it)),e}(Me),Qe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=_e.ArrayValue,n}return h.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++){if(n[e].isEqual(t))return!0}return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var i=0;i<this.internalValue.length;i++)if(!this.internalValue[i].isEqual(t.internalValue[i]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(t.internalValue[i]);if(r)return r}return it(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(Me),He=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return St.comparator(t.key,e.key)},t}(),Ke=function(t){function e(e,n,r,o,c,l){var h=t.call(this,e,n)||this;return h.objectValue=o,h.proto=c,h.converter=l,E(void 0!==h.objectValue||void 0!==h.proto&&void 0!==h.converter,"If objectValue is not defined, proto and converter need to be set."),h.hasLocalMutations=!!r.hasLocalMutations,h.hasCommittedMutations=!!r.hasCommittedMutations,h}return h.__extends(e,t),e.prototype.field=function(path){if(this.objectValue)return this.objectValue.field(path);this.fieldValueCache||(this.fieldValueCache=new Map);var t=path.canonicalString(),e=this.fieldValueCache.get(t);if(void 0===e){var n=this.getProtoField(path);e=void 0===n?null:this.converter(n),this.fieldValueCache.set(t,e)}return e},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Ge.EMPTY;R(this.proto.fields,(function(n,r){e=e.set(new wt([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(path){E(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields[path.firstSegment()],i=1;i<path.length;++i){if(!t||!t.mapValue)return;t=t.mapValue.fields[path.get(i)]}return t},e.compareByField=function(t,e,n){var r=e.field(t),o=n.field(t);return null!==r&&null!==o?r.compareTo(o):T("Trying to compare documents on fields that don't exist")},e}(He),Ye=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.hasCommittedMutations=!(!r||!r.hasCommittedMutations),o}return h.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(He),Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(He),$e=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];if(l.isEqual(t))return h}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){R(this.inner,(function(e,n){for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];t(l,h)}}))},t.prototype.isEmpty=function(){return P(this.inner)},t}(),Je=function(){function t(){this.changes=new $e((function(t){return t.toString()})),this.changesApplied=!1}return t.prototype.addEntry=function(t){this.assertNotApplied(),this.changes.set(t.key,t)},t.prototype.removeEntry=function(t){this.assertNotApplied(),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Xt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){E(!this.changesApplied,"Changes have already been applied.")},t}(),Ze="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",tn=function(){function t(t,e,n){this.serializer=t,this.indexManager=e,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=se.getStore(t,En.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntry=function(t,e,n){var r=this;return nn(t).put(on(e),n).next((function(){r.indexManager.addToCollectionParentIndex(t,e.path.popLast())}))},t.prototype.removeEntry=function(t,e){var n=nn(t),r=on(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e,n){var r=this;return this.getMetadata(t).next((function(o){return o.byteSize+=n,r.setMetadata(t,o).next((function(){if(r.keepDocumentChangeLog)return rn(t).put({changes:r.serializer.toDbResourcePaths(e)})}))}))},t.prototype.getEntry=function(t,e){var n=this;return nn(t).get(on(e)).next((function(t){return t?n.serializer.fromDbRemoteDocument(t):null}))},t.prototype.getSizedEntry=function(t,e){var n=this;return nn(t).get(on(e)).next((function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:an(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ft();return this.forEachDbEntry(t,e,(function(t,e){r=e?r.insert(t,n.serializer.fromDbRemoteDocument(e)):r.insert(t,null)})).next((function(){return r}))},t.prototype.getSizedEntries=function(t,e){var n=this,r=Ft(),o=new Dt(St.comparator);return this.forEachDbEntry(t,e,(function(t,e){e?(r=r.insert(t,n.serializer.fromDbRemoteDocument(e)),o=o.insert(t,an(e))):(r=r.insert(t,null),o=o.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:o}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Xt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),c=o.getNext();return nn(t).iterate({range:r},(function(t,e,r){for(var l=St.fromSegments(t);c&&St.comparator(c,l)<0;)n(c,null),c=o.getNext();c&&c.isEqual(l)&&(n(c,e),c=o.hasNext()?o.getNext():null),c?r.skip(c.path.toArray()):r.done()})).next((function(){for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this;E(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Vt(),o=e.path.length+1,c=e.path.toArray(),l=IDBKeyRange.lowerBound(c);return nn(t).iterate({range:l},(function(t,c,l){if(t.length===o){var h=n.serializer.fromDbRemoteDocument(c);e.path.isPrefixOf(h.key.path)?h instanceof Ke&&e.matches(h)&&(r=r.insert(h.key,h)):l.done()}})).next((function(){return r}))},t.prototype.getNewDocumentChanges=function(t){var e=this;E(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Gt(),r=Bt(),o=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),c=!0,l=rn(t);return l.iterate({range:o},(function(t,r){if(c&&(c=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(l).next((function(){return Xt.reject(new k(C.DATA_LOSS,Ze))}));n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id})).next((function(){var o=[];return n.forEach((function(n){o.push(e.getEntry(t,n).next((function(t){var e=t||new Ye(n,Nt.forDeletedDoc());r=r.insert(n,e)})))})),Xt.waitFor(o)})).next((function(){return r}))},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return rn(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},(function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()}))},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return en(t).get(bn.key).next((function(t){return E(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return en(t).put(bn.key,e)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n.documentSizes=new $e((function(t){return t.toString()})),n}return h.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,o=Gt();return this.changes.forEach((function(c,l){var h=e.documentSizes.get(c);if(E(void 0!==h,"Cannot modify a document that wasn't read (for "+c+")"),l){var f=e.documentCache.serializer.toDbRemoteDocument(l),d=an(f);r+=d-h,n.push(e.documentCache.addEntry(t,c,f))}else r-=h,n.push(e.documentCache.removeEntry(t,c));o=o.add(c)})),n.push(this.documentCache.updateMetadata(t,o,r)),Xt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(Je),t}();function en(t){return jn.getStore(t,bn.store)}function nn(t){return jn.getStore(t,vn.store)}function rn(t){return jn.getStore(t,En.store)}function on(t){return t.path.toArray()}function an(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw T("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var sn=function(){function t(){this.collectionParentIndex=new un}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Xt.resolve()},t.prototype.getCollectionParents=function(t,e){return Xt.resolve(this.collectionParentIndex.getEntries(e))},t}(),un=function(){function t(){this.index={}}return t.prototype.add=function(t){E(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pt(vt.comparator),o=!r.has(n);return this.index[e]=r.add(n),o},t.prototype.getEntries=function(t){return(this.index[t]||new Pt(vt.comparator)).toArray()},t}(),cn=8,ln=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var o=this;E(n<r&&n>=0&&r<=cn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(fn.store)}(t),function(t){t.createObjectStore(pn.store,{keyPath:pn.keyPath}),t.createObjectStore(dn.store,{keyPath:dn.keyPath,autoIncrement:!0}).createIndex(dn.userMutationsIndex,dn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(mn.store)}(t),Tn(t),function(t){t.createObjectStore(vn.store)}(t));var p=Xt.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(Sn.store),t.deleteObjectStore(wn.store),t.deleteObjectStore(xn.store)}(t),Tn(t)),p=p.next((function(){return function(t){var e=t.store(xn.store),n=new xn(0,0,Nt.MIN.toTimestamp(),0);return e.put(xn.key,n)}(e)}))),n<4&&r>=4&&(0!==n&&(p=p.next((function(){return function(t,e){return e.store(dn.store).loadAll().next((function(n){t.deleteObjectStore(dn.store),t.createObjectStore(dn.store,{keyPath:dn.keyPath,autoIncrement:!0}).createIndex(dn.userMutationsIndex,dn.userMutationsKeyPath,{unique:!0});var r=e.store(dn.store),o=n.map((function(t){return r.put(t)}));return Xt.waitFor(o)}))}(t,e)}))),p=p.next((function(){!function(t){t.createObjectStore(In.store,{keyPath:In.keyPath})}(t),function(t){t.createObjectStore(En.store,{keyPath:"id",autoIncrement:!0})}(t)}))),n<5&&r>=5&&(p=p.next((function(){return o.removeAcknowledgedMutations(e)}))),n<6&&r>=6&&(p=p.next((function(){return function(t){t.createObjectStore(bn.store)}(t),o.addDocumentGlobal(e)}))),n<7&&r>=7&&(p=p.next((function(){return o.ensureSequenceNumbers(e)}))),n<8&&r>=8&&(p=p.next((function(){return o.createCollectionParentIndex(t,e)}))),p},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(vn.store).iterate((function(t,n){e+=an(n)})).next((function(){var n=new bn(e);return t.store(bn.store).put(bn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(pn.store),r=t.store(dn.store);return n.loadAll().next((function(n){return Xt.forEach(n,(function(n){var o=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(dn.userMutationsIndex,o).next((function(r){return Xt.forEach(r,(function(r){E(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var o=e.serializer.fromDbMutationBatch(r);return Zt(t,n.userId,o).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Sn.store),n=t.store(vn.store);return ge(t).next((function(t){var r=[];return n.iterate((function(n,o){var path=new vt(n),c=function(path){return[0,Et(path)]}(path);r.push(e.get(c).next((function(n){return n?Xt.resolve():function(path){return e.put(new Sn(0,Et(path),t))}(path)})))})).next((function(){return Xt.waitFor(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(_n.store,{keyPath:_n.keyPath});var n=e.store(_n.store),r=new un,o=function(t){if(r.add(t)){var e=t.lastSegment(),o=t.popLast();return n.put({collectionId:e,parent:Et(o)})}};return e.store(vn.store).iterate({keysOnly:!0},(function(t,e){var path=new vt(t);return o(path.popLast())})).next((function(){return e.store(mn.store).iterate({keysOnly:!0},(function(t,e){t[0];var n=t[1],path=(t[2],Ct(n));return o(path.popLast())}))}))},t}();var hn=function(t,e){this.seconds=t,this.nanoseconds=e},fn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var pn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),dn=function(){function t(t,e,n,r,o){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var mn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,path){return[t,Et(path)]},t.key=function(t,path,e){return[t,Et(path),e]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var yn=function(path,t){this.path=path,this.readTime=t},gn=function(path,t){this.path=path,this.version=t},vn=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),bn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var wn=function(){function t(t,e,n,r,o,c){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.query=c}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Sn=function(){function t(t,path,e){this.targetId=t,this.path=path,this.sequenceNumber=e,E(0===t==(void 0!==e),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),xn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),_n=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function Tn(t){t.createObjectStore(Sn.store,{keyPath:Sn.keyPath}).createIndex(Sn.documentTargetsIndex,Sn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wn.store,{keyPath:wn.keyPath}).createIndex(wn.queryTargetsIndexName,wn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xn.store)}var En=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();var In=function(){function t(t,e,n,r,o){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=o}return t.store="clientMetadata",t.keyPath="clientId",t}();var An,Cn=[pn.store,dn.store,mn.store,vn.store,wn.store,fn.store,xn.store,Sn.store].concat([In.store,En.store]).concat([bn.store]).concat([_n.store]),kn=function(){function t(){this.collectionParentsCache=new un}return t.prototype.addToCollectionParentIndex=function(t,e){if(E(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(e)){E(e.length>=1,"Invalid collection path.");var n=e.lastSegment(),r=e.popLast();return Nn(t).put({collectionId:n,parent:Et(r)})}return Xt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[st(e),""],!1,!0);return Nn(t).loadAll(r).next((function(t){for(var r=0,o=t;r<o.length;r++){var c=o[r];if(c.collectionId!==e)break;n.push(Ct(c.parent))}return n}))},t}();function Nn(t){return jn.getStore(t,_n.store)}!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(An||(An={}));var Dn=function(){function t(t,e,n,r,o,c){void 0===o&&(o=Nt.MIN),void 0===c&&(c=A()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.resumeToken=c}return t.prototype.withSequenceNumber=function(e){return new t(this.query,this.targetId,this.purpose,e,this.snapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.query,this.targetId,this.purpose,this.sequenceNumber,n,e)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Mn=function(){function e(t){this.remoteSerializer=t}return e.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=St.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Ye(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=St.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new Xe(e,n)}return T("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(t){if(t instanceof Ke){var e=t.proto?t.proto:this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new vn(null,null,e,n)}if(t instanceof Ye){var path=t.key.path.toArray(),r=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new vn(null,new yn(path,r),null,n)}if(t instanceof Xe){path=t.key.path.toArray(),r=this.toDbTimestamp(t.version);return new vn(new gn(path,r),null,null,!0)}return T("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new hn(e.seconds,e.nanoseconds)},e.prototype.fromDbTimestamp=function(t){var e=new kt(t.seconds,t.nanoseconds);return Nt.fromTimestamp(e)},e.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),o=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new dn(t,e.batchId,e.localWriteTime.toMillis(),r,o)},e.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),o=kt.fromMillis(t.localWriteTimeMs);return new Kt(t.batchId,o,n,r)},e.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(Et(t.path))})),e},e.prototype.fromDbResourcePaths=function(t){for(var e=Gt(),n=0,r=t;n<r.length;n++){var o=r[n];e=e.add(new St(Ct(o)))}return e},e.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Dn(e,t.targetId,An.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},e.prototype.toDbTarget=function(e){E(An.Listen===e.purpose,"Only queries with purpose "+An.Listen+" may be stored, got "+e.purpose);var n,r,o=this.toDbTimestamp(e.snapshotVersion);return n=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(E("YES"===t.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=e.resumeToken.toString()):r=e.resumeToken,new wn(e.targetId,e.query.canonicalId(),o,r,e.sequenceNumber,n)},e}();function On(t,e){var n=t[0],r=t[1],o=e[0],c=e[1],l=it(n,o);return 0===l?it(r,c):l}var Rn=function(){function t(t){this.maxElements=t,this.buffer=new Pt(On),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();On(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Pn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),qn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){E(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ln.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;E(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;S("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(lt.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Wn)}))},t}(),Bn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Xt.resolve(yt.INVALID);var r=new Rn(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Ln.COLLECTION_DISABLED?(S("LruGarbageCollector","Garbage collection skipped; disabled"),Xt.resolve(Pn)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Pn):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,c,l,h,f,d,m=this,y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>m.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+e),r=m.params.maximumSequenceNumbersToCollect):r=e,l=Date.now(),m.nthSequenceNumber(t,r)})).next((function(r){return n=r,h=Date.now(),m.removeTargets(t,n,e)})).next((function(e){return c=e,f=Date.now(),m.removeOrphanedDocuments(t,n)})).next((function(t){(d=Date.now(),v()<=o.DEBUG)&&S("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(l-y)+"ms\n\tDetermined least recently used "+r+" in "+(h-l)+"ms\n\tRemoved "+c+" targets in "+(f-h)+"ms\n\tRemoved "+t+" documents in "+(d-f)+"ms\nTotal Duration: "+(d-y)+"ms");return Xt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:c,documentsRemoved:t})}))},t}(),Fn="IndexedDbPersistence",zn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Un=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return h.__extends(e,t),e}((function(){})),jn=function(){function t(e,n,r,o,c,l,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=l,this.sequenceNumberSyncer=f,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new Hn(this,c),this.dbName=n+t.MAIN_DATABASE,this.serializer=new Mn(h),this.document=o.document,this.queryCache=new de(this.referenceDelegate,this.serializer),this.indexManager=new kn,this.remoteDocumentCache=new tn(this.serializer,this.indexManager,this.allowTabSynchronization),!o.window||!o.window.localStorage)throw new k(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=o.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Un)return se.getStore(t.simpleDbTransaction,e);throw T("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return h.__awaiter(this,void 0,void 0,(function(){var n;return h.__generator(this,(function(r){switch(r.label){case 0:if(!t.isAvailable())throw new k(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return E(!this.started,"IndexedDbPersistence double-started!"),E(null!==this.window,"Expected 'window' to be defined"),se.openOrCreate(this.dbName,cn,new ln(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.startRemoteDocumentCache()})).then((function(){return t.simpleDb.runTransaction("readonly",[xn.store],(function(e){return ge(e).next((function(e){t.listenSequence=new yt(e,t.sequenceNumberSyncer)}))}))})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Cn,(function(e){return t.remoteDocumentCache.start(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return h.__awaiter(e,void 0,void 0,(function(){return h.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return h.__awaiter(e,void 0,void 0,(function(){return h.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return h.__awaiter(e,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Cn,(function(e){return Qn(e).put(new In(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(t.isPrimary)})),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0}))}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return Gn(t).get(fn.key).next((function(t){return Xt.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return Qn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return h.__generator(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(o){var c=t.getStore(o,In.store);return c.loadAll().next((function(t){e=r.filterActiveClients(t,18e5),n=t.filter((function(t){return-1===e.indexOf(t)}))})).next((function(){return Xt.forEach(n,(function(t){return c.delete(t.clientId)}))})).next((function(){if((e=e.filter((function(t){return t.clientId!==r.clientId}))).length>0){var t=e.map((function(t){return t.lastProcessedDocumentChangeId||0})),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(o,n)}}))}))]);case 1:o.sent(),n.forEach((function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))})),o.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(lt.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Gn(t).get(fn.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new k(C.FAILED_PRECONDITION,Vn);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qn(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,o=e.networkEnabled===t.networkEnabled;if(n||r&&o)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&S(Fn,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return h.__awaiter(this,void 0,void 0,(function(){var t=this;return h.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[fn.store,In.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[In.store],(function(e){return Qn(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return h.__awaiter(this,void 0,void 0,(function(){var n;return h.__generator(this,(function(r){switch(r.label){case 0:return t.isAvailable()?(n=e+t.MAIN_DATABASE,[4,se.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return E(this.started,"Cannot initialize MutationQueue before persistence is started."),$t.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return E(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return E(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return E(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;return S(Fn,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Cn,(function(o){return"readwrite-primary"===e?r.verifyPrimaryLease(o).next((function(e){if(!e)throw x("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new k(C.FAILED_PRECONDITION,zn);return n(new Un(o,r.listenSequence.next()))})).next((function(t){return r.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(new Un(o,r.listenSequence.next()))}))}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Gn(t).get(fn.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new k(C.FAILED_PRECONDITION,Vn)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new fn(this.clientId,this.allowTabSynchronization,Date.now());return Gn(t).put(fn.key,e)},t.isAvailable=function(){return se.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Gn(t);return n.get(fn.key).next((function(t){return e.isLocalClient(t)?(S(Fn,"Releasing primary lease."),n.delete(fn.key)):Xt.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(x("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(E(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(E("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return S(Fn,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return x(Fn,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){x("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Wn(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){if(!function(t){return t.code===C.FAILED_PRECONDITION&&t.message===zn}(t))throw t;return S(Fn,"Unexpectedly lost primary lease"),[2]}))}))}function Gn(t){return t.store(fn.store)}function Qn(t){return t.store(In.store)}var Hn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Bn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Kn(t,e)},t.prototype.removeReference=function(t,e){return Kn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Kn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Xt.resolve(!0):function(t,e){var n=!1;return re(t).iterateSerial((function(r){return Jt(t,r,e).next((function(t){return t&&(n=!0),Xt.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],c=0;return this.forEachOrphanedDocument(t,(function(l,h){if(h<=e){var p=n.isPinned(t,l).next((function(e){if(!e)return c++,r.getEntry(t,l).next((function(){return r.removeEntry(l),ve(t).delete([0,Et(l.path)])}))}));o.push(p)}})).next((function(){return Xt.waitFor(o)})).next((function(){return r.apply(t)})).next((function(){return c}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Kn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=ve(t),o=yt.INVALID;return r.iterate({index:Sn.documentTargetsIndex},(function(t,r){var c=t[0],path=(t[1],r.path),l=r.sequenceNumber;0===c?(o!==yt.INVALID&&e(new St(Ct(n)),o),o=l,n=path):o=yt.INVALID})).next((function(){o!==yt.INVALID&&e(new St(Ct(n)),o)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Kn(t,e){return ve(t).put(function(t,e){return new Sn(0,Et(t.path),e)}(e,t.currentSequenceNumber))}var Yn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,o=n;r<o.length;r++){t=o[r].applyToLocalView(e,t)}return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Ft();return e.forEach((function(t,e){for(var o=0,c=n;o<c.length;o++){e=c[o].applyToLocalView(t,e)}r=r.insert(t,e)})),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var o=n.applyLocalMutationsToDocuments(t,e,r),c=Bt();return o.forEach((function(t,e){e||(e=new Ye(t,Nt.forDeletedDoc())),c=c.insert(t,e)})),c}))},t.prototype.getDocumentsMatchingQuery=function(t,e){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new St(e)).next((function(t){var e=Vt();return t instanceof Ke&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e){var n=this;E(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,o=Vt();return this.indexManager.getCollectionParents(t,r).next((function(c){return Xt.forEach(c,(function(c){var l=e.asCollectionQueryAtPath(c.child(r));return n.getDocumentsMatchingCollectionQuery(t,l).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next((function(r){return n=r,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return r=e,o.addMissingBaseDocuments(t,r,n).next((function(t){n=t;for(var e=0,o=r;e<o.length;e++)for(var c=o[e],l=0,h=c.mutations;l<h.length;l++){var f=h[l],d=f.key,m=n.get(d),y=f.applyToLocalView(m,m,c.localWriteTime);n=y instanceof Ke?n.insert(d,y):n.remove(d)}}))})).next((function(){return n.forEach((function(t,r){e.matches(r)||(n=n.remove(t))})),n}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Gt(),o=0,c=e;o<c.length;o++)for(var l=0,h=c[o].mutations;l<h.length;l++){var f=h[l];f instanceof Ce&&null===n.get(f.key)&&(r=r.add(f.key))}var d=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ke&&(d=d.insert(t,e))})),d}))},t}(),Xn=function(){function t(){this.refsByKey=new Pt($n.compareByKey),this.refsByTarget=new Pt($n.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new $n(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new $n(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=St.EMPTY,r=new $n(n,t),o=new $n(n,t+1),c=[];return this.refsByTarget.forEachInRange([r,o],(function(t){e.removeRef(t),c.push(t.key)})),c},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=St.EMPTY,n=new $n(e,t),r=new $n(e,t+1),o=Gt();return this.refsByTarget.forEachInRange([n,r],(function(t){o=o.add(t.key)})),o},t.prototype.containsKey=function(t){var e=new $n(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),$n=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return St.comparator(t.key,e.key)||it(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return it(t.targetOrBatchId,e.targetOrBatchId)||St.comparator(t.key,e.key)},t}(),Jn=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Xn,this.queryDataByTarget={},E(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Yn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",(function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next((function(o){return r=o,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Yn(e.remoteDocuments,e.mutationQueue,e.persistence.getIndexManager()),e.mutationQueue.getAllMutationBatches(n)})).next((function(t){for(var o=[],c=[],l=Gt(),h=0,f=r;h<f.length;h++){var d=f[h];o.push(d.batchId);for(var m=0,y=d.mutations;m<y.length;m++){var v=y[m];l=l.add(v.key)}}for(var w=0,S=t;w<S.length;w++){d=S[w];c.push(d.batchId);for(var x=0,_=d.mutations;x<_.length;x++){v=_[x];l=l.add(v.key)}}return e.localDocuments.getDocuments(n,l).next((function(t){return{affectedDocuments:t,removedBatchIds:o,addedBatchIds:c}}))}))}))},t.prototype.localWrite=function(t){var e=this,n=kt.now(),r=t.reduce((function(t,e){return t.add(e.key)}),Gt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return e.localDocuments.getDocuments(o,r).next((function(r){for(var c=[],l=0,h=t;l<h.length;l++){var f=h[l],d=f.extractBaseValue(r.get(f.key));null!=d&&c.push(new Ce(f.key,d,d.fieldMask(),Ee.exists(!0)))}return e.mutationQueue.addMutationBatch(o,n,c,t).next((function(t){var e=t.applyToLocalDocumentSet(r);return{batchId:t.batchId,changes:e}}))}))}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):Xt.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),o=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,o)})).next((function(){return o.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return E(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer(),o=e.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(c){var l=[];O(e.targetChanges,(function(e,r){var h=n.queryDataByTarget[e];if(h){l.push(n.queryCache.removeMatchingKeys(c,r.removedDocuments,e).next((function(){return n.queryCache.addMatchingKeys(c,r.addedDocuments,e)})));var f=r.resumeToken;if(f.length>0){var d=h.withResumeToken(f,o);n.queryDataByTarget[e]=d,t.shouldPersistQueryData(h,d,r)&&l.push(n.queryCache.updateQueryData(c,d))}}}));var h=Bt(),f=Gt();if(e.documentUpdates.forEach((function(t,e){f=f.add(t)})),l.push(r.getEntries(c,f).next((function(t){e.documentUpdates.forEach((function(o,f){var d=t.get(o);f instanceof Ye&&f.version.isEqual(Nt.MIN)?(r.removeEntry(o),h=h.insert(o,f)):null==d||f.version.compareTo(d.version)>0||0===f.version.compareTo(d.version)&&d.hasPendingWrites?(Nt.MIN.isEqual(e.snapshotVersion)&&x("LocalStore","Cannot add a document when the remote version is zero"),r.addEntry(f),h=h.insert(o,f)):S("LocalStore","Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",f.version),e.resolvedLimboDocuments.has(o)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(c,o))}))}))),!o.isEqual(Nt.MIN)){var d=n.queryCache.getLastRemoteSnapshotVersion(c).next((function(t){return E(o.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+o+" < "+t),n.queryCache.setTargetsMetadata(c,c.currentSequenceNumber,o)}));l.push(d)}return Xt.waitFor(l).next((function(){return r.apply(c)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(c,h)}))}))},t.shouldPersistQueryData=function(t,e,n){return E(e.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return Xt.forEach(t,(function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Xt.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",(function(n){var r;return e.queryCache.getQueryData(n,t).next((function(o){return o?(r=o,Xt.resolve()):e.queryCache.allocateTargetId(n).next((function(o){return r=new Dn(t,o,An.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)}))})).next((function(){return E(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r}))}))},t.prototype.releaseQuery=function(t,e){var n=this,r=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,(function(r){return n.queryCache.getQueryData(r,t).next((function(o){E(null!=o,"Tried to release nonexistent query: "+t);var c=o.targetId,l=n.queryDataByTarget[c],h=n.localViewReferences.removeReferencesForId(c);return delete n.queryDataByTarget[c],e?Xt.resolve():Xt.forEach(h,(function(t){return n.persistence.referenceDelegate.removeReference(r,t)})).next((function(){return n.persistence.referenceDelegate.removeTarget(r,l)}))}))}))},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",(function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,o=e.batch,c=o.keys(),l=Xt.resolve();return c.forEach((function(r){l=l.next((function(){return n.getEntry(t,r)})).next((function(t){var c=t,l=e.docVersions.get(r);E(null!==l,"ackVersions should contain every doc in the write."),(!c||c.version.compareTo(l)<0)&&((c=o.applyToRemoteDocument(r,c,e))?n.addEntry(c):E(!t,"Mutation batch "+o+" applied to document "+t+" resulted in null"))}))})),l.next((function(){return r.mutationQueue.removeMutationBatch(t,o)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.queryDataByTarget)}))},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",(function(n){return e.queryCache.getQueryDataForTarget(n,t).next((function(t){return t?t.query:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.remoteDocuments.getNewDocumentChanges(e)}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Zn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=A(),this.batchesByDocumentKey=new Pt($n.compareByKey)}return t.prototype.checkEmpty=function(t){return Xt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,o=this.indexOfExistingBatchId(r,"acknowledged");E(0===o,"Can only acknowledge the first batch in the mutation queue");var c=this.mutationQueue[o];return E(r===c.batchId,"Queue ordering failure: expected batch "+r+", got batch "+c.batchId),this.lastStreamToken=n,Xt.resolve()},t.prototype.getLastStreamToken=function(t){return Xt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Xt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){E(0!==r.length,"Mutation batches should not be empty");var o=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&E(this.mutationQueue[this.mutationQueue.length-1].batchId<o,"Mutation batchIDs must be monotonically increasing order");var c=new Kt(o,e,n,r);this.mutationQueue.push(c);for(var l=0,h=r;l<h.length;l++){var f=h[l];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new $n(f.key,o)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast())}return Xt.resolve(c)},t.prototype.lookupMutationBatch=function(t,e){return Xt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return E(null!=n,"Failed to find local mutation batch."),Xt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),o=r<0?0:r;return Xt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Xt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return Xt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new $n(e,0),o=new $n(e,Number.POSITIVE_INFINITY),c=[];return this.batchesByDocumentKey.forEachInRange([r,o],(function(t){E(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);E(null!==r,"Batches in the index must exist in the main table"),c.push(r)})),Xt.resolve(c)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pt(it);return e.forEach((function(t){var e=new $n(t,0),o=new $n(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,o],(function(e){E(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),Xt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){E(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,o=n;St.isDocumentKey(o)||(o=o.child(""));var c=new $n(new St(o),0),l=new Pt(it);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(l=l.add(t.targetOrBatchId)),!0)}),c),Xt.resolve(this.findMutationBatches(l))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;E(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Xt.forEach(e.mutations,(function(o){var c=new $n(o.key,e.batchId);return r=r.delete(c),n.referenceDelegate.removeMutationReference(t,o.key)})).next((function(){n.batchesByDocumentKey=r}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new $n(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Xt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&E(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Xt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return E(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return E(n.batchId===t,"If found batch must match"),n},t}(),er=function(){function t(t){this.persistence=t,this.queries=new $e((function(q){return q.canonicalId()})),this.lastRemoteSnapshotVersion=Nt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Xn,this.targetCount=0,this.targetIdGenerator=ie.forQueryCache()}return t.prototype.getTargetCount=function(t){return Xt.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach((function(t,n){return e(n)})),Xt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Xt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Xt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Xt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Xt.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return E(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Xt.resolve()},t.prototype.updateQueryData=function(t,e){return E(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Xt.resolve()},t.prototype.removeQueryData=function(t,e){return E(this.targetCount>0,"Removing a target from an empty cache"),E(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Xt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,o=0,c=[];return this.queries.forEach((function(l,h){h.sequenceNumber<=e&&!n[h.targetId]&&(r.queries.delete(l),c.push(r.removeMatchingKeysForTargetId(t,h.targetId)),o++)})),Xt.waitFor(c).next((function(){return o}))},t.prototype.getQueryCount=function(t){return Xt.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Xt.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return T("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((function(e){o.push(r.addReference(t,e))})),Xt.waitFor(o)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((function(e){o.push(r.removeReference(t,e))})),Xt.waitFor(o)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Xt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Xt.resolve(n)},t.prototype.containsKey=function(t,e){return Xt.resolve(this.references.containsKey(e))},t}();var nr=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Dt(St.comparator),this.newDocumentChanges=Gt(),this.size=0}return t.prototype.addEntry=function(t,e){var n=e.key,r=this.docs.get(n),o=r?r.size:0,c=this.sizer(e);return this.docs=this.docs.insert(n,{maybeDocument:e,size:c}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Xt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ft();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),Xt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e){E(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Vt(),r=new St(e.path.child("")),o=this.docs.getIteratorFrom(r);o.hasNext();){var c=o.getNext(),l=c.key,h=c.value.maybeDocument;if(!e.path.isPrefixOf(l.path))break;h instanceof Ke&&e.matches(h)&&(n=n.insert(h.key,h))}return Xt.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Xt.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t){var e=this,n=Bt();return this.newDocumentChanges.forEach((function(t){var r=e.docs.get(t),o=r?r.maybeDocument:new Ye(t,Nt.forDeletedDoc());n=n.insert(t,o)})),this.newDocumentChanges=Gt(),Xt.resolve(n)},t.prototype.newChangeBuffer=function(){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return Xt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return h.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,o){o?n.push(e.documentCache.addEntry(t,o)):e.documentCache.removeEntry(r)})),Xt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(Je),t}(),rr=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new yt(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new er(this);this.indexManager=new sn,this.remoteDocumentCache=new nr(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n,r){return new t(e,(function(p){return new ar(p,new Mn(n),r)}))},t.createEagerPersistence=function(e){return new t(e,(function(p){return new ir(p)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Zn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;S("MemoryPersistence","Starting transaction:",t);var o=new or(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next((function(t){return r.referenceDelegate.onTransactionCommitted(o).next((function(){return t}))})).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Xt.or((n=this.mutationQueues,r=[],R(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.containsKey(t,e)}})));var n,r},t}(),or=function(t){this.currentSequenceNumber=t},ir=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw T("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Xt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Xt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Xt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeQueryData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xt.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Xt.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Xt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ar=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new $e((function(t){return Et(t.path)})),this.garbageCollector=new Bn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Xt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Xt.forEach(this.orphanedSequenceNumbers,(function(r,o){return n.isPinned(t,r,o).next((function(t){return t?Xt.resolve():e(o)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.forEachDocumentKey(t,(function(o){return n.isPinned(t,o,e).next((function(t){t||(r++,c.removeEntry(o))}))})).next((function(){return c.apply(t)})).next((function(){return r}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Xt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Xt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Xt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Xt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw T("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Xt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Xt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Xt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),sr=Number,ur=sr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),cr=sr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,lr=sr.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function fr(t){return null==t}function pr(t){return lr(t)&&t<=cr&&t>=ur}var dr,mr=function(){function t(t,e,n,r,o){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===o&&(o=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=o,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,n-r);this.currentBaseMs>0&&S("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(dr||(dr={}));var yr,gr,vr=function(){function t(t,e,n,r,o,c){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=o,this.listener=c,this.state=dr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new mr(t,e)}return t.prototype.isStarted=function(){return this.state===dr.Starting||this.state===dr.Open||this.state===dr.Backoff},t.prototype.isOpen=function(){return this.state===dr.Open},t.prototype.start=function(){this.state!==dr.Error?(E(this.state===dr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(dr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){E(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=dr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return this.isOpen()?[2,this.close(dr.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(n){switch(n.label){case 0:return E(this.isStarted(),"Only started streams should be closed."),E(t===dr.Error||fr(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==dr.Error?this.backoff.reset():e&&e.code===C.RESOURCE_EXHAUSTED?(x(e.toString()),x("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===C.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;E(this.state===dr.Initial,"Must be in initial state to auth"),this.state=dr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new k(C.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;E(this.state===dr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return E(e.state===dr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=dr.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;E(this.state===dr.Error,"Should only perform backoff when in Error state"),this.state=dr.Backoff,this.backoff.backoffAndRun((function(){return h.__awaiter(t,void 0,void 0,(function(){return h.__generator(this,(function(t){return E(this.state===dr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=dr.Initial,this.start(),E(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return E(this.isStarted(),"Can't handle server close on non-started stream"),S("PersistentStream","close with error: "+t),this.stream=null,this.close(dr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),wr=function(t){function e(e,n,r,o,c){var l=t.call(this,e,lt.ListenStreamConnectionBackoff,lt.ListenStreamIdle,n,r,c)||this;return l.serializer=o,l}return h.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(vr),Sr=function(t){function e(e,n,r,o,c){var l=t.call(this,e,lt.WriteStreamConnectionBackoff,lt.WriteStreamIdle,n,r,c)||this;return l.serializer=o,l.handshakeComplete_=!1,l.lastStreamToken=A(),l}return h.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(E(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return E(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){E(this.isOpen(),"Writing handshake requires an opened stream"),E(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;E(this.isOpen(),"Writing mutations requires an opened stream"),E(this.handshakeComplete_,"Handshake must be complete before writing mutations"),E(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(vr),xr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Sr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new wr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Bt();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var o=[];return t.forEach((function(t){var e=r.get(t);E(!!e,"Missing entity in write response for "+t),o.push(e)})),o}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===C.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===C.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),_r=function(){function t(t){this.datastore=t,this.readVersions=jt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n=this;return h.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new k(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof Ye||t instanceof Ke?n.recordVersion(t):T("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,data){this.write(data.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,data){try{this.write(data.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new Ne(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return h.__awaiter(this,void 0,void 0,(function(){var t;return h.__generator(this,(function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),!t.isEmpty())throw new k(C.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof Ke)e=t.version;else{if(!(t instanceof Ye))throw T("Document in a transaction was a "+t.constructor.name);e=Nt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new k(C.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?Ee.updateTime(e):Ee.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(Nt.forDeletedDoc()))throw new k(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ee.updateTime(e)}return Ee.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){E(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(yr||(yr={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(gr||(gr={}));var Tr,Er=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=yr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(yr.Unknown),E(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(lt.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,E(t.state===yr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(yr.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===yr.Online?(this.setAndBroadcast(yr.Unknown),E(0===this.watchStreamFailures,"watchStreamFailures must be 0"),E(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(yr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===yr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(details){var t="Could not reach Cloud Firestore backend. "+details+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(x(t),this.shouldWarnClientIsOffline=!1):S("OnlineStateTracker",t)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}();function Ir(code){switch(code){case C.OK:return T("Treated status OK as error");case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return T("Unknown status code: "+code)}}function Ar(code){if(void 0===code)return x("GRPC error has no .code"),C.UNKNOWN;switch(code){case Tr.OK:return C.OK;case Tr.CANCELLED:return C.CANCELLED;case Tr.UNKNOWN:return C.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return C.INTERNAL;case Tr.UNAVAILABLE:return C.UNAVAILABLE;case Tr.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Tr.NOT_FOUND:return C.NOT_FOUND;case Tr.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Tr.ABORTED:return C.ABORTED;case Tr.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Tr.DATA_LOSS:return C.DATA_LOSS;default:return T("Unknown status code: "+code)}}function Cr(code){if(void 0===code)return Tr.OK;switch(code){case C.OK:return Tr.OK;case C.CANCELLED:return Tr.CANCELLED;case C.UNKNOWN:return Tr.UNKNOWN;case C.DEADLINE_EXCEEDED:return Tr.DEADLINE_EXCEEDED;case C.RESOURCE_EXHAUSTED:return Tr.RESOURCE_EXHAUSTED;case C.INTERNAL:return Tr.INTERNAL;case C.UNAVAILABLE:return Tr.UNAVAILABLE;case C.UNAUTHENTICATED:return Tr.UNAUTHENTICATED;case C.INVALID_ARGUMENT:return Tr.INVALID_ARGUMENT;case C.NOT_FOUND:return Tr.NOT_FOUND;case C.ALREADY_EXISTS:return Tr.ALREADY_EXISTS;case C.PERMISSION_DENIED:return Tr.PERMISSION_DENIED;case C.FAILED_PRECONDITION:return Tr.FAILED_PRECONDITION;case C.ABORTED:return Tr.ABORTED;case C.OUT_OF_RANGE:return Tr.OUT_OF_RANGE;case C.UNIMPLEMENTED:return Tr.UNIMPLEMENTED;case C.DATA_LOSS:return Tr.DATA_LOSS;default:return T("Unknown status code: "+code)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Tr||(Tr={}));var kr,Nr,Dr=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||St.comparator(e.key,n.key)}:function(t,e){return St.comparator(t.key,e.key)},this.keyedMap=Vt(),this.sortedSet=new Dt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(kr||(kr={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Nr||(Nr={}));var Mr,Or=function(){function t(){this.changeMap=new Dt(St.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==kr.Added&&n.type===kr.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===kr.Metadata&&n.type!==kr.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===kr.Modified&&n.type===kr.Modified?this.changeMap=this.changeMap.insert(e,{type:kr.Modified,doc:t.doc}):t.type===kr.Modified&&n.type===kr.Added?this.changeMap=this.changeMap.insert(e,{type:kr.Added,doc:t.doc}):t.type===kr.Removed&&n.type===kr.Added?this.changeMap=this.changeMap.remove(e):t.type===kr.Removed&&n.type===kr.Modified?this.changeMap=this.changeMap.insert(e,{type:kr.Removed,doc:n.doc}):t.type===kr.Added&&n.type===kr.Removed?this.changeMap=this.changeMap.insert(e,{type:kr.Modified,doc:t.doc}):T("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Rr=function(){function t(t,e,n,r,o,c,l,h){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=h}return t.fromInitialDocuments=function(e,n,r,o){var c=[];return n.forEach((function(t){c.push({type:kr.Added,doc:t})})),new t(e,n,Dr.emptySet(n),c,r,o,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),Pr=function(){function t(t,e,n,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,o=((r={})[e]=Lr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Nt.MIN,o,Ht(),Bt(),Gt())},t}(),Lr=function(){function t(t,e,n,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(A(),n,Gt(),Gt(),Gt())},t}(),qr=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Br=function(t,e){this.targetId=t,this.existenceFilter=e};!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Mr||(Mr={}));var Fr=function(t,e,n,r){void 0===n&&(n=A()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},zr=function(){function t(){this.pendingResponses=0,this.documentChanges=jr(),this._resumeToken=A(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Gt(),e=Gt(),n=Gt();return this.documentChanges.forEach((function(r,o){switch(o){case kr.Added:t=t.add(r);break;case kr.Modified:e=e.add(r);break;case kr.Removed:n=n.add(r);break;default:T("Encountered invalid change type: "+o)}})),new Lr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=jr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Vr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Bt(),this.pendingDocumentTargetMapping=Ur(),this.pendingTargetResets=new Pt(it)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ke?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Ye&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var o=0,c=t.removedTargetIds;o<c.length;o++){r=c[o];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case Mr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Mr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Mr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),E(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Mr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Mr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:T("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):O(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var o=r.query;if(o.isDocumentQuery())if(0===n){var c=new St(o.path);this.removeDocumentFromTarget(e,c,new Ye(c,Nt.forDeletedDoc()))}else E(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};O(this.targetStates,(function(r,o){var c=e.queryDataForActiveTarget(r);if(c){if(o.current&&c.query.isDocumentQuery()){var l=new St(c.query.path);null!==e.pendingDocumentUpdates.get(l)||e.targetContainsDocument(r,l)||e.removeDocumentFromTarget(r,l,new Ye(l,t))}o.hasPendingChanges&&(n[r]=o.toTargetChange(),o.clearPendingChanges())}}));var r=Gt();this.pendingDocumentTargetMapping.forEach((function(t,n){var o=!0;n.forEachWhile((function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===An.LimboResolution||(o=!1,!1)})),o&&(r=r.add(t))}));var o=new Pr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Bt(),this.pendingDocumentTargetMapping=Ur(),this.pendingTargetResets=new Pt(it),o},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?kr.Modified:kr.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,kr.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new zr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Pt(it),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||S("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;E(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new zr,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Ur(){return new Dt(St.comparator)}function jr(){return new Dt(St.comparator)}var Wr=function(){function t(t,e,n,r,o){var c=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=o,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return h.__awaiter(c,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(S("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Er(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return h.__awaiter(this,void 0,void 0,(function(){var t;return h.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(yr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(S("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return S("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(yr.Unknown),[2]}}))}))},t.prototype.listen=function(t){E(!D(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){E(D(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),P(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(yr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){E(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Vr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!P(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return h.__awaiter(this,void 0,void 0,(function(){var t=this;return h.__generator(this,(function(e){return O(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){return void 0===t&&E(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(yr.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n;return h.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(yr.Online),t instanceof Fr&&t.state===Mr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof qr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Br?this.watchChangeAggregator.handleExistenceFilter(t):(E(t instanceof Fr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Nt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;E(!t.isEqual(Nt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return O(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var o=e.listenTargets[n];o&&(e.listenTargets[n]=o.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(A(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Dn(n.query,t,An.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;E(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return h.__awaiter(e,void 0,void 0,(function(){return h.__generator(this,(function(e){return D(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},t.prototype.fillWritePipeline=function(){return h.__awaiter(this,void 0,void 0,(function(){var t,e;return h.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){E(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){E(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})).catch(Wn)},t.prototype.onMutationResult=function(t,e){var n=this;E(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),o=Yt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e=this;return h.__generator(this,(function(n){return void 0===t&&E(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]):[2]}))}))},t.prototype.handleHandshakeError=function(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){return Ir(t.code)?(S("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=A(),[2,this.localStore.setLastStreamToken(A()).catch(Wn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n=this;return h.__generator(this,(function(r){return Ir(code=t.code)&&code!==C.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var code}))}))},t.prototype.createTransaction=function(){return new _r(this.datastore)},t.prototype.restartNetwork=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(S("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(yr.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),Gr=function(){function t(t,e){if(B("GeoPoint",arguments,2),U("GeoPoint","number",1,t),U("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new k(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new k(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return it(this._lat,t._lat)||it(this._long,t._long)},t}(),Qr=function(){function t(path,t,e,n,r,o,c){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===c&&(c=null),this.path=path,this.collectionGroup=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=o,this.endAt=c,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(path){return new t(path)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[oo]:this.memoizedOrderBy=[new ro(t),oo];else{E(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,o=this.explicitOrderBy;r<o.length;r++){var c=o[r];this.memoizedOrderBy.push(c),c.field.isKeyField()&&(n=!0)}if(!n){var l=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:eo.ASCENDING;this.memoizedOrderBy.push(l===eo.ASCENDING?oo:io)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(filter){E(null==this.getInequalityFilterField()||!(filter instanceof Yr)||!filter.isInequality()||filter.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),E(!this.isDocumentQuery(),"No filtering allowed for document query");var e=this.filters.concat([filter]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),e,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){E(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(path){return new t(path,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++){t+=o[r].canonicalId(),t+=","}fr(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),fr(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var i=0;i<this.orderBy.length;i++)if(!this.orderBy[i].isEqual(t.orderBy[i]))return!1;if(this.filters.length!==t.filters.length)return!1;for(i=0;i<this.filters.length;i++)if(!this.filters[i].isEqual(t.filters[i]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,o=this.orderBy;r<o.length;r++){var c=o[r],l=c.compare(t,e);if(0!==l)return l;n=n||c.field.isKeyField()}return E(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!fr(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var filter=e[t];if(filter instanceof Yr&&filter.isInequality())return filter.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var filter=n[e];if(filter instanceof Yr&&t.indexOf(filter.op)>=0)return filter.op}return null},t.prototype.isDocumentQuery=function(){return St.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):St.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){E(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Hr=function(){},Kr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return T("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),Yr=function(t){function e(e,n,r){var o=t.call(this)||this;return o.field=e,o.op=n,o.value=r,o}return h.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===Kr.IN?(E(r instanceof Qe,"Comparing on key with IN, but filter value not an ArrayValue"),E(r.internalValue.every((function(t){return t instanceof je})),"Comparing on key with IN, but an array value was not a RefValue"),new $r(t,r)):(E(r instanceof je,"Comparing on key, but filter value not a RefValue"),E(n!==Kr.ARRAY_CONTAINS&&n!==Kr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Xr(t,n,r));if(r.isEqual(Oe.INSTANCE)){if(n!==Kr.EQUAL)throw new k(C.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Be.NAN)){if(n!==Kr.EQUAL)throw new k(C.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===Kr.ARRAY_CONTAINS?new Jr(t,r):n===Kr.IN?(E(r instanceof Qe,"IN filter has invalid value: "+r.toString()),new Zr(t,r)):n===Kr.ARRAY_CONTAINS_ANY?(E(r instanceof Qe,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new to(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Kr.LESS_THAN:return t<0;case Kr.LESS_THAN_OR_EQUAL:return t<=0;case Kr.EQUAL:return 0===t;case Kr.GREATER_THAN:return t>0;case Kr.GREATER_THAN_OR_EQUAL:return t>=0;default:return T("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[Kr.LESS_THAN,Kr.LESS_THAN_OR_EQUAL,Kr.GREATER_THAN,Kr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Hr),Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=St.comparator(t.key,e.key);return this.matchesComparison(n)},e}(Yr),$r=function(t){function e(e,n){var r=t.call(this,e,Kr.IN,n)||this;return r.value=n,r}return h.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(Yr),Jr=function(t){function e(e,n){return t.call(this,e,Kr.ARRAY_CONTAINS,n)||this}return h.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Qe&&e.contains(this.value)},e}(Yr),Zr=function(t){function e(e,n){var r=t.call(this,e,Kr.IN,n)||this;return r.value=n,r}return h.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(Yr),to=function(t){function e(e,n){var r=t.call(this,e,Kr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return h.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Qe&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(Yr),eo=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),no=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){E(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=t[i],component=this.position[i];if(r.field.isKeyField())E(component instanceof je,"Bound has a non-key value where the key path is being used."),n=St.comparator(component.key,e.key);else{var o=e.field(r.field);E(null!==o,"Field should exist since document matched the orderBy already."),n=component.compareTo(o)}if(r.dir===eo.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var i=0;i<this.position.length;i++){var e=this.position[i],n=t.position[i];if(!e.isEqual(n))return!1}return!0},t}(),ro=function(){function t(t,e){this.field=t,void 0===e&&(e=eo.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ke.compareByKey(t,e):Ke.compareByField(this.field,t,e);switch(this.dir){case eo.ASCENDING:return n;case eo.DESCENDING:return-1*n;default:return T("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),oo=new ro(wt.keyField(),eo.ASCENDING),io=new ro(wt.keyField(),eo.DESCENDING),ao=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Ve(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),so=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=lo(t),n=function(t){e.find((function(element){return element.isEqual(t)}))||e.push(t)},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qe(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&at(e.elements,this.elements)},t}(),uo=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=lo(t),n=function(t){e=e.filter((function(element){return!element.isEqual(t)}))},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qe(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&at(e.elements,this.elements)},t}(),co=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof qe&&this.operand instanceof qe){var r=n.internalValue+this.operand.internalValue;return new qe(r)}r=n.internalValue+this.operand.internalValue;return new Be(r)},t.prototype.applyToRemoteDocument=function(t,e){return E(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof Pe?t:new qe(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function lo(t){return t instanceof Qe?t.internalValue.slice():[]}var ho,fo,po=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),mo=((ho={})[eo.ASCENDING.name]="ASCENDING",ho[eo.DESCENDING.name]="DESCENDING",ho),yo=((fo={})[Kr.LESS_THAN.name]="LESS_THAN",fo[Kr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",fo[Kr.GREATER_THAN.name]="GREATER_THAN",fo[Kr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",fo[Kr.EQUAL.name]="EQUAL",fo[Kr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",fo[Kr.IN.name]="IN",fo[Kr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",fo),go=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(t,e){E(!fr(t),e+" is missing")}function bo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):T("can't parse "+t)}var wo=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var code=void 0===t.code?C.UNKNOWN:Ar(t.code);return new k(code,t.message||"")},t.prototype.toInt32Value=function(t){return fr(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return fr(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);E(!!t,"Cannot deserialize null or undefined timestamp.");var e=bo(t.seconds||"0"),n=t.nanos||0;return new kt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=go.exec(t);if(E(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var o=new Date(t),c=Math.floor(o.getTime()/1e3);return new kt(c,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(E(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ht.fromBase64String(t)):(E(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ht.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return E(!!t,"Trying to deserialize version that isn't set"),Nt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,path){return this.fullyQualifiedPrefixPath(t).child("documents").child(path).canonicalString()},t.prototype.fromResourceName=function(t){var e=vt.fromString(t);return E(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return E(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),E(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new St(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(path){return this.toResourceName(this.databaseId,path)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?vt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new vt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new vt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return E(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(path){return path.length>=4&&"projects"===path.get(0)&&"databases"===path.get(2)},t.prototype.toValue=function(t){if(t instanceof Oe)return{nullValue:"NULL_VALUE"};if(t instanceof Re)return{booleanValue:t.value()};if(t instanceof qe)return{integerValue:""+t.value()};if(t instanceof Be){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Fe?{stringValue:t.value()}:t instanceof Ge?{mapValue:this.toMapValue(t)}:t instanceof Qe?{arrayValue:this.toArrayValue(t)}:t instanceof ze?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof We?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Ue?{bytesValue:this.toBytes(t.value())}:t instanceof je?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:T("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Oe.INSTANCE;if("booleanValue"in t)return Re.of(t.booleanValue);if("integerValue"in t)return new qe(bo(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Be.NAN;if("Infinity"===t.doubleValue)return Be.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Be.NEGATIVE_INFINITY}return new Be(t.doubleValue)}if("stringValue"in t)return new Fe(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){vo(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Qe(n.map((function(t){return e.fromValue(t)})))}if("timestampValue"in t)return vo(t.timestampValue,"timestampValue"),new ze(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){vo(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new We(new Gr(r,o))}if("bytesValue"in t){vo(t.bytesValue,"bytesValue");var c=this.fromBlob(t.bytesValue);return new Ue(c)}if("referenceValue"in t){vo(t.referenceValue,"referenceValue");var l=this.fromResourceName(t.referenceValue),h=new mt(l.get(1),l.get(3)),f=new St(this.extractLocalPathFromResourceName(l));return new je(h,f)}return T("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return E(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),o=this.fromVersion(t.updateTime);return new Ke(r,o,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},t.prototype.fromFields=function(object){var t=this,map=object,e=Ge.EMPTY;return R(map,(function(n,r){e=e.set(new wt([n]),t.fromValue(r))})),e},t.prototype.toMapValue=function(map){return{fields:this.toFields(map)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;E(!!t.found,"Tried to deserialize a found document from a missing document."),vo(t.found.name,"doc.found.name"),vo(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new Ke(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){E(!!t.missing,"Tried to deserialize a missing document from a found document."),E(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Ye(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):T("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Mr.Added:return"ADD";case Mr.Current:return"CURRENT";case Mr.NoChange:return"NO_CHANGE";case Mr.Removed:return"REMOVE";case Mr.Reset:return"RESET";default:return T("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Br)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof qr){if(t.newDoc instanceof Ke){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof Ye){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Fr){var n=void 0;return t.cause&&(n={code:Cr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return T("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){vo(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=t.targetChange.resumeToken||this.emptyByteString(),l=t.targetChange.cause,h=l&&this.fromRpcStatus(l);e=new Fr(r,o,c,h||null)}else if("documentChange"in t){vo(t.documentChange,"documentChange"),vo(t.documentChange.document,"documentChange.name"),vo(t.documentChange.document.name,"documentChange.document.name"),vo(t.documentChange.document.updateTime,"documentChange.document.updateTime");var f=t.documentChange,d=this.fromName(f.document.name),m=this.fromVersion(f.document.updateTime),y=new Ke(d,m,{},void 0,f.document,(function(t){return n.fromValue(t)})),v=f.targetIds||[],w=f.removedTargetIds||[];e=new qr(v,w,y.key,y)}else if("documentDelete"in t){vo(t.documentDelete,"documentDelete"),vo(t.documentDelete.document,"documentDelete.document");var S=t.documentDelete;d=this.fromName(S.document),m=S.readTime?this.fromVersion(S.readTime):Nt.forDeletedDoc(),y=new Ye(d,m),w=S.removedTargetIds||[];e=new qr([],w,y.key,y)}else if("documentRemove"in t){vo(t.documentRemove,"documentRemove"),vo(t.documentRemove.document,"documentRemove");var x=t.documentRemove;d=this.fromName(x.document),w=x.removedTargetIds||[];e=new qr([],w,d,null)}else{if(!("filter"in t))return T("Unknown change type "+JSON.stringify(t));vo(t.filter,"filter"),vo(t.filter.targetId,"filter.targetId");var filter=t.filter,_=filter.count||0,E=new po(_),I=filter.targetId;e=new Br(I,E)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Mr.NoChange:"ADD"===t?Mr.Added:"REMOVE"===t?Mr.Removed:"CURRENT"===t?Mr.Current:"RESET"===t?Mr.Reset:T("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return Nt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Nt.MIN:e.readTime?this.fromVersion(e.readTime):Nt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Ae)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Ne)e={delete:this.toName(t.key)};else if(t instanceof Ce)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof ke))return T("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Ee.NONE;if(t.update){vo(t.update.name,"name");var r=this.fromName(t.update.name),o=this.fromFields(t.update.fields||{});if(t.updateMask){var c=this.fromDocumentMask(t.updateMask);return new Ce(r,o,c,n)}return new Ae(r,o,n)}if(t.delete){r=this.fromName(t.delete);return new Ne(r,n)}if(t.transform){r=this.fromName(t.transform.document);var l=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return E(!0===n.exists,'Transforms only support precondition "exists == true"'),new ke(r,l)}return T("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return E(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:T("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Ee.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Ee.exists(t.exists):Ee.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),o=null;return t.transformResults&&t.transformResults.length>0&&(o=t.transformResults.map((function(t){return n.fromValue(t)}))),new xe(r,o)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(E(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ao)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof so)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof uo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof co)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw T("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)E("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=ao.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new so(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t){r=t.removeAllFromArray.values||[];n=new uo(r.map((function(t){return e.fromValue(t)})))}else if("increment"in t){var o=this.fromValue(t.increment);E(o instanceof Pe,"NUMERIC_ADD transform requires a NumberValue"),n=new co(o)}else T("Unknown transform proto: "+JSON.stringify(t));var c=wt.fromServerFormat(t.fieldPath);return new Se(c,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;E(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Qr.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},path=t.path;null!==t.collectionGroup?(E(path.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(path),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(E(path.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(path.popLast()),e.structuredQuery.from=[{collectionId:path.lastSegment()}]);var n=this.toFilter(t.filters);n&&(e.structuredQuery.where=n);var r=this.toOrder(t.orderBy);r&&(e.structuredQuery.orderBy=r);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var path=this.fromQueryPath(t.parent),e=t.structuredQuery,n=e.from?e.from.length:0,r=null;if(n>0){E(1===n,"StructuredQuery.from with more than one collection is not supported.");var o=e.from[0];o.allDescendants?r=o.collectionId:path=path.child(o.collectionId)}var c=[];e.where&&(c=this.fromFilter(e.where));var l=[];e.orderBy&&(l=this.fromOrder(e.orderBy));var h=null;e.limit&&(h=this.fromInt32Value(e.limit));var f=null;e.startAt&&(f=this.fromCursor(e.startAt));var d=null;return e.endAt&&(d=this.fromCursor(e.endAt)),new Qr(path,r,l,c,h,f,d)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case An.Listen:return null;case An.ExistenceFilterMismatch:return"existence-filter-mismatch";case An.LimboResolution:return"limbo-document";default:return T("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(filter){return filter instanceof Yr?e.toUnaryOrFieldFilter(filter):T("Unrecognized filter: "+JSON.stringify(filter))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(filter){var t=this;return filter?void 0!==filter.unaryFilter?[this.fromUnaryFilter(filter)]:void 0!==filter.fieldFilter?[this.fromFieldFilter(filter)]:void 0!==filter.compositeFilter?filter.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(t,e){return t.concat(e)})):T("Unknown filter: "+JSON.stringify(filter)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(cursor){var t=this;return{before:cursor.before,values:cursor.position.map((function(component){return t.toValue(component)}))}},t.prototype.fromCursor=function(cursor){var t=this,e=!!cursor.before,n=cursor.values.map((function(component){return t.fromValue(component)}));return new no(n,e)},t.prototype.toDirection=function(t){return mo[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return eo.ASCENDING;case"DESCENDING":return eo.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return yo[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Kr.EQUAL;case"GREATER_THAN":return Kr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Kr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Kr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Kr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Kr.ARRAY_CONTAINS;case"IN":return Kr.IN;case"ARRAY_CONTAINS_ANY":return Kr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return T("Unspecified operator");default:return T("Unknown operator")}},t.prototype.toFieldPathReference=function(path){return{fieldPath:path.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return wt.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new ro(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(filter){return Yr.create(this.fromFieldPathReference(filter.fieldFilter.field),this.fromOperatorName(filter.fieldFilter.op),this.fromValue(filter.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(filter){if(filter.op===Kr.EQUAL){if(filter.value.isEqual(Be.NAN))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NAN"}};if(filter.value.isEqual(Oe.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(filter.field),op:this.toOperatorName(filter.op),value:this.toValue(filter.value)}}},t.prototype.fromUnaryFilter=function(filter){switch(filter.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(filter.unaryFilter.field);return Yr.create(t,Kr.EQUAL,Be.NAN);case"IS_NULL":var e=this.fromFieldPathReference(filter.unaryFilter.field);return Yr.create(e,Kr.EQUAL,Oe.INSTANCE);case"OPERATOR_UNSPECIFIED":return T("Unspecified filter");default:return T("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(path){return wt.fromServerFormat(path)}));return we.fromArray(e)},t}(),So=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},xo=function(){function t(t){this.syncEngine=t,this.queries=new $e((function(q){return q.canonicalId()})),this.onlineState=yr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);(r||(n=!0,r=new So,this.queries.set(e,r)),r.listeners.push(t),E(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return h.__generator(this,(function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var o=r[n],c=o.query,l=this.queries.get(c);if(l){for(var h=0,f=l.listeners;h<f.length;h++){f[h].onViewSnapshot(o)&&(e=!0)}l.viewSnap=o}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,o=n.listeners;r<o.length;r++){o[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var o=0,c=r.listeners;o<c.length;o++){c[o].applyOnlineStateChange(t)&&(e=!0)}})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),_o=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=yr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(E(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var o=r[n];o.type!==kr.Metadata&&e.push(o)}t=new Rr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var c=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),c=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),c=!0),this.snap=t,c},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){if(E(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==yr.Offline;return this.options.waitForSyncWhenOnline&&n?(E(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===yr.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){E(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Rr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),To=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Gt(),o=Gt(),c=0,l=n.docChanges;c<l.length;c++){var h=l[c];switch(h.type){case kr.Added:r=r.add(h.doc.key);break;case kr.Removed:o=o.add(h.doc.key)}}return new t(e,r,o)},t}(),Eo=function(t){this.key=t},Io=function(t){this.key=t},Ao=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Gt(),this.mutatedKeys=Gt(),this.documentSet=new Dr(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Or,o=e?e.documentSet:this.documentSet,c=e?e.mutatedKeys:this.mutatedKeys,l=o,h=!1,f=this.query.hasLimit()&&o.size===this.query.limit?o.last():null;if(t.inorderTraversal((function(t,e){var d=o.get(t),m=e instanceof Ke?e:null;m&&(E(t.isEqual(m.key),"Mismatching keys found in document changes: "+t+" != "+m.key),m=n.query.matches(m)?m:null);var y=!!d&&n.mutatedKeys.has(d.key),v=!!m&&(m.hasLocalMutations||n.mutatedKeys.has(m.key)&&m.hasCommittedMutations),w=!1;d&&m?d.data().isEqual(m.data())?y!==v&&(r.track({type:kr.Metadata,doc:m}),w=!0):n.shouldWaitForSyncedDocument(d,m)||(r.track({type:kr.Modified,doc:m}),w=!0,f&&n.query.docComparator(m,f)>0&&(h=!0)):!d&&m?(r.track({type:kr.Added,doc:m}),w=!0):d&&!m&&(r.track({type:kr.Removed,doc:d}),w=!0,f&&(h=!0));w&&(m?(l=l.add(m),c=v?c.add(t):c.delete(t)):(l=l.delete(t),c=c.delete(t)))})),this.query.hasLimit())for(;l.size>this.query.limit;){var d=l.last();l=l.delete(d.key),c=c.delete(d.key),r.track({type:kr.Removed,doc:d})}return E(!h||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:r,needsRefill:h,mutatedKeys:c}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;E(!t.needsRefill,"Cannot apply changes that need a refill");var o=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var c=t.changeSet.getChanges();c.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case kr.Added:return 1;case kr.Modified:case kr.Metadata:return 2;case kr.Removed:return 0;default:return T("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var l=e?this.updateLimboDocuments():[],h=0===this.limboDocuments.size&&this.current?Nr.Synced:Nr.Local,f=h!==this.syncState;return this.syncState=h,0!==c.length||f?{snapshot:new Rr(this.query,t.documentSet,o,c,t.mutatedKeys,h===Nr.Local,f,!1),limboChanges:l}:{limboChanges:l}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===yr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Or,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return E(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Gt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new Io(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new Eo(t))})),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Gt();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Rr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Nr.Local)},t}();var Co=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new mr(this.asyncQueue,lt.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return h.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return h.__generator(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!fr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var code=t.code;return"aborted"===code||"failed-precondition"===code||!Ir(code)}return!1},t}(),ko=function(t,e,view){this.query=t,this.targetId=e,this.view=view},No=function(t){this.key=t,this.receivedDocument=!1},Do=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new $e((function(q){return q.canonicalId()})),this.queryViewsByTarget={},this.limboTargetsByKey=new Dt(St.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Xn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ie.forSyncEngine(),this.isPrimary=void 0,this.onlineState=yr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){E(null!==t,"SyncEngine listener cannot be null"),E(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c;return h.__generator(this,(function(l){switch(l.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return o=l.sent(),c=this.sharedClientState.addLocalQueryTarget(o.targetId),e=o.targetId,[4,this.initializeViewAndComputeSnapshot(o,"current"===c)];case 3:n=l.sent(),this.isPrimary&&this.remoteStore.listen(o),l.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n,r,o,view,c,l,f,data;return h.__generator(this,(function(h){switch(h.label){case 0:return n=t.query,[4,this.localStore.executeQuery(n)];case 1:return r=h.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return o=h.sent(),view=new Ao(n,o),c=view.computeDocChanges(r),l=Lr.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&this.onlineState!==yr.Offline),E(0===(f=view.applyChanges(c,!0===this.isPrimary,l)).limboChanges.length,"View returned limbo docs before target ack from the server."),E(!!f.snapshot,"applyChanges for new view should always return a snapshot"),data=new ko(n,t.targetId,view),this.queryViewsByQuery.set(n,data),this.queryViewsByTarget[t.targetId]=data,[2,f.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r;return h.__generator(this,(function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(t.query)];case 1:return e=o.sent(),[4,this.localStore.remoteDocumentKeys(t.targetId)];case 2:return n=o.sent(),r=t.view.synchronizeWithPersistedState(e,n),this.isPrimary&&this.updateTrackedLimbos(t.targetId,r.limboChanges),[2,r]}}))}))},t.prototype.unlisten=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n=this;return h.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),E(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then((function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)})).catch(Wn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n;return h.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Co(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n=this;return h.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),R(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(E(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?E(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(E(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Wn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,source){if(this.isPrimary&&source===gr.RemoteStore||!this.isPrimary&&source===gr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var e=[];this.queryViewsByQuery.forEach((function(n,r){var o=r.view.applyOnlineStateChange(t);E(0===o.limboChanges.length,"OnlineState should not affect limbo documents."),o.snapshot&&e.push(o.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(e),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,l,f,d=this;return h.__generator(this,(function(h){switch(h.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],o=(o=new Dt(St.comparator)).insert(r,new Ye(r,Nt.forDeletedDoc())),c=Gt().add(r),l=new Pr(Nt.MIN,{},new Pt(it),o,c),[2,this.applyRemoteEvent(l)]):[3,1];case 1:return E(!!(f=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(f.query,!1).then((function(){return d.removeAndCleanupQuery(f)})).catch(Wn)];case 2:h.sent(),this.syncEngineListener.onWatchError(f.query,e),h.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return h.__awaiter(this,void 0,void 0,(function(){var r;return h.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=o.sent())?(S("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return o.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):T("Unknown batchState: "+e),o.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return o.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n;return h.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Wn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n;return h.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Wn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n;return h.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new k(C.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Dt(it)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(E(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach((function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o instanceof Eo)this.limboDocumentRefs.addReference(o.key,t),this.trackLimboChange(o);else if(o instanceof Io){S("SyncEngine","Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,t),this.limboDocumentRefs.containsKey(o.key)||this.removeLimboTarget(o.key)}else T("Unknown limbo change: "+JSON.stringify(o))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){S("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Qr.atPath(e.path);this.limboResolutionsByTarget[n]=new No(e),this.remoteStore.listen(new Dn(r,n,An.LimboResolution,yt.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n,r,o,c=this;return h.__generator(this,(function(l){switch(l.label){case 0:return n=[],r=[],o=[],this.queryViewsByQuery.forEach((function(l,h){o.push(Promise.resolve().then((function(){var e=h.view.computeDocChanges(t);return e.needsRefill?c.localStore.executeQuery(h.query).then((function(t){return h.view.computeDocChanges(t,e)})):e})).then((function(t){var o=e&&e.targetChanges[h.targetId],l=h.view.applyChanges(t,!0===c.isPrimary,o);if(c.updateTrackedLimbos(h.targetId,l.limboChanges),l.snapshot){c.isPrimary&&c.sharedClientState.updateQueryState(h.targetId,l.snapshot.fromCache?"not-current":"current"),n.push(l.snapshot);var f=To.fromSnapshot(h.targetId,l.snapshot);r.push(f)}})))})),[4,Promise.all(o)];case 1:return l.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return l.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){E(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n;return h.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c,l,f,d=this;return h.__generator(this,(function(h){switch(h.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return h.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=h.sent(),r=0,o=n;r<o.length;r++)c=o[r],this.remoteStore.listen(c);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,l=[],f=Promise.resolve(),O(this.queryViewsByTarget,(function(t,e){d.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return d.unlisten(e.query)})),d.remoteStore.unlisten(e.targetId)})),[4,f]);case 4:return h.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(l)];case 5:return h.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;O(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Dt(St.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return h.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c,l,f,d,m;return h.__generator(this,(function(h){switch(h.label){case 0:e=[],n=[],r=0,o=t,h.label=1;case 1:return r<o.length?(c=o[r],l=void 0,(f=this.queryViewsByTarget[c])?[4,this.localStore.releaseQuery(f.query,!0)]:[3,5]):[3,11];case 2:return h.sent(),[4,this.localStore.allocateQuery(f.query)];case 3:return l=h.sent(),[4,this.synchronizeViewAndComputeSnapshot(f)];case 4:return(d=h.sent()).snapshot&&n.push(d.snapshot),[3,9];case 5:return E(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(c)];case 6:return E(!!(m=h.sent()),"Query data for target "+c+" not found"),[4,this.localStore.allocateQuery(m)];case 7:return l=h.sent(),[4,this.initializeViewAndComputeSnapshot(l,!1)];case 8:h.sent(),h.label=9;case 9:e.push(l),h.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return h.__awaiter(this,void 0,void 0,(function(){var r,o,c,l,f;return h.__generator(this,(function(h){switch(h.label){case 0:if(this.isPrimary)return S("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,11];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return h.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=h.sent(),o=Pr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,o)];case 3:return h.sent(),[3,11];case 4:return c=h.sent(),(d=c).code!==C.DATA_LOSS||d.message!==Ze?[3,6]:(l=[],O(this.queryViewsByTarget,(function(t){return l.push(t)})),[4,this.synchronizeQueryViewsAndRaiseSnapshots(l)]);case 5:return h.sent(),[3,7];case 6:throw c;case 7:return[3,8];case 8:return f=this.queryViewsByTarget[t],this.removeAndCleanupQuery(f),[4,this.localStore.releaseQuery(f.query,!0)];case 9:return h.sent(),this.syncEngineListener.onWatchError(f.query,n),[3,11];case 10:T("Unexpected target state: "+e),h.label=11;case 11:return[2]}var d}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return h.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,l,f,d,m,y,v=this;return h.__generator(this,(function(w){switch(w.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,w.label=1;case 1:return n<r.length?(y=r[n],E(!this.queryViewsByTarget[y],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(y)]):[3,6];case 2:return E(!!(o=w.sent()),"Query data for active target "+y+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return c=w.sent(),[4,this.initializeViewAndComputeSnapshot(c,!1)];case 4:w.sent(),this.remoteStore.listen(c),w.label=5;case 5:return n++,[3,1];case 6:l=function(t){var e;return h.__generator(this,(function(n){switch(n.label){case 0:return(e=f.queryViewsByTarget[t])?[4,f.localStore.releaseQuery(e.query,!1).then((function(){v.remoteStore.unlisten(t),v.removeAndCleanupQuery(e)})).catch(Wn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))},f=this,d=0,m=e,w.label=7;case 7:return d<m.length?(y=m[d],[5,l(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return d++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Gt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Gt()},t}(),Mo=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Oo="SharedClientState",Ro=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,E(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var o=JSON.parse(r),c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error),l=void 0;return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(l=new k(o.error.code,o.error.message)),c?new t(e,n,o.state,l):(x(Oo,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Po=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,E(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),c=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(c=new k(r.error.code,r.error.message)),o?new t(e,r.state,c):(x(Oo,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Lo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),o="object"==typeof r&&r.activeTargetIds instanceof Array,c=Ht(),i=0;o&&i<r.activeTargetIds.length;++i)o=pr(r.activeTargetIds[i]),c=c.add(r.activeTargetIds[i]);return o?new t(e,c):(x(Oo,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),qo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in yr&&"string"==typeof n.clientId?new t(n.clientId,yr[n.onlineState]):(x(Oo,"Failed to parse online state: "+e),null)},t}(),Bo=function(){function t(){this.activeTargetIds=Ht()}return t.prototype.addQueryTarget=function(t){E(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var data={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(data)},t}(),Fo=function(){function t(e,n,r,o,c){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new k(C.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=c,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+r,this.activeClients[this.localClientId]=new Bo,this.clientStateKeyRe=new RegExp("^firestore_clients_"+l+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+l+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+l+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return h.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,c,l,f,d,m,y,v=this;return h.__generator(this,(function(h){switch(h.label){case 0:return E(!this.started,"WebStorageSharedClientState already started"),E(null!==this.syncEngine,"syncEngine property must be set before calling start()"),E(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(r)))&&(c=Lo.fromWebStorageEntry(r,o))&&(this.activeClients[c.clientId]=c);for(this.persistClientState(),(l=this.storage.getItem(this.onlineStateKey))&&(f=this.fromWebStorageOnlineState(l))&&this.handleOnlineStateEvent(f),d=0,m=this.earlyEvents;d<m.length;d++)y=m[d],this.handleWebStorageEvent(y);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return v.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ht();return R(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Po.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return S(Oo,"READ",t,e),e},t.prototype.setItem=function(t,e){S(Oo,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){S(Oo,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(S(Oo,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void x("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return h.__awaiter(e,void 0,void 0,(function(){var e,n,r,o,c,l;return h.__generator(this,(function(h){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(o=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(o)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(c=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(c)]}else t.key===this.sequenceNumberKey&&(E(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(l=function(t){var e=yt.INVALID;if(null!=t)try{var n=JSON.parse(t);E("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){x(Oo,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==yt.INVALID&&this.sequenceNumberHandler(l));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Ro(this.currentUser,t,e,n),o=this.toWebStorageMutationBatchKey(t);this.setItem(o,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:yr[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),o=new Po(t,e,n);this.setItem(r,o.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return E(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return"firestore_targets_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e="firestore_mutations_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return E(null!==n,"Cannot parse client state key '"+t+"'"),Lo.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);E(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),o=void 0!==n[2]?n[2]:null;return Ro.fromWebStorageEntry(new Mo(o),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);E(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Po.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return qo.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(S(Oo,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var o=this.getAllActiveQueryTargets(),c=[],l=[];return o.forEach((function(t){return h.__awaiter(n,void 0,void 0,(function(){return h.__generator(this,(function(e){return r.has(t)||c.push(t),[2]}))}))})),r.forEach((function(t){return h.__awaiter(n,void 0,void 0,(function(){return h.__generator(this,(function(e){return o.has(t)||l.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(c,l)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var zo=function(){function t(){this.localState=new Bo,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Bo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Vo=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Ln.withCacheSize(this.cacheSizeBytes)},t}(),Uo=function(){},jo=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=ot.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new xt,r=new xt,o=!1;return this.credentials.setChangeListener((function(c){o?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(c)})):(o=!0,e.initializePersistence(t,r,c).then((function(t){return e.initializeRest(c,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Vo?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof k?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new k(C.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=jn.buildStoragePrefix(this.databaseInfo),o=new wo(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return h.__awaiter(n,void 0,void 0,(function(){var n,c;return h.__generator(this,(function(l){switch(l.label){case 0:if(e.synchronizeTabs&&!Fo.isAvailable(this.platform))throw new k(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Fo(this.asyncQueue,this.platform,r,this.clientId,t):new zo,[4,jn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:o,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return c=l.sent(),this.persistence=c,[2,c.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=rr.createEagerPersistence(this.clientId),this.sharedClientState=new zo,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return S("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return h.__awaiter(n,void 0,void 0,(function(){var n,o,c,l,f,d=this;return h.__generator(this,(function(m){switch(m.label){case 0:return this.localStore=new Jn(this.persistence,t),e&&(this.lruScheduler=new qn(e,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),c=new xr(this.asyncQueue,r,this.credentials,o),l=function(t){return d.syncEngine.applyOnlineStateChange(t,gr.RemoteStore)},f=function(t){return d.syncEngine.applyOnlineStateChange(t,gr.SharedClientState)},this.remoteStore=new Wr(this.localStore,c,this.asyncQueue,l,n),this.syncEngine=new Do(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=f,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new xo(this.syncEngine),[4,this.sharedClientState.start()];case 1:return m.sent(),[4,this.remoteStore.start()];case 2:return m.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return h.__awaiter(d,void 0,void 0,(function(){return h.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 3:return m.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return h.__awaiter(d,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 4:return m.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return h.__awaiter(t,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new xt;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var o=new _o(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(o)})),o},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof Ke)return t;if(t instanceof Ye)return null;throw new k(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.executeQuery(t)})).then((function(e){var n=Gt(),view=new Ao(t,n),r=view.computeDocChanges(e);return view.applyChanges(r,!1).snapshot}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new xt;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new xt;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),Wo=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Go=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];V("FieldPath",t,"fieldNames",1);for(var i=0;i<t.length;++i)if(U("FieldPath","string",i,t[i]),0===t[i].length)throw new k(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw tt("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(wt.keyField().canonicalString()),t}(),Qo=new RegExp("[~\\*/\\[\\]]");var Ho=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}},Ko=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){E(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Mo.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){E(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Yo=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=Mo.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;E(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new k(C.ABORTED,"getToken aborted due to token change.");return n?(E("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Ho(n.accessToken,t.currentUser)):null}))},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){E(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(this.currentUser)},t.prototype.removeChangeListener=function(){E(null!=this.tokenListener,"removeChangeListener() called twice"),E(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return E(null===t||"string"==typeof t,"Received invalid UID: "+t),new Mo(t)},t}(),Xo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Mo.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),$o=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Xo(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Mo.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Jo(t){if(!t)return new Ko;switch(t.type){case"gapi":var e=t.client;return E(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new $o(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new k(C.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function Zo(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var object=t,n=0,r=e;n<r.length;n++){var o=r[n];if(o in object&&"function"==typeof object[o])return!0}return!1}(t,["next","error","complete"])}var ti,ei=function(){function t(t){this._methodName=t}return t.delete=function(){return L("FieldValue.delete",arguments),ni.instance},t.serverTimestamp=function(){return L("FieldValue.serverTimestamp",arguments),ri.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return F("FieldValue.arrayUnion",arguments,1),new oi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return F("FieldValue.arrayRemove",arguments,1),new ii(t)},t.increment=function(t){return U("FieldValue.increment","number",1,t),B("FieldValue.increment",arguments,1),new ai(t)},t.prototype.isEqual=function(t){return this===t},t}(),ni=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return h.__extends(e,t),e.instance=new e,e}(ei),ri=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return h.__extends(e,t),e.instance=new e,e}(ei),oi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return h.__extends(e,t),e}(ei),ii=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return h.__extends(e,t),e}(ei),ai=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return h.__extends(e,t),e}(ei),si=N(ei,"Use FieldValue.<field>() instead."),ui=/^__.*__$/,ci=function(){function t(data,t,e){this.data=data,this.fieldMask=t,this.fieldTransforms=e}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Ce(t,this.data,this.fieldMask,e)):n.push(new Ae(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ke(t,this.fieldTransforms)),n},t}(),hi=function(){function t(data,t,e){this.data=data,this.fieldMask=t,this.fieldTransforms=e}return t.prototype.toMutations=function(t,e){var n=[new Ce(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new ke(t,this.fieldTransforms)),n},t}();function fi(t){switch(t){case ti.Set:case ti.MergeSet:case ti.Update:return!0;case ti.Argument:return!1;default:throw T("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(ti||(ti={}));var pi=function(){function t(t,e,path,n,r,o){this.dataSource=t,this.methodName=e,this.path=path,this.arrayElement=n,void 0===r&&this.validatePath(),this.arrayElement=void 0!==n&&n,this.fieldTransforms=r||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new k(C.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var i=0;i<this.path.length;i++)this.validatePathSegment(this.path.get(i))},t.prototype.validatePathSegment=function(t){if(fi(this.dataSource)&&ui.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),di=function(t,e){this.databaseId=t,this.key=e},mi=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,input){var e=new pi(ti.Set,t,wt.EMPTY_PATH);gi("Data must be an object, but it was:",e,input);var n=this.parseData(input,e);return new ci(n,null,e.fieldTransforms)},t.prototype.parseMergeData=function(t,input,e){var n=new pi(ti.MergeSet,t,wt.EMPTY_PATH);gi("Data must be an object, but it was:",n,input);var r,o,c=this.parseData(input,n);if(e){for(var l=new Pt(wt.comparator),h=0,f=e;h<f.length;h++){var d=f[h],m=void 0;if(d instanceof Go)m=d._internalPath;else{if("string"!=typeof d)throw T("Expected stringOrFieldPath to be a string or a FieldPath");m=bi(t,d)}if(!n.contains(m))throw new k(C.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");l=l.add(m)}r=we.fromSet(l),o=n.fieldTransforms.filter((function(t){return r.covers(t.field)}))}else r=we.fromArray(n.fieldMask),o=n.fieldTransforms;return new ci(c,r,o)},t.prototype.parseUpdateData=function(t,input){var e=this,n=new pi(ti.Update,t,wt.EMPTY_PATH);gi("Data must be an object, but it was:",n,input);var r=new Pt(wt.comparator),o=Ge.EMPTY;R(input,(function(c,l){var path=bi(t,c),h=n.childContextForFieldPath(path);if((l=e.runPreConverter(l,h))instanceof ni)r=r.add(path);else{var f=e.parseData(l,h);null!=f&&(r=r.add(path),o=o.set(path,f))}}));var mask=we.fromSet(r);return new hi(o,mask,n.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var o=new pi(ti.Update,t,wt.EMPTY_PATH),c=[vi(t,e)],l=[n];if(r.length%2!=0)throw new k(C.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var i=0;i<r.length;i+=2)c.push(vi(t,r[i])),l.push(r[i+1]);var h=new Pt(wt.comparator),f=Ge.EMPTY;for(i=0;i<c.length;++i){var path=c[i],d=o.childContextForFieldPath(path),m=this.runPreConverter(l[i],d);if(m instanceof ni)h=h.add(path);else{var y=this.parseData(m,d);null!=y&&(h=h.add(path),f=f.set(path,y))}}var mask=we.fromSet(h);return new hi(f,mask,o.fieldTransforms)},t.prototype.parseQueryValue=function(t,input){var e=new pi(ti.Argument,t,wt.EMPTY_PATH),n=this.parseData(input,e);return E(null!=n,"Parsed data should not be null."),E(0===e.fieldTransforms.length,"Field transforms should have been disallowed."),n},t.prototype.runPreConverter=function(input,t){try{return this.preConverter(input)}catch(n){var e=wi(n);throw t.createError(e)}},t.prototype.parseData=function(input,t){if(yi(input=this.runPreConverter(input,t)))return gi("Unsupported field value:",t,input),this.parseObject(input,t);if(input instanceof ei)return this.parseSentinelFieldValue(input,t),null;if(t.path&&t.fieldMask.push(t.path),input instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(input,t)}return this.parseScalarValue(input,t)},t.prototype.parseObject=function(t,e){var n=this,r=new Dt(it);return P(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):R(t,(function(t,o){var c=n.parseData(o,e.childContextForField(t));null!=c&&(r=r.insert(t,c))})),new Ge(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,o=0,c=t;o<c.length;o++){var l=c[o],h=this.parseData(l,e.childContextForArray(r));null==h&&(h=Oe.INSTANCE),n.push(h),r++}return new Qe(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!fi(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof ni){if(e.dataSource!==ti.MergeSet)throw e.dataSource===ti.Update?(E(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ri)e.fieldTransforms.push(new Se(e.path,ao.instance));else if(t instanceof oi){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new so(n);e.fieldTransforms.push(new Se(e.path,r))}else if(t instanceof ii){n=this.parseArrayTransformElements(t._methodName,t._elements);var o=new uo(n);e.fieldTransforms.push(new Se(e.path,o))}else if(t instanceof ai){var c=this.parseQueryValue("FieldValue.increment",t._operand),l=new co(c);e.fieldTransforms.push(new Se(e.path,l))}else T("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Oe.INSTANCE;if("number"==typeof t)return pr(t)?new qe(t):new Be(t);if("boolean"==typeof t)return Re.of(t);if("string"==typeof t)return new Fe(t);if(t instanceof Date)return new ze(kt.fromDate(t));if(t instanceof kt)return new ze(new kt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Gr)return new We(t);if(t instanceof ht)return new Ue(t);if(t instanceof di)return new je(t.databaseId,t.key);throw e.createError("Unsupported field value: "+$(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(element,i){var e=new pi(ti.Argument,t,wt.EMPTY_PATH);return n.parseData(element,e.childContextForArray(i))}))},t}();function yi(input){return!("object"!=typeof input||null===input||input instanceof Array||input instanceof Date||input instanceof kt||input instanceof Gr||input instanceof ht||input instanceof di||input instanceof ei)}function gi(t,e,input){if(!yi(input)||!X(input)){var n=$(input);throw"an object"===n?e.createError(t+" a custom object"):e.createError(t+" "+n)}}function vi(t,path){if(path instanceof Go)return path._internalPath;if("string"==typeof path)return bi(t,path);throw new k(C.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function bi(t,path){try{return function(path){if(path.search(Qo)>=0)throw new k(C.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Go.bind.apply(Go,[void 0].concat(path.split("."))))}catch(t){throw new k(C.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(path)._internalPath}catch(n){var e=wi(n);throw new k(C.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+e)}}function wi(t){return t instanceof Error?t.message:t.toString()}var Si=Ln.COLLECTION_DISABLED,xi=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new k(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else W("settings","non-empty string","host",t.host),this.host=t.host,G("settings","boolean","ssl",t.ssl),this.ssl=M(t.ssl,!0);if(Z("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),G("settings","object","credentials",t.credentials),this.credentials=t.credentials,G("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?x("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&x("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=M(t.timestampsInSnapshots,!0),G("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ln.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Si&&t.cacheSizeBytes<Ln.MINIMUM_CACHE_SIZE_BYTES)throw new k(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ln.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}G("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),_i=function(){function t(e){var n=this;if(this._firebaseApp=null,this._queue=new Tt,this.INTERNAL={delete:function(){return h.__awaiter(n,void 0,void 0,(function(){return h.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Yo(r)}else{var o=e;if(!o.projectId)throw new k(C.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new mt(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new Ko}this._settings=new xi({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(B("Firestore.settings",arguments,1),U("Firestore.settings","object",1,t),D(t,"persistence"))throw new k(C.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new xi(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new k(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Jo(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new k(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&x("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=M(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Vo(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=jn.buildStoragePrefix(this.makeDatabaseInfo()),n=new xt;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return h.__awaiter(t,void 0,void 0,(function(){var t;return h.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new k(C.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,jn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype._onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),Zo(t))return this.onSnapshotsInSyncInternal(t);U("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Wo({next:function(){t.next&&t.next()},error:function(t){throw T("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Uo),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new pt(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){E(!!this._settings.host,"FirestoreSettings.host is not set"),E(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new jo(I.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new mi((function(e){if(e instanceof Ii){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new k(C.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new di(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!D(e,"projectId"))throw new k(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new k(C.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new mt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new k(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return B("Firestore.collection",arguments,1),U("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Mi(vt.fromString(t),this)},t.prototype.doc=function(t){return B("Firestore.doc",arguments,1),U("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Ii.forPath(vt.fromString(t),this)},t.prototype.collectionGroup=function(t){if(B("Firestore.collectionGroup",arguments,1),U("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new k(C.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Ni(new Qr(vt.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return B("Firestore.runTransaction",arguments,1),U("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new Ti(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new Ei(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(v()){case o.DEBUG:return"debug";case o.ERROR:return"error";case o.SILENT:return"silent";default:return T("Unknown log level: "+v())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(B("Firestore.setLogLevel",arguments,1),U("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":w(o.DEBUG);break;case"error":w(o.ERROR);break;case"silent":w(o.SILENT);break;default:throw new k(C.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Ti=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;B("Transaction.get",arguments,1);var n=Li("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return T("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Ye)return new Ci(e._firestore,n._key,null,!1,!1);if(r instanceof Ke)return new Ci(e._firestore,n._key,r,!1,!1);throw T("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){z("Transaction.set",arguments,2,3);var r=Li("Transaction.set",t,this._firestore),o=(n=Oi("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return"string"==typeof e||e instanceof Go?(F("Transaction.update",arguments,3),r=Li("Transaction.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,c)):(B("Transaction.update",arguments,2),r=Li("Transaction.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,o),this},t.prototype.delete=function(t){B("Transaction.delete",arguments,1);var e=Li("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Ei=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){z("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Li("WriteBatch.set",t,this._firestore),o=(n=Oi("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(o.toMutations(r._key,Ee.NONE)),this},t.prototype.update=function(t,e,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Go?(F("WriteBatch.update",arguments,3),r=Li("WriteBatch.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,c)):(B("WriteBatch.update",arguments,2),r=Li("WriteBatch.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(o.toMutations(r._key,Ee.exists(!0))),this},t.prototype.delete=function(t){B("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Li("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Ne(e._key,Ee.NONE)),this},t.prototype.commit=function(){return h.__awaiter(this,void 0,void 0,(function(){return h.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new k(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ii=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(path,e){if(path.length%2!=0)throw new k(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+path.canonicalString()+" has "+path.length);return new t(new St(path),e)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Mi(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(B("DocumentReference.collection",arguments,1),U("DocumentReference.collection","non-empty string",1,t),!t)throw new k(C.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var path=vt.fromString(t);return new Mi(this._key.path.child(path),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw tt("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){z("DocumentReference.set",arguments,1,2);var n=(e=Oi("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,Ee.NONE))},t.prototype.update=function(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return"string"==typeof t||t instanceof Go?(F("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(B("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Ee.exists(!0)))},t.prototype.delete=function(){return B("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ne(this._key,Ee.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];z("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Zo(t[o])||(Z("DocumentReference.onSnapshot",r=t[o],["includeMetadataChanges"]),G("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++);var c={includeMetadataChanges:r.includeMetadataChanges};return Zo(t[o])?n=t[o]:(U("DocumentReference.onSnapshot","function",o,t[o]),j("DocumentReference.onSnapshot","function",o+1,t[o+1]),j("DocumentReference.onSnapshot","function",o+2,t[o+2]),n={next:t[o],error:t[o+1],complete:t[o+2]}),this.onSnapshotInternal(c,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var o=new Wo({next:function(t){if(e.next){E(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Ci(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),c=this._firestoreClient.listen(Qr.atPath(this._key.path),o,t);return function(){o.mute(),n._firestoreClient.unlisten(c)}},t.prototype.get=function(t){var e=this;return z("DocumentReference.get",arguments,0,1),Pi("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new Ci(e.firestore,e._key,t,!0,t instanceof Ke&&t.hasLocalMutations))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),!o.exists&&o.metadata.fromCache?e(new k(C.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&n&&"server"===n.source?e(new k(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(o)},error:e})},t}(),Ai=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ci=function(){function t(t,e,n,r,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=o}return t.prototype.data=function(t){return z("DocumentSnapshot.data",arguments,0,1),t=Ri("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data(),De.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(z("DocumentSnapshot.get",arguments,1,2),e=Ri("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(vi("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,De.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ii(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ai(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw tt("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(data,t){var e=this,n={};return data.forEach((function(r,o){n[r]=e.convertValue(o,t)})),n},t.prototype.convertValue=function(t,e){if(t instanceof Ge)return this.convertObject(t,e);if(t instanceof Qe)return this.convertArray(t,e);if(t instanceof je){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||x("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Ii(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(data,t){var e=this;return data.internalValue.map((function(n){return e.convertValue(n,t)}))},t}(),ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h.__extends(e,t),e.prototype.data=function(e){var data=t.prototype.data.call(this,e);return E("object"==typeof data,"Document in a QueryDocumentSnapshot should exist"),data},e}(Ci),Ni=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){if(B("Query.where",arguments,3),J("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var o=["<","<=","==",">=",">","array-contains"];K("Query.where",o,2,n)}var c,l=vi("Query.where",e),h=Kr.fromString(n);if(l.isKeyField()){if(h===Kr.ARRAY_CONTAINS||h===Kr.ARRAY_CONTAINS_ANY)throw new k(C.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+h.toString()+"' queries on FieldPath.documentId().");if(h===Kr.IN){this.validateDisjunctiveFilterElements(r,h);for(var f=[],d=0,m=r;d<m.length;d++){var y=m[d];f.push(this.parseDocumentIdValue(y))}c=new Qe(f)}else c=this.parseDocumentIdValue(r)}else h!==Kr.IN&&h!==Kr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,h),c=this.firestore._dataConverter.parseQueryValue("Query.where",r);var filter=Yr.create(l,h,c);return this.validateNewFilter(filter),new t(this._query.addFilter(filter),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(z("Query.orderBy",arguments,1,2),j("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=eo.ASCENDING;else{if("desc"!==n)throw new k(C.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=eo.DESCENDING}if(null!==this._query.startAt)throw new k(C.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new k(C.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=vi("Query.orderBy",e),c=new ro(o,r);return this.validateNewOrderBy(c),new t(this._query.addOrderBy(c),this.firestore)},t.prototype.limit=function(e){if(B("Query.limit",arguments,1),U("Query.limit","number",1,e),e<=0)throw new k(C.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(o),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(o),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(o),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(o),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw tt("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(J(t,1,e),e instanceof Ci){if(n.length>0)throw new k(C.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var o=e;if(!o.exists)throw new k(C.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,o._document,r)}var c=[e].concat(n);return this.boundFromFields(t,c,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],o=0,c=this._query.orderBy;o<c.length;o++){var l=c[o];if(l.field.isKeyField())r.push(new je(this.firestore._databaseId,e.key));else{var h=e.field(l.field);if(h instanceof Ve)throw new k(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new k(C.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}r.push(h)}}return new no(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new k(C.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<e.length;i++){var c=e[i];if(r[i].field.isKeyField()){if("string"!=typeof c)throw new k(C.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof c);if(!this._query.isCollectionGroupQuery()&&-1!==c.indexOf("/"))throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+c+"' contains a slash.");var path=this._query.path.child(vt.fromString(c));if(!St.isDocumentKey(path))throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+path+"' is not because it contains an odd number of segments.");var l=new St(path);o.push(new je(this.firestore._databaseId,l))}else{var h=this.firestore._dataConverter.parseQueryValue(t,c);o.push(h)}}return new no(o,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];z("Query.onSnapshot",arguments,1,4);var n,r={},o=0;return"object"!=typeof t[o]||Zo(t[o])||(Z("Query.onSnapshot",r=t[o],["includeMetadataChanges"]),G("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++),Zo(t[o])?n=t[o]:(U("Query.onSnapshot","function",o,t[o]),j("Query.onSnapshot","function",o+1,t[o+1]),j("Query.onSnapshot","function",o+2,t[o+2]),n={next:t[o],error:t[o+1],complete:t[o+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var o=new Wo({next:function(t){e.next&&e.next(new Di(n.firestore,n._query,t))},error:r}),c=this.firestore.ensureClientConfigured(),l=c.listen(this._query,o,t);return function(){o.mute(),c.unlisten(l)}},t.prototype.get=function(t){var e=this;return z("Query.get",arguments,0,1),Pi("Query.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new Di(e.firestore,e._query,t))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),o.metadata.fromCache&&n&&"server"===n.source?e(new k(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(o)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var path=this._query.path.child(vt.fromString(t));if(!St.isDocumentKey(path))throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+path+"' is not because it has an odd number of segments ("+path.length+").");return new je(this.firestore._databaseId,new St(path))}if(t instanceof Ii){var e=t;return new je(this.firestore._databaseId,e._key)}throw new k(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new k(C.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new k(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new k(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(element){return Number.isNaN(element)})).length>0)throw new k(C.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(filter){if(filter instanceof Yr){var t=[Kr.ARRAY_CONTAINS,Kr.ARRAY_CONTAINS_ANY],e=[Kr.IN,Kr.ARRAY_CONTAINS_ANY],n=t.indexOf(filter.op)>=0,r=e.indexOf(filter.op)>=0;if(filter.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(filter.field))throw new k(C.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+filter.field.toString()+"'");var c=this._query.getFirstOrderByField();null!==c&&this.validateOrderByAndInequalityMatch(filter.field,c)}else if(r||n){var l=null;if(r&&(l=this._query.findFilterOperator(e)),null===l&&n&&(l=this._query.findFilterOperator(t)),null!=l)throw l===filter.op?new k(C.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+filter.op.toString()+"' filter."):new k(C.INVALID_ARGUMENT,"Invalid query. You cannot use '"+filter.op.toString()+"' filters with '"+l.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new k(C.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Di=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ai(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;z("QuerySnapshot.forEach",arguments,1,2),U("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ni(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(Z("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),G("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new k(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,o=0;return n.docChanges.map((function(e){var c=new ki(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return E(e.type===kr.Added,"Invalid event type for first snapshot"),E(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}var c=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==kr.Metadata})).map((function(e){var r=new ki(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),o=-1,l=-1;return e.type!==kr.Added&&(E((o=c.indexOf(e.doc.key))>=0,"Index for document not found"),c=c.delete(e.doc.key)),e.type!==kr.Removed&&(l=(c=c.add(e.doc)).indexOf(e.doc.key)),{type:qi(e.type),doc:r,oldIndex:o,newIndex:l}}))}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw tt("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new ki(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Di.prototype.docChanges,t,{get:function(){return function(){throw new k(C.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var Mi=function(t){function e(path,e){var n=t.call(this,Qr.atPath(path),e)||this;if(path.length%2!=1)throw new k(C.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+path.canonicalString()+" has "+path.length);return n}return h.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Ii(new St(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(z("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ot.newId()),U("CollectionReference.doc","non-empty string",1,t),""===t)throw new k(C.INVALID_ARGUMENT,"Document path must be a non-empty string");var path=vt.fromString(t);return Ii.forPath(this._query.path.child(path),this.firestore)},e.prototype.add=function(t){B("CollectionReference.add",arguments,1),U("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e}(Ni);function Oi(t,e){if(void 0===e)return{merge:!1};if(Z(t,e,["merge","mergeFields"]),G(t,"boolean","merge",e.merge),Q(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(element){return"string"==typeof element||element instanceof Go})),void 0!==e.mergeFields&&void 0!==e.merge)throw new k(C.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ri(t,e){return void 0===e?{}:(Z(t,e,["serverTimestamps"]),H(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Pi(t,e){j(t,"object",1,e),e&&(Z(t,e,["source"]),H(t,0,"source",e.source,["default","server","cache"]))}function Li(t,e,n){if(e instanceof Ii){if(e.firestore!==n)throw new k(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw tt(t,"DocumentReference",1,e)}function qi(t){switch(t){case kr.Added:return"added";case kr.Modified:case kr.Metadata:return"modified";case kr.Removed:return"removed";default:return T("Unknown change type: "+t)}}var Bi=N(_i,"Use firebase.firestore() instead."),Fi=N(Ti,"Use firebase.firestore().runTransaction() instead."),zi=N(Ei,"Use firebase.firestore().batch() instead."),Vi=N(Ii,"Use firebase.firestore().doc() instead."),Ui=N(Ci),ji=N(ki),Wi=N(Ni),Gi=N(Di),Qi=N(Mi,"Use firebase.firestore().collection() instead."),Hi={Firestore:Bi,GeoPoint:Gr,Timestamp:kt,Blob:ft,Transaction:Fi,WriteBatch:zi,DocumentReference:Vi,DocumentSnapshot:Ui,Query:Wi,QueryDocumentSnapshot:ji,QuerySnapshot:Gi,CollectionReference:Qi,FieldPath:Go,FieldValue:si,setLogLevel:_i.setLogLevel,CACHE_SIZE_UNLIMITED:Si};function Ki(t){t.INTERNAL.registerService("firestore",(function(t){return new _i(t)}),function(t){E(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Hi))}var Yi=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Xi=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(0)}},t.prototype.onNetworkUnavailable=function(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(1)}},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),$i=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){E(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){E(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){E(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){E(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){E(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){E(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Ji="Connection",Zi={BatchGetDocuments:"batchGet",Commit:"commit"},ta="gl-js/ fire/"+m,ea=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var header in e.authHeaders)e.authHeaders.hasOwnProperty(header)&&(t[header]=e.authHeaders[header]);t["X-Goog-Api-Client"]=ta},t.prototype.invokeRPC=function(t,e,n){var r=this,o=this.makeUrl(t);return new Promise((function(c,l){var h=new d.XhrIo;h.listenOnce(d.EventType.COMPLETE,(function(){try{switch(h.getLastErrorCode()){case d.ErrorCode.NO_ERROR:var e=h.getResponseJson();S(Ji,"XHR received:",JSON.stringify(e)),c(e);break;case d.ErrorCode.TIMEOUT:S(Ji,'RPC "'+t+'" timed out'),l(new k(C.DEADLINE_EXCEEDED,"Request time out"));break;case d.ErrorCode.HTTP_ERROR:var n=h.getStatus();if(S(Ji,'RPC "'+t+'" failed with status:',n,"response text:",h.getResponseText()),n>0){var r=h.getResponseJson().error;if(r&&r.status&&r.message){var o=(f=r.status,m=f.toLowerCase().replace("_","-"),Object.values(C).indexOf(m)>=0?m:C.UNKNOWN);l(new k(o,r.message))}else l(new k(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else S(Ji,'RPC "'+t+'" failed'),l(new k(C.UNAVAILABLE,"Connection failed."));break;default:T('RPC "'+t+'" failed with unanticipated webchannel error '+h.getLastErrorCode()+": "+h.getLastError()+", giving up.")}}finally{S(Ji,'RPC "'+t+'" completed.')}var f,m}));var f=JSON.stringify(e);S(Ji,"XHR sending: ",o+" "+f);var m={"Content-Type":"text/plain"};r.modifyHeadersForRequest(m,n),h.send(o,"POST",f,m,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=d.createWebChannelTransport(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,e),f.isReactNative()||(o.httpHeadersOverwriteParam="$httpHeaders");var c=n.join("");S(Ji,"Creating WebChannel: "+c+" "+o);var l=r.createWebChannel(c,o),h=!1,m=!1,y=new $i({sendFn:function(t){m?S(Ji,"Not sending because WebChannel is closed:",t):(h||(S(Ji,"Opening WebChannel transport."),l.open(),h=!0),S(Ji,"WebChannel sending:",t),l.send(t))},closeFn:function(){return l.close()}}),v=function(t,e){l.listen(t,(function(param){try{e(param)}catch(t){setTimeout((function(){throw t}),0)}}))};return v(d.WebChannel.EventType.OPEN,(function(){m||S(Ji,"WebChannel transport opened.")})),v(d.WebChannel.EventType.CLOSE,(function(){m||(m=!0,S(Ji,"WebChannel transport closed"),y.callOnClose())})),v(d.WebChannel.EventType.ERROR,(function(t){m||(m=!0,S(Ji,"WebChannel transport errored:",t),y.callOnClose(new k(C.UNAVAILABLE,"The operation could not be completed")))})),v(d.WebChannel.EventType.MESSAGE,(function(t){if(!m){var e=t.data[0];E(!!e,"Got a webchannel message without data.");var n=e,r=n.error||n[0]&&n[0].error;if(r){S(Ji,"WebChannel received error:",r);var o=r.status,code=function(t){var code=Tr[t];if(void 0!==code)return Ar(code)}(o),c=r.message;void 0===code&&(code=C.INTERNAL,c="Unknown error status: "+o+" with message "+r.message),m=!0,y.callOnClose(new k(code,c)),l.close()}else S(Ji,"WebChannel received:",e),y.callOnMessage(e)}})),setTimeout((function(){y.callOnOpen()}),0),y},t.prototype.makeUrl=function(t){var e=Zi[t];E(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),na=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new ea(t))},t.prototype.newConnectivityMonitor=function(){return Xi.isAvailable()?new Xi:new Yi},t.prototype.newSerializer=function(t){return new wo(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();function ra(t){Ki(t)}I.setPlatform(new na),ra(c),e.registerFirestore=ra}).call(this,n(124))},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return l})),n.d(e,"__decorate",(function(){return h})),n.d(e,"__param",(function(){return f})),n.d(e,"__metadata",(function(){return d})),n.d(e,"__awaiter",(function(){return m})),n.d(e,"__generator",(function(){return y})),n.d(e,"__exportStar",(function(){return v})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return S})),n.d(e,"__spread",(function(){return x})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return T})),n.d(e,"__asyncGenerator",(function(){return E})),n.d(e,"__asyncDelegator",(function(){return I})),n.d(e,"__asyncValues",(function(){return A})),n.d(e,"__makeTemplateObject",(function(){return C})),n.d(e,"__importStar",(function(){return k})),n.d(e,"__importDefault",(function(){return N}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function f(t,e){return function(n,r){e(n,r,t)}}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function h(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,h)}f((r=r.apply(t,e||[])).next())}))}function y(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function v(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function x(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(S(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof T?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(t){h(q[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function h(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function I(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:T(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function C(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return dr})),n.d(e,"EventType",(function(){return mr})),n.d(e,"WebChannel",(function(){return yr})),n.d(e,"XhrIo",(function(){return gr})),n.d(e,"createWebChannelTransport",(function(){return pr}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},c=r;function l(a){return"string"==typeof a}function h(a){return"number"==typeof a}function f(a,b){a=a.split("."),b=b||c;for(var t=0;t<a.length;t++)if(null==(b=b[a[t]]))return null;return b}function d(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function m(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var v="closure_uid_"+(1e9*Math.random()>>>0),w=0;function S(a,b,t){return a.call.apply(a.bind,arguments)}function x(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function u(a,b,t){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:x).apply(null,arguments)}function _(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var T=Date.now||function(){return+new Date};function E(a,b){function t(){}t.prototype=b.prototype,a.N=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.yb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[v]||(this[v]=++w)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var A=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(l(a))return l(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},C=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=l(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function k(a){return Array.prototype.concat.apply([],arguments)}function N(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function D(a){return/^[\s\xa0]*$/.test(a)}var M,O=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function R(a,b){return-1!=a.indexOf(b)}function P(a,b){return a<b?-1:a>b?1:0}t:{var L=c.navigator;if(L){var B=L.userAgent;if(B){M=B;break t}}M=""}function F(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function z(a){var t,b={};for(t in a)b[t]=a[t];return b}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<V.length;r++)t=V[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function j(a){return j[" "](a),a}j[" "]=d;var W,a,G=R(M,"Opera"),Q=R(M,"Trident")||R(M,"MSIE"),H=R(M,"Edge"),K=H||Q,Y=R(M,"Gecko")&&!(R(M.toLowerCase(),"webkit")&&!R(M,"Edge"))&&!(R(M,"Trident")||R(M,"MSIE"))&&!R(M,"Edge"),X=R(M.toLowerCase(),"webkit")&&!R(M,"Edge");function $(){var a=c.document;return a?a.documentMode:void 0}t:{var J="",Z=(a=M,Y?/rv:([^\);]+)(\)|;)/.exec(a):H?/Edge\/([\d\.]+)/.exec(a):Q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):X?/WebKit\/(\S+)/.exec(a):G?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&(J=Z?Z[1]:""),Q){var tt=$();if(null!=tt&&tt>parseFloat(J)){W=String(tt);break t}}W=J}var et,nt={};function ot(a){return function(a,b){var t=nt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=O(String(W)).split("."),e=O(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=P(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||P(0==o[2].length,0==c[2].length)||P(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var it=c.document;et=it&&Q?$()||("CSS1Compat"==it.compatMode?parseInt(W,10):5):void 0;var at=!Q||9<=Number(et),st=Q&&!ot("9"),ut=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",d,b),c.removeEventListener("test",d,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.Ja=!0}function lt(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(Y){t:{try{j(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=l(a.pointerType)?a.pointerType:ht[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.Ja=!1},E(lt,ct);var ht={2:"touch",3:"pen",4:"mouse"};lt.prototype.b=function(){lt.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,st)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var ft="closure_listenable_"+(1e6*Math.random()|0),pt=0;function mt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.da=n,this.key=++pt,this.X=this.Z=!1}function yt(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function gt(a){this.src=a,this.a={},this.b=0}function vt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=A(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(yt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function bt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!t&&r.da==e)return n}return-1}gt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=bt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new mt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var wt="closure_lm_"+(1e6*Math.random()|0),St={};function xt(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(q(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=Nt(e),a&&a[ft]?a.Ba(b,e,y(n)?!!n.capture:!!n,r):_t(a,b,e,!0,n,r)}(a,b,t,e,n);if(q(b)){for(var r=0;r<b.length;r++)xt(a,b[r],t,e,n);return null}return t=Nt(t),a&&a[ft]?a.Aa(b,t,y(e)?!!e.capture:!!e,n):_t(a,b,t,!1,e,n)}function _t(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=y(n)?!!n.capture:!!n;if(o&&!at)return null;var c=Ct(a);if(c||(a[wt]=c=new gt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=At,b=at?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(Et(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function Tt(a){if(!h(a)&&a&&!a.X){var b=a.src;if(b&&b[ft])vt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(Et(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Ct(b))?(vt(t,a),0==t.b&&(t.src=null,b[wt]=null)):yt(a)}}}function Et(a){return a in St?St[a]:St[a]="on"+a}function It(a,b){var t=a.listener,e=a.da||a.src;return a.Z&&Tt(a),t.call(e,b)}function At(a,b){return!!a.X||(at?It(a,new lt(b,this)):It(a,b=new lt(b||f("window.event"),this)))}function Ct(a){return(a=a[wt])instanceof gt?a:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(a){return"function"==p(a)?a:(a[kt]||(a[kt]=function(b){return a.handleEvent(b)}),a[kt])}function Dt(){I.call(this),this.c=new gt(this),this.J=this,this.B=null}function Mt(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==t){var c=o.listener,l=o.da||o.src;o.Z&&vt(a.c,o),n=!1!==c.call(l,e)&&n}}return n&&0!=e.Ja}E(Dt,I),Dt.prototype[ft]=!0,(g=Dt.prototype).addEventListener=function(a,b,t,e){xt(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(q(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=y(n)?!!n.capture:!!n,e=Nt(e),a&&a[ft]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=bt(o=a.a[b],e,n,r))&&(yt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=Ct(a))&&(b=a.a[b.toString()],a=-1,b&&(a=bt(b,e,n,r)),(e=-1<a?b[a]:null)&&Tt(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.B;if(t)for(b=[];t;t=t.B)b.push(t);t=this.J;var e=a.type||a;if(l(a))a=new ct(a,t);else if(a instanceof ct)a.target=a.target||t;else{var n=a;U(a=new ct(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Mt(o,e,!0,a)&&n}if(n=Mt(o=a.a=t,e,!0,a)&&n,n=Mt(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Mt(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Dt.N.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)yt(e[n]);delete a.a[t],a.b--}}this.B=null},g.Aa=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.Ba=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Ot=c.JSON.stringify;function Rt(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Pt(){this.b=this.a=null}Rt.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Lt,qt=new Rt((function(){return new Ft}),(function(a){a.reset()}));function Bt(){var a=jt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ft(){this.next=this.b=this.a=null}function zt(a){c.setTimeout((function(){throw a}),0)}function Vt(a,b){Lt||function(){var a=c.Promise.resolve(void 0);Lt=function(){a.then(Wt)}}(),Ut||(Lt(),Ut=!0),jt.add(a,b)}Pt.prototype.add=function(a,b){var t=qt.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Ft.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var Ut=!1,jt=new Pt;function Wt(){for(var a;a=Bt();){try{a.a.call(a.b)}catch(t){zt(t)}var b=qt;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Ut=!1}function Gt(a,b){Dt.call(this),this.b=a||1,this.a=b||c,this.f=u(this.gb,this),this.g=T()}function Qt(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Ht(a,b,t){if("function"==p(a))t&&(a=u(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Kt(a,b,t){I.call(this),this.f=null!=t?u(a,t):a,this.c=b,this.b=u(this.ab,this),this.a=[]}function Yt(a){a.U=Ht(a.b,a.c),a.f.apply(null,a.a)}function Xt(a){I.call(this),this.b=a,this.a={}}E(Gt,Dt),(g=Gt.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var a=T()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Qt(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},g.G=function(){Gt.N.G.call(this),Qt(this),delete this.a},E(Kt,I),(g=Kt.prototype).ea=!1,g.U=null,g.Ua=function(a){this.a=arguments,this.U?this.ea=!0:Yt(this)},g.G=function(){Kt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.ab=function(){this.U=null,this.ea&&(this.ea=!1,Yt(this))},E(Xt,I);var $t=[];function Jt(a,b,t,e){q(t)||(t&&($t[0]=t.toString()),t=$t);for(var n=0;n<t.length;n++){var r=xt(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){F(a.a,(function(b,t){this.a.hasOwnProperty(t)&&Tt(b)}),a),a.a={}}function te(){}Xt.prototype.G=function(){Xt.N.G.call(this),Zt(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ee=new Dt;function ne(a){ct.call(this,"serverreachability",a)}function re(a){ee.dispatchEvent(new ne(ee,a))}function oe(a){ct.call(this,"statevent",a)}function ie(a){ee.dispatchEvent(new oe(ee,a))}function ae(a){ct.call(this,"timingevent",a)}function se(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}E(ne,ct),E(oe,ct),E(ae,ct);var ue={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ce={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function le(){}function he(a){var b;return(b=a.a)||(b=a.a={}),b}function fe(){}le.prototype.a=null;var pe,de={OPEN:"a",ib:"b",Na:"c",rb:"d"};function me(){ct.call(this,"d")}function ye(){ct.call(this,"c")}function ge(){}function ve(a,b,t){this.g=a,this.W=b,this.V=t||1,this.I=new Xt(this),this.O=be,a=K?125:void 0,this.P=new Gt(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(me,ct),E(ye,ct),E(ge,le),pe=new ge;var be=45e3,we={},Se={};function xe(a,b,t){a.F=1,a.f=He(ze(b)),a.l=t,a.H=!0,Te(a,null)}function _e(a,b,t,e){a.F=1,a.f=He(ze(b)),a.l=null,a.H=t,Te(a,e)}function Te(a,b){a.v=T(),Ae(a),a.D=ze(a.f),Qe(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Kt(u(a.Ka,a,a.a),a.J)),Jt(a.I,a.a,"readystatechange",a.eb),b=a.h?z(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),re(1)}function Ee(a,b,t){for(var e=!0;!a.m&&a.A<t.length;){var n=Ie(a,t);if(n==Se){4==b&&(a.c=4,ie(14),e=!1);break}if(n==we){a.c=4,ie(15),e=!1;break}Me(a,n)}4==b&&0==t.length&&(a.c=1,ie(16),e=!1),a.b=a.b&&e,e||(De(a),Ne(a))}function Ie(a,b){var t=a.A,e=b.indexOf("\n",t);return-1==e?Se:(t=Number(b.substring(t,e)),isNaN(t)?we:(e+=1)+t>b.length?Se:(b=b.substr(e,t),a.A=e+t,b))}function Ae(a){a.R=T()+a.O,Ce(a,a.O)}function Ce(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=se(u(a.bb,a),b)}function ke(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function Ne(a){a.g.Da()||a.m||a.g.na(a)}function De(a){ke(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,Qt(a.P),Zt(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Me(a,b){try{a.g.Ga(a,b),re(4)}catch(t){}}function Oe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(m(a)||l(a))C(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var t=a.K();else if(a.C&&"function"==typeof a.C)t=void 0;else if(m(a)||l(a)){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(l(a))return a.split("");if(m(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Re(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Re)for(t=a.K(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Pe(a,b){qe(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Le(a))}function Le(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];qe(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)qe(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function qe(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=ve.prototype).setTimeout=function(a){this.O=a},g.eb=function(a){a=a.target;var b=this.B;b&&3==Bn(a)?b.Ua():this.Ka(a)},g.Ka=function(a){try{if(a==this.a)t:{var b=Bn(this.a),t=this.a.ya(),e=this.a.T();if(!(3>b||3==b&&!K&&!this.a.aa())){this.m||4!=b||7==t||re(8==t||0>=e?3:2),ke(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){e:{if(this.a){var o=Fn(this.a,"X-HTTP-Initial-Response");if(o&&!D(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,ie(12),De(this),Ne(this);break t}this.s=!0,Me(this,c)}this.H?(Ee(this,b,r),K&&this.b&&3==b&&(Jt(this.I,this.P,"tick",this.cb),this.P.start())):Me(this,r),4==b&&De(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,Ae(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,ie(12)):(this.c=0,ie(13)),De(this),Ne(this)}}}catch(t){}},g.cb=function(){if(this.a){var a=Bn(this.a),b=this.a.aa();this.A<b.length&&(ke(this),Ee(this,a,b),this.b&&4!=a&&Ae(this))}},g.cancel=function(){this.m=!0,De(this)},g.bb=function(){this.i=null;var a=T();0<=a-this.R?(2!=this.F&&(re(3),ie(17)),De(this),this.c=2,Ne(this)):Ce(this,this.R-a)},(g=Re.prototype).C=function(){Le(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Le(this),this.a.concat()},g.get=function(a,b){return qe(this.b,a)?this.b[a]:b},g.set=function(a,b){qe(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.K(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(a,b){var t;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Fe?(this.h=void 0!==b?b:a.h,Ve(this,a.f),this.j=a.j,Ue(this,a.b),je(this,a.i),this.a=a.a,We(this,un(a.c)),this.g=a.g):a&&(t=String(a).match(Be))?(this.h=!!b,Ve(this,t[1]||"",!0),this.j=Ke(t[2]||""),Ue(this,t[3]||"",!0),je(this,t[4]),this.a=Ke(t[5]||"",!0),We(this,t[6]||"",!0),this.g=Ke(t[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function ze(a){return new Fe(a)}function Ve(a,b,t){a.f=t?Ke(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Ue(a,b,t){a.b=t?Ke(b,!0):b}function je(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function We(a,b,t){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),sn(this,n,t))}),a)),a.f=b}(a.c,a.h)):(t||(b=Ye(b,tn)),a.c=new nn(b,a.h))}function Ge(a,b,t){a.c.set(b,t)}function Qe(a,b,t){q(t)||(t=[String(t)]),sn(a.c,b,t)}function He(a){return Ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),a}function Ke(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ye(a,b,t){return l(a)?(a=encodeURI(a).replace(b,Xe),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xe(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Fe.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Ye(b,$e,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Ye(b,$e,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.i)&&a.push(":",String(t))),(t=this.a)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Ye(t,"/"==t.charAt(0)?Ze:Je,!0))),(t=this.c.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Ye(t,en)),a.join("")},Fe.prototype.resolve=function(a){var b=ze(this),t=!!a.f;t?Ve(b,a.f):t=!!a.j,t?b.j=a.j:t=!!a.b,t?Ue(b,a.b):t=null!=a.i;var e=a.a;if(t)je(b,a.i);else if(t=!!a.a){if("/"!=e.charAt(0))if(this.b&&!this.a)e="/"+e;else{var n=b.a.lastIndexOf("/");-1!=n&&(e=b.a.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(R(n,"./")||R(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?e&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&o==n.length&&r.push("")):(r.push(c),e=!0)}e=r.join("/")}else e=n}return t?b.a=e:t=""!==a.c.toString(),t?We(b,un(a.c)):t=!!a.g,t&&(b.g=a.g),b};var $e=/[#\/\?@]/g,Je=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new Re,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function on(a,b){rn(a),b=cn(a,b),qe(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Pe(a.a,b))}function an(a,b){return rn(a),b=cn(a,b),qe(a.a.b,b)}function sn(a,b,t){on(a,b),0<t.length&&(a.c=null,a.a.set(cn(a,b),N(t)),a.b+=t.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new Re(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ln(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function hn(a){var b=a.a.F.a;if(null!=b)ie(4),b?(ie(10),$n(a.a,a,!1)):(ie(11),$n(a.a,a,!0));else{a.b=new ve(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),ie(4),Qe(b,"TYPE","xmlhttp");var t=a.a.j,e=a.a.I;t&&e&&Ge(b,t,e),_e(a.b,b,!1,a.f)}}function fn(){this.a=this.b=null}function pn(){this.a=new Re}function dn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[v]||(a[v]=++w)):b.charAt(0)+a}function mn(a,b){this.b=a,this.a=b}function yn(a){this.g=a||gn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Ea&&c.ka.Ea()&&c.ka.Ea().zb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new pn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(t,e){C(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.C=function(a){rn(this);var b=[];if(l(a))an(this,a)&&(b=k(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var t=0;t<a.length;t++)b=k(b,a[t])}return b},g.set=function(a,b){return rn(this),this.c=null,an(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.C(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")},E((function(){}),(function(){})),(g=ln.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Da=function(){return!1},g.Ga=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var t=Fn(a,"X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(a=Fn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var e=this.a.ja.a.parse(b)}catch(t){return(b=this.a).m=this.c,void er(b,2)}this.f=e[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?ie(6):"11111"==b?(ie(5),this.g=!0,(!Q||10<=Number(et))&&(this.c=200,this.b.cancel(),ie(11),$n(this.a,this,!0))):(ie(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,hn(this)):1==this.M&&(this.g?(ie(11),$n(this.a,this,!0)):(ie(10),$n(this.a,this,!1)));else{0==this.M?ie(8):1==this.M&&ie(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},pn.prototype.add=function(a){this.a.set(dn(a),a)},pn.prototype.C=function(){return this.a.C()};var gn=10;function vn(a,b){!a.a&&(R(b,"spdy")||R(b,"quic")||R(b,"h2"))&&(a.f=a.g,a.a=new pn,a.b&&(dd(a,a.b),a.b=null))}function bn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function wn(a){return a.b?1:a.a?a.a.a.c:0}function Sn(a,b){return a.b?a=a.b==b:a.a?(b=dn(b),a=qe(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function xn(a,b){var t;a.b&&a.b==b?a.b=null:((t=a.a)&&(t=dn(b),t=qe(a.a.a.b,t)),t&&Pe(a.a.a,dn(b)))}function _n(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return C(a.a.C(),(function(t){b=b.concat(t.j)})),b}return N(a.c)}function Tn(){}function En(){this.a=new Tn}function In(a,b,t){var e=t||"";try{Oe(a,(function(t,n){var r=t;y(t)&&(r=Ot(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function An(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}yn.prototype.cancel=function(){this.c=_n(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},Tn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},Tn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var Cn=c.JSON.parse;function kn(a){Dt.call(this),this.headers=new Re,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Nn,this.D=this.F=!1}E(kn,Dt);var Nn="",Dn=/^https?$/i,Mn=["POST","PUT"];function On(a){return"content-type"==a.toLowerCase()}function Rn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Pn(a),qn(a)}function Pn(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Ln(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=Bn(a)||2!=a.T()))if(a.l&&4==Bn(a))Ht(a.Fa,0,a);else if(a.dispatchEvent("readystatechange"),4==Bn(a)){a.b=!1;try{var t,b=a.T();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.A).match(Be)[1]||null;if(!r&&c.self&&c.self.location){var l=c.self.location.protocol;r=l.substr(0,l.length-1)}n=!Dn.test(r?r.toLowerCase():"")}t=n}t?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.h=6,a.f=a.za()+" ["+a.T()+"]",Pn(a))}finally{qn(a)}}}function qn(a,b){if(a.a){td(a);var t=a.a,e=a.s[0]?d:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function Bn(a){return a.a?a.a.readyState:0}function Fn(a,b){return a.a?a.a.getResponseHeader(b):null}function zn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}if(e)return a;if(t=function(a){var b="";return F(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),l(a)){if(b=encodeURIComponent(String(b)),b+=t=null!=t?"="+encodeURIComponent(String(t)):""){if(0>(t=a.indexOf("#"))&&(t=a.length),0>(e=a.indexOf("?"))||e>t){e=t;var n=""}else n=a.substring(e+1,t);t=(a=[a.substr(0,e),n,a.substr(t)])[1],a[1]=b?t?t+"&"+b:b:t,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return Ge(a,b,t),a}function Vn(a){this.f=[],this.F=new fn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!f("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=f("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Sa=f("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Qa=f("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=f("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.La=a&&a.Ab||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new yn(a&&a.concurrentRequestLimit),this.ja=new En,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Un(a){if(jn(a),3==a.u){var b=a.P++,t=ze(a.B);Ge(t,"SID",a.H),Ge(t,"RID",b),Ge(t,"TYPE","terminate"),Hn(a,t),(b=new ve(a,b,void 0)).F=2,b.f=He(ze(t)),t=!1,c.navigator&&c.navigator.sendBeacon&&(t=c.navigator.sendBeacon(b.f.toString(),"")),!t&&c.Image&&((new Image).src=b.f,t=!0),t||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=T(),Ae(b)}nr(a)}function jn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),Jn(a),a.b.cancel(),a.h&&(h(a.h)&&c.clearTimeout(a.h),a.h=null)}function Wn(a,b){a.f.push(new mn(a.Ra++,b)),3==a.u&&Gn(a)}function Gn(a){bn(a.b)||a.h||(a.h=!0,Vt(a.Ia,a),a.A=0)}function Qn(a,b){var t;t=b?b.W:a.P++;var e=ze(a.B);Ge(e,"SID",a.H),Ge(e,"RID",t),Ge(e,"AID",a.O),Hn(a,e),a.g&&a.i&&zn(e,a.g,a.i),t=new ve(a,t,a.A+1),null===a.g&&(t.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Kn(a,t,1e3),t.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,t),xe(t,e,b)}function Hn(a,b){a.c&&Oe({},(function(t,e){Ge(b,e,t)}))}function Kn(a,b,t){t=Math.min(a.f.length,t);var e=a.c?u(a.c.Ta,a.c,a):null;t:for(var n=a.f,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,l=0;l<t;l++){var h=n[l].b,f=n[l].a;if(0>(h-=r))r=Math.max(0,n[l].b-100),c=!1;else try{In(f,o,"req"+h+"_")}catch(t){e&&e(f)}}if(c){e=o.join("&");break t}}return a=a.f.splice(0,t),b.j=a,e}function Yn(a){a.a||a.l||(a.S=1,Vt(a.Ha,a),a.v=0)}function Xn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=se(u(a.Ha,a),Zn(a,a.v)),a.v++,!0)}function $n(a,b,t){var e=b.l;e&&vn(a.b,e),a.ia=a.oa&&t,a.m=b.c,a.B=rr(a,null,a.ha),Gn(a)}function Jn(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var t=a.Oa+Math.floor(Math.random()*a.Sa);return a.ma()||(t*=2),t*b}function er(a,b){if(2==b){var t=null;a.c&&(t=null);var e=u(a.fb,a);t||(t=new Fe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Ve(t,"https"),He(t)),function(a,b){var t=new te;if(c.Image){var e=new Image;e.onload=_(An,t,e,"TestLoadImage: loaded",!0,b),e.onerror=_(An,t,e,"TestLoadImage: error",!1,b),e.onabort=_(An,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=_(An,t,e,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else ie(2);a.u=0,a.c&&a.c.ta(b),nr(a),jn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==_n(a.b).length&&0==a.f.length||(a.b.c.length=0,N(a.f),a.f.length=0),a.c.sa())}function rr(a,b,t){var e=function(a){return a instanceof Fe?ze(a):new Fe(a,void 0)}(t);if(""!=e.b)b&&Ue(e,b+"."+e.b),je(e,e.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,e=function(a,b,t,e){var n=new Fe(null,void 0);return a&&Ve(n,a),b&&Ue(n,b),t&&je(n,t),e&&(n.a=e),n}(r.protocol,n,+r.port,t)}return a.V&&F(a.V,(function(t,n){Ge(e,n,t)})),b=a.j,t=a.I,b&&t&&Ge(e,b,t),Ge(e,"VER",a.wa),Hn(a,e),e}function or(){}function ir(){if(Q&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function ar(a,b){Dt.call(this),this.a=new Vn(b),this.g=a,this.m=b&&b.testUrl?b.testUrl:function(a){for(var b=arguments[0],t=1;t<arguments.length;t++){var e,n=arguments[t];if(0==n.lastIndexOf("/",0))b=n;else(e=""==b)||(e=0<=(e=b.length-1)&&b.indexOf("/",e)==e),b+=e?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!D(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new cr(this)}function sr(a){me.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function ur(){ye.call(this),this.status=1}function cr(a){this.a=a}(g=kn.prototype).ca=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(pe),this.a.onreadystatechange=u(this.Fa,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(t){return void Rn(this,t)}a=t||"";var n=new Re(this.headers);e&&Oe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=On,t=a.length,e=l(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:l(a)?a.charAt(b):a[b]}(n.K()),t=c.FormData&&a instanceof c.FormData,!(0<=A(Mn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return Q&&ot(9)&&h(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ca,this)):this.m=Ht(this.Ca,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){Rn(this,t)}},g.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),qn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),qn(this,!0)),kn.N.G.call(this)},g.Fa=function(){this.j||(this.w||this.l||this.g?Ln(this):this.$a())},g.$a=function(){Ln(this)},g.T=function(){try{return 2<Bn(this)?this.a.status:-1}catch(t){return-1}},g.za=function(){try{return 2<Bn(this)?this.a.statusText:""}catch(t){return""}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Va=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),Cn(b)}},g.ya=function(){return this.h},g.Ya=function(){return l(this.f)?this.f:String(this.f)},(g=Vn.prototype).wa=8,g.u=1,g.Da=function(){return 0==this.u},g.Ia=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var t,b=new ve(this,a=this.P++,void 0),e=this.i;if(this.J&&(e?U(e=z(e),this.J):e=this.J),null===this.g&&(b.h=e),this.W)t:{for(var n=t=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&l(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.f.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Kn(this,b,t),Ge(n=ze(this.B),"RID",a),Ge(n,"CVER",22),this.o&&this.j&&Ge(n,"X-HTTP-Session-Id",this.j),Hn(this,n),this.g&&e&&zn(n,this.g,e),dd(this.b,b),this.W?(Ge(n,"$req",t),Ge(n,"SID","null"),b.S=!0,xe(b,n,null)):xe(b,n,t),this.u=2}}else 3==this.u&&(a?Qn(this,a):0==this.f.length||bn(this.b)||Qn(this))},g.Ha=function(){this.l=null,this.a=new ve(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=ze(this.pa);Ge(a,"RID","rpc"),Ge(a,"SID",this.H),Ge(a,"CI",this.ia?"0":"1"),Ge(a,"AID",this.O),Hn(this,a),Ge(a,"TYPE","xmlhttp"),this.g&&this.i&&zn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),_e(this.a,a,!0,this.ga)},g.Ga=function(a,b){if(0!=this.u&&(this.a==a||Sn(this.b,a)))if(this.m=a.o,!a.s&&Sn(this.b,a)&&3==this.u){try{var t=this.ja.a.parse(b)}catch(e){t=null}if(q(t)&&3==t.length){if(0==(b=t)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;Jn(this),this.a.cancel(),this.a=null}Xn(this),ie(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=se(u(this.Za,this),6e3));if(1>=wn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&Jn(this),!D(b))for(b=t=this.ja.a.parse(b),t=0;t<b.length;t++){var e=b[t];if(this.O=e[0],e=e[1],2==this.u)if("c"==e[0]){this.H=e[1],this.ga=e[2];var n=e[3];null!=n&&(this.wa=n),null!=(e=e[5])&&h(e)&&0<e&&(this.D=1.5*e),this.o&&(e=a.a)&&((n=Fn(e,"X-Client-Wire-Protocol"))&&vn(this.b,n),this.j&&(e=Fn(e,"X-HTTP-Session-Id")))&&(this.I=e,Ge(this.B,this.j,e)),this.u=3,this.c&&this.c.va(),e=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),e.s?(xn(this.b,e),(n=this.D)&&e.setTimeout(n),e.i&&(ke(e),Ae(e)),this.a=e):Yn(this),0<this.f.length&&Gn(this)}else"stop"!=e[0]&&"close"!=e[0]||er(this,7);else 3==this.u&&("stop"==e[0]||"close"==e[0]?"stop"==e[0]?er(this,7):Un(this):"noop"!=e[0]&&this.c&&this.c.ua(e),this.v=0)}},g.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Xn(this),ie(19))},g.na=function(a){var b=null;if(this.a==a){Jn(this),this.a=null;var t=2}else{if(!Sn(this.b,a))return;b=a.j,xn(this.b,a),t=1}if(this.m=a.o,0!=this.u)if(a.b)1==t?(b=T()-a.v,ee.dispatchEvent(new ae(ee,a.l?a.l.length:0,b,this.A)),Gn(this)):Yn(this);else{var e=a.c;if(3==e||0==e&&0<this.m||!(1==t&&function(a,b){return!(wn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Pa?0:a.Qa))&&(a.h=se(u(a.Ia,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==t&&Xn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),e){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.fb=function(a){ie(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new kn(this.La)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=or.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Ta=function(){},ir.prototype.a=function(a,b){return new ar(a,b)},E(ar,Dt),(g=ar.prototype).addEventListener=function(a,b,t,e){ar.N.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){ar.N.removeEventListener.call(this,a,b,t,e)},g.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,t=this.g,e=this.b||void 0;ie(0),a.ha=t,a.V=e||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new ln(a),null===a.g&&(a.w.h=a.i),t=b,a.g&&a.i&&(t=zn(b,a.g,a.i)),(a=a.w).i=t,b=rr(a.a,null,a.i),ie(3),null!=(t=a.a.F.b)?(a.f=t[0],a.M=1,hn(a)):(Qe(b,"MODE","init"),!a.a.o&&a.a.j&&Qe(b,"X-HTTP-Session-Id",a.a.j),a.b=new ve(a,void 0,void 0),a.b.h=a.h,_e(a.b,b,!1,null),a.M=0)},g.close=function(){Un(this.a)},g.Xa=function(a){if(l(a)){var b={};b.__data__=a,Wn(this.a,b)}else this.h?((b={}).__data__=Ot(a),Wn(this.a,b)):Wn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Un(this.a),delete this.a,ar.N.G.call(this)},E(sr,me),E(ur,ye),E(cr,or),cr.prototype.va=function(){this.a.dispatchEvent("a")},cr.prototype.ua=function(a){this.a.dispatchEvent(new sr(a))},cr.prototype.ta=function(a){this.a.dispatchEvent(new ur(a))},cr.prototype.sa=function(){this.a.dispatchEvent("b")};var lr=_((function(a,b){function t(){}t.prototype=a.prototype;var e=new t;return a.apply(e,Array.prototype.slice.call(arguments,1)),e}),ir);ir.prototype.createWebChannel=ir.prototype.a,ar.prototype.send=ar.prototype.Xa,ar.prototype.open=ar.prototype.Wa,ar.prototype.close=ar.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Dt.prototype.listen=Dt.prototype.Aa,kn.prototype.listenOnce=kn.prototype.Ba,kn.prototype.getLastError=kn.prototype.Ya,kn.prototype.getLastErrorCode=kn.prototype.ya,kn.prototype.getStatus=kn.prototype.T,kn.prototype.getStatusText=kn.prototype.za,kn.prototype.getResponseJson=kn.prototype.Va,kn.prototype.getResponseText=kn.prototype.aa,kn.prototype.send=kn.prototype.ca;var fr={createWebChannelTransport:lr,ErrorCode:ue,EventType:ce,WebChannel:fe,XhrIo:kn},pr=fr.createWebChannelTransport,dr=fr.ErrorCode,mr=fr.EventType,yr=fr.WebChannel,gr=fr.XhrIo;e.default=fr}.call(this,n(21))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){this.status=t.status,this.text=t.responseText};e.EmailJSResponseStatus=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.clearAll=function(form){form.classList.remove(this.PROGRESS),form.classList.remove(this.DONE),form.classList.remove(this.ERROR)},t.progressState=function(form){this.clearAll(form),form.classList.add(this.PROGRESS)},t.successState=function(form){form.classList.remove(this.PROGRESS),form.classList.add(this.DONE)},t.errorState=function(form){form.classList.remove(this.PROGRESS),form.classList.add(this.ERROR)},t.PROGRESS="emailjs-sending",t.DONE="emailjs-success",t.ERROR="emailjs-error",t}();e.UI=r}]]);